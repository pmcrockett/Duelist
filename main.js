(()=>{"use strict";var t=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,e=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,s=/[^-+\dA-Z]/g;function i(e,s,i,c){if(1!==arguments.length||"string"!=typeof e||/\d/.test(e)||(s=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var h=(s=String(n[s]||s||n.default)).slice(0,4);"UTC:"!==h&&"GMT:"!==h||(s=s.slice(4),i=!0,"GMT:"===h&&(c=!0));var m=function(){return i?"getUTC":"get"},g=function(){return e[m()+"Date"]()},p=function(){return e[m()+"Day"]()},f=function(){return e[m()+"Month"]()},k=function(){return e[m()+"FullYear"]()},b=function(){return e[m()+"Hours"]()},v=function(){return e[m()+"Minutes"]()},L=function(){return e[m()+"Seconds"]()},y=function(){return e[m()+"Milliseconds"]()},S=function(){return i?0:e.getTimezoneOffset()},w=function(){return d(e)},C={d:function(){return g()},dd:function(){return o(g())},ddd:function(){return r.dayNames[p()]},DDD:function(){return a({y:k(),m:f(),d:g(),_:m(),dayName:r.dayNames[p()],short:!0})},dddd:function(){return r.dayNames[p()+7]},DDDD:function(){return a({y:k(),m:f(),d:g(),_:m(),dayName:r.dayNames[p()+7]})},m:function(){return f()+1},mm:function(){return o(f()+1)},mmm:function(){return r.monthNames[f()]},mmmm:function(){return r.monthNames[f()+12]},yy:function(){return String(k()).slice(2)},yyyy:function(){return o(k(),4)},h:function(){return b()%12||12},hh:function(){return o(b()%12||12)},H:function(){return b()},HH:function(){return o(b())},M:function(){return v()},MM:function(){return o(v())},s:function(){return L()},ss:function(){return o(L())},l:function(){return o(y(),3)},L:function(){return o(Math.floor(y()/10))},t:function(){return b()<12?r.timeNames[0]:r.timeNames[1]},tt:function(){return b()<12?r.timeNames[2]:r.timeNames[3]},T:function(){return b()<12?r.timeNames[4]:r.timeNames[5]},TT:function(){return b()<12?r.timeNames[6]:r.timeNames[7]},Z:function(){return c?"GMT":i?"UTC":l(e)},o:function(){return(S()>0?"-":"+")+o(100*Math.floor(Math.abs(S())/60)+Math.abs(S())%60,4)},p:function(){return(S()>0?"-":"+")+o(Math.floor(Math.abs(S())/60),2)+":"+o(Math.floor(Math.abs(S())%60),2)},S:function(){return["th","st","nd","rd"][g()%10>3?0:(g()%100-g()%10!=10)*g()%10]},W:function(){return w()},WW:function(){return o(w())},N:function(){return u(e)}};return s.replace(t,(function(t){return t in C?C[t]():t.slice(1,t.length-1)}))}var n={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},r={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(e,"0")},a=function(t){var e=t.y,s=t.m,i=t.d,n=t._,r=t.dayName,o=t.short,a=void 0!==o&&o,d=new Date,u=new Date;u.setDate(u[n+"Date"]()-1);var l=new Date;return l.setDate(l[n+"Date"]()+1),d[n+"FullYear"]()===e&&d[n+"Month"]()===s&&d[n+"Date"]()===i?a?"Tdy":"Today":u[n+"FullYear"]()===e&&u[n+"Month"]()===s&&u[n+"Date"]()===i?a?"Ysd":"Yesterday":l[n+"FullYear"]()===e&&l[n+"Month"]()===s&&l[n+"Date"]()===i?a?"Tmw":"Tomorrow":r},d=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var s=new Date(e.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);var i=e.getTimezoneOffset()-s.getTimezoneOffset();e.setHours(e.getHours()-i);var n=(e-s)/6048e5;return 1+Math.floor(n)},u=function(t){var e=t.getDay();return 0===e&&(e=7),e},l=function(t){return(String(t).match(e)||[""]).pop().replace(s,"").replace(/GMT\+0000/g,"UTC")};const c=document.querySelector(".task-bin"),h=["N/A","Unimportant","Important","Urgent"],m=["N/A","Not started","In progress","Complete"];function g(t,e,s){D(s,e),s.expanded?t.setAttribute("d","M12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22M17,14L12,9L7,14H17Z"):t.setAttribute("d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M7,10L12,15L17,10H7Z")}function p(t,e,s,i){let n=e.querySelector(".subtasks-plus-img > path:not(.bg-img)");if(s.subtaskList.expanded=t,D(s.subtaskList,e),s.subtaskList.expanded?n.setAttribute("d","M17,13H7V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"):n.setAttribute("d","M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),i)for(let n of s.subtaskList.tasks)p(t,e.querySelector(`.subtasks.id-${n.id}`),n,i)}function f(){c.classList.add("freeze")}function k(){c.classList.remove("freeze")}function b(t){let e=c.querySelector(`.task.id-${t}`);e&&e.classList.remove("selected")}function v(t,e){let s=document.elementsFromPoint(t,e),i=!1,n=-1;for(let t of s)if(t.classList.contains("task")){let e=t.className.indexOf("id-"),s=t.className.indexOf(" ",e);s<0&&(s=t.className.length),i=!0,n=Number(t.className.slice(e+3,s))}else if(t.classList.contains("task-expand-img"))return-1;return i?n:-1}function L(t){f();let e=document.querySelector("body"),s=e.querySelector(`.task.id-${t.id}`);s.classList.add("editing");let i=y("div","card-input",e),n=C("text",null,"input-title",t.title,i,"field-container","Task name");n.focus(),n.setSelectionRange(n.value.length,n.value.length);let r=y("div",["due-container","input-container"],i),o=C("date",null,"input-date",t.dueDateStr,r,"field-container","Due date"),a=C("time",null,"input-time",t.dueTimeStr,r,"field-container","Due time"),d=C("textarea",null,"input-desc",t.description,i,"field-container","Description"),u=y("div",["radio-container","input-container"],i),l=y("div","field-container",u),c=(y("div","pseudo-label",l,"Priority"),y(T("priority-radio",t.priority,h),null,l));A(c,null,"input-priority");let g=y("div","field-container",u),p=(y("div","pseudo-label",g,"Progress"),y(T("progress-radio",t.progress,m),null,g));A(p,null,"input-progress");let k=y("div","progress-check-container",g),b=y("input",null,k);A(b,"checkbox","progress-check"),t.useProgressFromSubtasks&&b.setAttribute("checked","checked"),y("label",null,k,"Set progress from subtasks").setAttribute("for","progress-check"),S(b,p);let v=C("textarea",null,"input-note",t.notes,i,"field-container","Notes"),L=y("div","input-buttons",i);return{card:s,cardInput:i,titleInput:n,dateInput:o,timeInput:a,descInput:d,priorityField:c,progressCheck:b,progressField:p,notesInput:v,confirm:y(x("M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z","Confirm",!0,"input-button"),["confirm-edit-img","input-button"],L),cancel:y(x("M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z","Cancel",!0,"input-button"),["confirm-edit-img","input-button"],L)}}function y(t,e,s,i){if("string"==typeof t)var n=document.createElement(t);else n=t;return e&&("string"==typeof e?n.classList.add(e):n.classList.add(...e)),i&&(n.textContent=i),s.appendChild(n),n}function S(t,e){t.checked?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")}function w(t){let e=t.querySelectorAll("input");for(let t=0;t<e.length;t++)if(e[t].checked)return t;return-1}function C(t,e,s,i,n,r,o,a){let d=y("div",r,n);var u;return y("label",a,d,o).setAttribute("for",s),"textarea"==t?A(u=y("textarea",e,d,i),null,s,null):A(u=y("input",e,d),t,s,i),u}function A(t,e,s,i){e&&t.setAttribute("type",e),s&&(t.setAttribute("name",s),t.setAttribute("id",s)),i&&t.setAttribute("value",i)}function D(t,e){if(t.expanded)return e.classList.remove("collapsed"),void e.classList.add("expanded");e.classList.remove("expanded"),e.classList.add("collapsed")}function T(t,e,s){let i=document.createElement("fieldset");i.classList.add(`${t}-fieldset`);let n=[],r=[];for(let e=0;e<s.length;e++)n.push(document.createElement("input")),n[e].setAttribute("type","radio"),n[e].setAttribute("id",`${t}-${e}`),n[e].setAttribute("name",t),n[e].setAttribute("value",s[e]),i.appendChild(n[e]),r.push(document.createElement("label")),r[e].setAttribute("for",`${t}-${e}`),r[e].textContent=s[e],i.appendChild(r[e]);return n[e].setAttribute("checked",""),i}function x(t,e,s,i){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 24 24");let r=document.createElementNS("http://www.w3.org/2000/svg","title");if(r.textContent=e,n.appendChild(r),s){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M12,4A10,10 0 0,0 4,12A10,10 0 0,0 12,20A10,10 0 0,0 20,12A10,10 0 0,0 12,4Z"),o.classList.add("bg-img"),n.appendChild(o)}let a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",t),n.appendChild(a),null!=i&&(a.classList.add(i),s&&o.classList.add(i)),n}const M="http://www.w3.org/2000/svg",E=class{clickReleaseWindow;svg;group;menu;border;menuItems=[];buttonDownTime;isVisible=!1;tileGroup=null;functions;itemTexts;borderSize=1;scale=1;fontSize=20;menuMargin=2;menuPosOffset={x:-4,y:-1};menuWidth;menuHeight;initTime;postInitDelay=200;html;constructor(t,e,s){this.html=document.querySelector("html"),this.svg=document.createElementNS(M,"svg"),this.svg.classList.add("menu"),s&&this.svg.classList.add(...s),this.svg.setAttribute("display","none"),this.clickReleaseWindow=500,this.group=document.createElementNS(M,"g"),this.menu=document.createElementNS(M,"rect"),this.border=document.createElementNS(M,"rect"),this.group.appendChild(this.border),this.group.appendChild(this.menu),this.group.setAttribute("id","menuGroup"),this.border.classList.add("menu-border"),this.menu.classList.add("menu-rect"),this.functions=e,this.itemTexts=t,this.svg.addEventListener("mousemove",(t=>{this.updateHighlight(t.clientX,t.clientY)})),window.addEventListener("scroll",(t=>{this.isVisible&&this.erase()})),document.addEventListener("mousedown",(t=>{if(this.isVisible&&(new Date).getTime()-this.initTime>this.postInitDelay){let e=this.getHighlighted(),s=document.elementsFromPoint(t.clientX,t.clientY);e&&s.includes(e.rect)&&this.activateSelection(),this.erase(),this.svg.remove()}}))}init(){let t=window.getComputedStyle(this.svg).getPropertyValue("font-size");if(t){let e="";for(let s of t){let t=s.charCodeAt(0);t>=48&&t<=57&&(e+=s)}this.fontSize=Number(e)}this.svg.setAttribute("display","block"),this.svg.setAttribute("style","position: absolute;");for(let t=0;t<this.itemTexts.length;t++)this.addMenuItem(this.itemTexts[t],this.functions[t]);let e=0,s=0;for(let t of this.menuItems){let e=t.svgText.text.getBBox().width+2*t.svgText.xMargin;e>s&&(s=e)}for(let t=0;t<this.menuItems.length;t++)this.menuItems[t].rect.setAttribute("width",s),this.menuItems[t].group.setAttribute("transform",`translate(0, ${e})`),e+=Number(this.menuItems[t].rect.getAttribute("height"));this.menu.setAttribute("width",`${s}`),this.menu.setAttribute("height",`${e}`),this.border.setAttribute("width",`${s+2*this.borderSize}`),this.border.setAttribute("height",`${e+2*this.borderSize}`),this.border.setAttribute("x",""+-1*this.borderSize),this.border.setAttribute("y",""+-1*this.borderSize),this.svg.setAttribute("width",""+(s*this.scale+this.borderSize*this.scale)),this.svg.setAttribute("height",""+(e*this.scale+this.borderSize*this.scale)),this.svg.setAttribute("viewBox",`${-1*this.borderSize-this.menuMargin} ${-1*this.borderSize-this.menuMargin} ${s+2*this.borderSize+2*this.menuMargin} ${e+2*this.borderSize+2*this.menuMargin}`),this.menuWidth=s+2*this.borderSize-2*this.menuMargin,this.menuHeight=e+2*this.borderSize-2*this.menuMargin,this.initTime=(new Date).getTime()}buttonDown(t,e){this.isVisible&&this.erase(),this.isVisible=!0,this.svg.appendChild(this.group),this.init();const s=this.html.clientWidth,i=this.html.clientHeight;let n=0,r=0;t+this.menuPosOffset.x+this.menuWidth+1>s&&(n=s-(t+this.menuPosOffset.x+this.menuWidth+1)),e+this.menuPosOffset.y+this.menuHeight+1>i&&(r=i-(e+this.menuPosOffset.y+this.menuHeight+1)),this.svg.setAttribute("transform",`translate(${t-this.menuMargin+this.menuPosOffset.x+n+window.scrollX}, ${e-this.menuMargin+this.menuPosOffset.y+r+window.scrollY})`),this.updateHighlight(t,e),this.buttonDownTime=performance.now()}buttonUp(){performance.now()-this.buttonDownTime>clickReleaseWindow&&this.erase()}erase(){this.group.remove();for(let t of this.menuItems)t.group.remove();this.svg.setAttribute("display","none"),this.menuItems=[],this.isVisible=!1}addMenuItem(t,e,s){null==s&&(s=this.menuItems.length),this.menuItems.splice(s,0,new I(t,this.fontSize,this.group,s,e))}updateHighlight(t,e){if(this.isVisible){for(let t of this.menuItems)t.unhighlight();let s=document.elementsFromPoint(t,e);for(let t of this.menuItems)if(s.includes(t.rect)){t.highlight();break}}}getHighlighted(){if(this.isVisible)for(let t of this.menuItems)if(t.isHighlighted)return t}getHighlightedText(){let t=this.getHighlighted();return t?t.svgText.text.textContent:void 0}activateSelection(t="highlighted"){"highlighted"===t&&(t=this.getHighlightedText());let e=this.menuItems.find((e=>e.text==t));return e?e.function():null}};class I{rect;group;text;svgText;isHighlighted;functions;constructor(t,e,s,i,n){this.text=t,this.rect=document.createElementNS(M,"rect"),this.group=document.createElementNS(M,"g"),this.group.appendChild(this.rect),s.appendChild(this.group),this.svgText=new N(t,this.group,i,e),this.rect.setAttribute("fill","rgba(0, 0, 0, 0)"),this.rect.setAttribute("height",""+1.2*e),this.rect.classList.add("menu-item"),this.isHighlighted=!1,this.function=n}highlight(){this.rect.classList.add("menu-highlight"),this.isHighlighted=!0}unhighlight(){this.rect.classList.remove("menu-highlight"),this.isHighlighted=!1}}function N(t,e,s=-1,i=10){this.fontSize=i,this.xMargin=.2*this.fontSize,this.text=document.createElementNS(M,"text"),this.text.textContent=t,this.text.setAttribute("cursor","default"),this.text.classList.add(`menu-text-${s}`),this.text.classList.add("menu-text"),e.appendChild(this.text),this.text.setAttribute("x",`${this.xMargin}`),this.text.setAttribute("y",""+.9*this.fontSize),this.text.setAttribute("font-size",`${this.fontSize}px`)}function H(t){let e;try{e=window[t];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}class ${title;dueDate;dueDateStr;dueTime;dueTimeStr;description;priority;progress;notes;id;depth;currentlyEditing;useProgressFromSubtasks;subtaskList;supertaskList;expanded;selected;domDiv;static lastId=-1;constructor(t,e,s,i,n,r,o,a,d){this.title=t||"",this.dueDateStr=e,this.dueTimeStr=s,this.updateDue(),this.description=i||"",this.priority=n||0,this.progress=r||0,this.notes=o||"",this.selected=!1,a?a.add(this):this.supertaskList=null,this.currentlyEditing=!1,this.subtaskList=new P(this),this.expanded=this.hasContent(),this.useProgressFromSubtasks=!1,d?this.id=-1:(this.assignNewId(),this.updateDepth(!0))}clone(t,e,s){var i=new $(this.title,this.dueDateStr,this.dueTimeStr,this.description,this.priority,this.progress,this.notes,null,!0);if(i.expanded=this.expanded,i.selected=!1,i.useProgressFromSubtasks=this.useProgressFromSubtasks,e&&e.add(i,s),t){i.subtaskList.expanded=this.subtaskList.expanded;for(let e=0;e<this.subtaskList.tasks.length;e++)this.subtaskList.tasks[e].clone(t,i.subtaskList)}return i}updateDue(){let t=function(){let t=(new Date).getTimezoneOffset(),e=t<0?-1:1;t=Math.abs(t);let s=`${String(Math.floor(t/60)).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`;return s=1==e?"-"+s:"+"+s,s}();if(this.dueDateStr&&this.dueDateStr.length){let e=`${this.dueDateStr}T00:00:00${t}`;this.dueDate=new Date(e)}if(this.dueTimeStr&&this.dueTimeStr.length){let e=`2000-01-01T${this.dueTimeStr}:00${t}`;this.dueTime=new Date(e)}}updateDepth(t){if(this.depth=0,null==this.supertaskList)return;let e=this.supertaskList.owner;for(;null!=e;)this.depth++,e=e.supertaskList?e.supertaskList.owner:null}delete(t){return!!this.supertaskList&&(this.domDiv&&(this.domDiv.task.remove(),t&&this.domDiv.subtasks.remove()),this.supertaskList.removeId(this.id))}hasContent(){return this.description&&""!=this.description||this.priority||this.progress||this.notes&&this.notes.length}log(){O.logTask(this)}assignNewId(){this.id=$.generateId()}assignNewIdRecursive(){this.assignNewId();for(let t=0;t<this.subtaskList.tasks.length;t++)this.subtaskList.tasks[t].assignNewIdRecursive()}refreshDom(t){this.domDiv&&(this.domDiv.task.remove(),t&&this.domDiv.subtasks.remove()),this.useProgressFromSubtasks&&(this.progress=this.getProgressRecursive()),this.domDiv=function(t){let e=null,s=t.supertask,n=-1;t.supertaskList&&(n=t.supertaskList.getTaskIdx(t)+1);let r=-1,o=null;n>0&&n<t.supertaskList.tasks.length&&(r=t.supertaskList.tasks[n].id,o=c.querySelector(`.task.id-${r}`)),e=s?c.querySelector(`.subtasks.id-${s.id}`):c;let a=`margin-left: calc(calc(var(--card-indent) * ${t.depth}) + calc(var(--card-margin) * 0.5))`,d=document.createElement("div");d.classList.add("task",`id-${t.id}`),d.setAttribute("style",a),t.selected&&d.classList.add("selected"),o?o.insertAdjacentElement("beforebegin",d):e.appendChild(d);let u=y("div","card-header-div",d),l=y("div","card-title-container",u);t.priority&&l.appendChild(function(t){let e=x(["M12 16C13.66 16 15 14.66 15 13C15 11.88 14.39 10.9 13.5 10.39L3.79 4.77L9.32 14.35C9.82 15.33 10.83 16 12 16M12 3C10.19 3 8.5 3.5 7.03 4.32L9.13 5.53C10 5.19 11 5 12 5C16.42 5 20 8.58 20 13C20 15.21 19.11 17.21 17.66 18.65H17.65C17.26 19.04 17.26 19.67 17.65 20.06C18.04 20.45 18.68 20.45 19.07 20.07C20.88 18.26 22 15.76 22 13C22 7.5 17.5 3 12 3M2 13C2 15.76 3.12 18.26 4.93 20.07C5.32 20.45 5.95 20.45 6.34 20.06C6.73 19.67 6.73 19.04 6.34 18.65C4.89 17.2 4 15.21 4 13C4 12 4.19 11 4.54 10.1L3.33 8C2.5 9.5 2 11.18 2 13Z","M12 1.38L9.14 12.06C8.8 13.1 9.04 14.29 9.86 15.12C11.04 16.29 12.94 16.29 14.11 15.12C14.9 14.33 15.16 13.2 14.89 12.21M14.6 3.35L15.22 5.68C18.04 6.92 20 9.73 20 13C20 15.21 19.11 17.21 17.66 18.65H17.65C17.26 19.04 17.26 19.67 17.65 20.06C18.04 20.45 18.68 20.45 19.07 20.07C20.88 18.26 22 15.76 22 13C22 8.38 18.86 4.5 14.6 3.35M9.4 3.36C5.15 4.5 2 8.4 2 13C2 15.76 3.12 18.26 4.93 20.07C5.32 20.45 5.95 20.45 6.34 20.06C6.73 19.67 6.73 19.04 6.34 18.65C4.89 17.2 4 15.21 4 13C4 9.65 5.94 6.86 8.79 5.65","M12,16A3,3 0 0,1 9,13C9,11.88 9.61,10.9 10.5,10.39L20.21,4.77L14.68,14.35C14.18,15.33 13.17,16 12,16M12,3C13.81,3 15.5,3.5 16.97,4.32L14.87,5.53C14,5.19 13,5 12,5A8,8 0 0,0 4,13C4,15.21 4.89,17.21 6.34,18.65H6.35C6.74,19.04 6.74,19.67 6.35,20.06C5.96,20.45 5.32,20.45 4.93,20.07V20.07C3.12,18.26 2,15.76 2,13A10,10 0 0,1 12,3M22,13C22,15.76 20.88,18.26 19.07,20.07V20.07C18.68,20.45 18.05,20.45 17.66,20.06C17.27,19.67 17.27,19.04 17.66,18.65V18.65C19.11,17.2 20,15.21 20,13C20,12 19.81,11 19.46,10.1L20.67,8C21.5,9.5 22,11.18 22,13Z"][t-1],h[t],!1);return e.classList.add("priority-img",["priority-low","priority-mid","priority-high"][t-1]),e}(t.priority)),t.progress&&l.appendChild(function(t){let e=x(["M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z","M8.46 8.46C9.4 7.53 10.67 7 12 7C13.33 7 14.6 7.53 15.54 8.46L8.46 15.54C7.53 14.6 7 13.33 7 12C7 10.67 7.53 9.4 8.46 8.46M8.17 2.76C9.39 2.26 10.69 2 12 2C13.31 2 14.61 2.26 15.83 2.76C17.04 3.26 18.14 4 19.07 4.93C20 5.86 20.74 6.96 21.24 8.17C21.74 9.39 22 10.69 22 12C22 14.65 20.95 17.2 19.07 19.07C17.2 20.95 14.65 22 12 22C10.69 22 9.39 21.74 8.17 21.24C6.96 20.74 5.86 20 4.93 19.07C3.05 17.2 2 14.65 2 12C2 9.35 3.05 6.8 4.93 4.93C5.86 4 6.96 3.26 8.17 2.76M6.34 17.66C7.84 19.16 9.88 20 12 20C14.12 20 16.16 19.16 17.66 17.66C19.16 16.16 20 14.12 20 12C20 9.88 19.16 7.84 17.66 6.34C16.16 4.84 14.12 4 12 4C9.88 4 7.84 4.84 6.34 6.34C4.84 7.84 4 9.88 4 12C4 14.12 4.84 16.16 6.34 17.66Z","M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"][t-1],m[t],!1);return e.classList.add("progress-img",["progress-not-started","progress-in-progress","progress-completed"][t-1]),e}(t.progress)),y("h2",["card-title","card-editable"],l,t.title);let f=y(x("M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M15.1,7.07C15.24,7.07 15.38,7.12 15.5,7.23L16.77,8.5C17,8.72 17,9.07 16.77,9.28L15.77,10.28L13.72,8.23L14.72,7.23C14.82,7.12 14.96,7.07 15.1,7.07M13.13,8.81L15.19,10.87L9.13,16.93H7.07V14.87L13.13,8.81Z","Edit task",!0),"edit-task-img",u);t.dueDate&&y("div",["card-due-date","card-editable"],u,`${i(t.dueDate,"dddd, mmmm dS, yyyy")}`),t.dueTime&&y("div",["card-due-time","card-editable"],u,`${i(t.dueTime,"h:MM TT")}`);let k=y(x("","Expand",!0),"task-expand-img",u);t.hasContent()||k.classList.add("hidden");let b=k.querySelector("path:not(.bg-img)");if(g(b,d,t),t.priority>0||t.progress>0){let e=y("div","info-container",d);if(t.priority>0){let s=y("div","card-container",e);y("div","card-label",s,"Priority"),y("div",["card-priority","card-editable"],s,h[t.priority])}if(t.progress>0||t.useProgressFromSubtasks){let s=y("div","card-container",e),i=(y("div","card-label",s,"Progress"),y("div",["card-progress","card-editable"],s,m[t.progress]));t.useProgressFromSubtasks&&(i.textContent+=" (from subtasks)")}}if(t.description.length){let e=y("div","card-container",d);y("div",["card-description","card-content","card-editable"],e,t.description),y("div","card-label",e,"About")}if(t.notes.length){let e=y("div","card-container",d);y("div",["card-notes","card-content","card-editable"],e,t.notes),y("div","card-label",e,"Notes")}let v=c.querySelector(`.subtasks.id-${t.id}`),L=!1;var S;return v?(v.remove(),d.insertAdjacentElement("afterend",v),S=v.querySelector(".subtasks-header"),t.subtasks.length?S.classList.remove("hidden"):S.classList.add("hidden"),v.querySelector(".subtasks-text").textContent=`${t.subtasks.length} \n            ${1==t.subtasks.length?"subtask":"subtasks"}`):(L=!0,v=document.createElement("div"),d.insertAdjacentElement("afterend",v),v.classList.add("subtasks",`id-${t.id}`),(S=y("div",["subtasks-header",`id-${t.id}`],v)).setAttribute("style",a),t.subtasks.length?S.classList.remove("hidden"):S.classList.add("hidden"),y(x("","Subtasks",!0),"subtasks-plus-img",S).querySelector("path:not(.bg-img)"),p(t.subtaskList.expanded,v,t,!1),y("div",["subtasks-text",`id-${t.id}`],S,`${t.subtasks.length} \n            ${1==t.subtasks.length?"subtask":"subtasks"}`)),{task:d,subtasks:v,subtasksExpand:S,needSubtasksListener:L,taskExpand:k,taskExpandPath:b,header:u,editOpen:f}}(this),Y.addExpandTask(this.domDiv.taskExpand,this,this.domDiv.task,this.domDiv.taskExpandPath,this.domDiv.header),Y.addOpenEdit(this.domDiv.editOpen,this),this.domDiv.needSubtasksListener&&Y.addExpandSubtasks(this.domDiv.subtasksExpand,this,this.domDiv.subtasks),t&&this.subtaskList.refreshDom(t);for(let t of this.chain)t.useProgressFromSubtasks&&t.refreshDom(!1)}addSubtask(t,e){return this.subtaskList.add(t,e)}removeSubtaskId(t){return this.subtaskList.removeId(t)}removeSubtaskIdx(t){return this.subtaskList.removeIdx(t)}getProgressRecursive(t){null==t&&(t=0),!this.useProgressFromSubtasks&&this.progress>0&&(t=1!=this.progress||1!=t&&0!=t?3!=this.progress||3!=t&&0!=t?2:3:1);for(let e of this.subtaskList.tasks)t=e.getProgressRecursive(t);return t}get subtasks(){return this.subtaskList.tasks}get supertask(){return this.supertaskList?this.supertaskList.owner:null}get chain(){let t=this.supertaskList.owner,e=[];for(;t;)e.push(t),t=t.supertaskList.owner;return e}static generateId(){return $.lastId>=Number.MAX_SAFE_INTEGER&&($.lastId=-1),++$.lastId}static resetIds(){$.lastId=-1}}class P{tasks;owner;expanded=!1;static writeErrorShown=!1;static DEFAULT_KEY="taskList";constructor(t,e){this.owner=t,this.tasks=[],e&&e.forEach((t=>{this.add(t)}))}createTask(t,e){t||(t=this.tasks.length+1);let s=new $;if(this.add(s,t),this.owner?this.owner.refreshDom(!0):this.refreshDom(!1),this.writeRootToLocalStorage(),e&&!F.currentlyEditing){let t=L(s);Y.addInputCard(s,t)}}add(t,e){null==e&&(e=this.tasks.length),this.tasks.splice(e,0,t),t.supertaskList=this,t.updateDepth(!0)}getTaskIdx(t){for(let e=0;e<this.tasks.length;e++)if(this.tasks[e].id==t.id)return e;return-1}removeId(t){console.log(`Looking for id ${t} in tasks length ${this.tasks.length}`);for(let e=0;e<this.tasks.length;e++)if(this.tasks[e].id==t)return console.log(`Removing id ${t} at idx ${e}`),this.removeIdx(e);return!1}removeIdx(t){return this.tasks[t].supertaskList=null,this.tasks.splice(t,1),!0}getTaskById(t,e){let s=null;for(let i of this.tasks){if(i.id==t)return i;if(e&&i.subtaskList.hasTasks()&&(s=i.subtaskList.getTaskById(t,e),s))return s}return s}hasTasks(){return this.tasks.length>=1}getIdOrder(t){const e=[];for(let s of this.tasks)e.push(s.id),t&&e.push(...s.subtaskList.getIdOrder(t));return e}clear(){for(;this.tasks.length;)this.tasks[0].delete(!0)}refreshDom(t){this.tasks.forEach((e=>{e.domDiv&&(e.domDiv.task.remove(),t&&e.domDiv.subtasks.remove())})),this.tasks.forEach((e=>{e.refreshDom(t)}));for(let e=0;e<this.tasks.length;e++)this.tasks[e].refreshDom(t)}cloneJson(){let t=new P(null,null);t.expanded=this.expanded;for(let e of this.tasks){let s=e.clone(!1,null);t.add(s),s.id=e.id,s.depth=e.depth,s.dueDate=null,s.dueTime=null,s.subtaskList=e.subtaskList.cloneJson(),s.supertaskList=null}return t}initFromJson(t,e){this.owner=e,this.expanded=t.expanded,this.clear();for(let e of t.tasks){let t=new $(e.title,e.dueDateStr,e.dueTimeStr,e.description,e.priority,e.progress,e.notes,this,!1);t.expanded=e.expanded,t.useProgressFromSubtasks=e.useProgressFromSubtasks,t.subtaskList.initFromJson(e.subtaskList,t)}}writeToLocalStorage(t){if(H("localStorage")){t||(t=P.DEFAULT_KEY);let e=JSON.stringify(this.cloneJson());return localStorage.setItem(t,e),!0}return P.writeErrorShown||(P.writeErrorShown=!0,alert("Your browser either doesn't support local storage or has it disabled, so your tasks will not be saved after leaving this page.")),!1}writeRootToLocalStorage(t){this.owner?this.root.writeToLocalStorage(t):this.writeToLocalStorage(t)}restoreFromLocalStorage(t){if(H("localStorage")){t||(t=P.DEFAULT_KEY);let e=localStorage.getItem(t);if(e){$.resetIds();let t=JSON.parse(e);return this.initFromJson(t),this.refreshDom(!0),!0}}return!1}clearLocalStorage(t){H("localStorage")&&(t||(t=P.DEFAULT_KEY),localStorage.removeItem(t))}get root(){return this.owner?this.owner.chain.length?this.owner.chain[this.owner.chain.length-1].supertaskList:this.owner.supertaskList:this}}let F={currentlyEditing:!1,selectionAddTo:!1,selectionMass:!1,setSelectionAddTo:function(t,e){"Control"==e.key&&(F.selectionAddTo=t)},setSelectionMass:function(t,e){"Shift"==e.key&&(F.selectionMass=t)},touch:{time:[null,null],pos:[null,null],touchedId:[null,null]}},O=function(){let t=function(e,s){s||(s=""),console.log(s+"----------------"),console.log(s+"Title: "+e.title),console.log(s+"Due date: "+e.dueDate),console.log(s+"Due time: "+e.dueTime),console.log(s+"Description: "+e.description),console.log(s+"Progress: "+e.progress),console.log(s+"Notes:  "+e.notes),console.log(s+"ID: "+e.id),console.log(s+"Depth: "+e.depth),e.supertaskList&&e.supertaskList.owner?console.log(s+"Supertask: ("+e.supertaskList.owner.id+") "+e.supertaskList.owner.title):console.log(s+"No supertask"),e.subtaskList.hasTasks()&&(console.log(s+e.subtaskList.tasks.length+" subtask"+(1!=e.subtaskList.tasks.length?"s:":":")),e.subtaskList.tasks.forEach((e=>{t(e,s+"*   ")})))};return{logTask:t}}(),z=function(){const t=[];let e=function(t){const e=[];for(let s of t){let i=s.chain,n=!1;for(let e of t)if(i.includes(e)){n=!0;break}n||e.push(s)}return e},s=function(){t.splice(0,t.length)};return{buffer:t,remove:function(t,s,i){t instanceof Array||(t=[t]),s&&(t=e(t));let n=t[0].supertaskList.root;for(let e of t){let t=e.supertaskList.getTaskIdx(e),n=e.supertaskList,r=e.subtaskList;if(e.delete(!0),!s)for(let e=0;e<r.tasks.length;e++)n.add(r.tasks[e],t++);i&&(n.owner?n.owner.refreshDom(!0):n.refreshDom(!0))}n.writeToLocalStorage()},copy:function(i,n,r){i instanceof Array||(i=[i]),s(),n&&(i=e(i));let o=r.getIdOrder(!0);i.sort((function(t,e){return o.indexOf(t.id)<o.indexOf(e.id)?-1:1}));for(let e of i)t.push(e.clone(n))},cut:function(t,e,s,i){t instanceof Array||(t=[t]),this.copy(t,e,i),this.remove(t,e)},paste:function(e,s){if(e instanceof $&&(e=e.subtaskList),t.length){for(let i of t){let t=i.clone(!0,e,s++);t.assignNewIdRecursive(),t.updateDepth(!0)}return e.owner?e.owner.refreshDom(!0):e.refreshDom(!0),e.writeRootToLocalStorage(),!0}return!1},clearBuffer:s}}(),R=function(){const t=[];let e=function(e){i(e)||(e.selected=!0,t.push(e),function(t){let e=c.querySelector(`.task.id-${t}`);e&&e.classList.add("selected")}(e.id))},s=function(){for(let e of t)e.selected=!1,b(e.id);t.splice(0,t.length)},i=function(e){return t.indexOf(e)>=0},n=function(t){if(F.selectionMass)if(R.selected.length){let e=Z.getIdOrder(!0),s=e.indexOf(R.selected[0].id),i=e.indexOf(t.id);if(i<s){let t=s;s=i,i=t}R.addExclusive(R.selected[0]);for(let t=s;t<=i;t++)e[t]!=R.selected[0].id&&R.add(Z.getTaskById(e[t],!0))}else R.addExclusive(t);else F.selectionAddTo?R.contains(t)?R.remove(t):R.add(t):R.addExclusive(t)},r=function(t,e){f();let s=["New task (above)","New task (below)","New task (as subtask)","Copy (with subtasks)","Copy (without subtasks)","Cut (with subtasks)","Cut (without subtasks)"],i=[function(){t.supertaskList.createTask(t.supertaskList.getTaskIdx(t),!0)},function(){t.supertaskList.createTask(t.supertaskList.getTaskIdx(t)+1,!0)},function(){t.subtaskList.createTask(null,!0)},function(){z.copy(R.selected,!0,Z)},function(){z.copy(R.selected,!1,Z)},function(){z.cut(R.selected,!0,!0,Z)},function(){z.cut(R.selected,!1,!0,Z)}];return z.buffer.length&&(s.push("Paste (above)","Paste (below)","Paste (as subtask)"),i.push((function(){z.paste(t.supertaskList,t.supertaskList.getTaskIdx(t))}),(function(){z.paste(task.supertaskList,t.supertaskList.getTaskIdx(t)+1)}),(function(){z.paste(t.subtaskList)}))),s.push("Delete (with subtasks)","Delete (without subtasks)"),i.push((function(){z.remove(R.selected,!0,!0)}),(function(){z.remove(R.selected,!1,!0)})),new E(s,i,e)};return{selected:t,add:e,addExclusive:function(t){s(),t.selected=!0,e(t)},remove:function(e){let s=t.indexOf(e);return s>=0&&(t.splice(s,1),e.selected=!1,b(e.id),!0)},clear:s,contains:i,updateSelection:n,triggerMenu:function(e,s,i,o){let a=Z.getTaskById(v(e,s),!0);a&&!t.includes(a)&&n(a);let d=null;if(o&&(d=["touch-menu"]),a&&R.selected.length)var u=r(a,d);else u=function(t){f();let e=["New task"],s=[function(){Z.createTask(Z.tasks.length,!0)}];return z.buffer.length&&(e.push("Paste"),s.push((function(){z.paste(Z,Z.tasks.length)}))),new E(e,s,t)}(d);document.querySelector("body").appendChild(u.svg),u.buttonDown(e,s)}}}(),Y=function(){let t=function(t,e){e.progressCheck.addEventListener("change",(t=>{S(e.progressCheck,e.progressField)})),e.confirm.addEventListener("click",(s=>{t.currentlyEditing=!1,F.currentlyEditing=!1,t.title=e.titleInput.value,t.dueDateStr=e.dateInput.value,t.dueTimeStr=e.timeInput.value,t.updateDue(),t.description=e.descInput.value,t.priority=w(e.priorityField),t.useProgressFromSubtasks=e.progressCheck.checked,t.useProgressFromSubtasks?t.progress=t.getProgressRecursive():t.progress=w(e.progressField),t.notes=e.notesInput.value,e.cardInput.remove(),k(),e.card.classList.remove("editing"),t.supertaskList.writeRootToLocalStorage(),t.refreshDom(!1)})),e.cancel.addEventListener("click",(s=>{t.currentlyEditing=!1,F.currentlyEditing=!1,e.cardInput.remove(),e.card.classList.remove("editing"),k()}))};return{addLeftClick:function(){document.addEventListener("click",(t=>{let e=Z.getTaskById(v(t.clientX,t.clientY),!0),s=document.elementsFromPoint(t.clientX,t.clientY);if(!F.currentlyEditing&&!t.target.classList.contains("input-button"))if(e)R.updateSelection(e);else{let t=!0;for(let e of s)if(e.classList.contains("task-expand-img")||e.classList.contains("subtasks-plus-img")){t=!1;break}t&&R.clear()}})),document.addEventListener("mouseup",(t=>{0!=t.button||F.currentlyEditing||k()})),document.addEventListener("touchstart",(t=>{F.touch.time.splice(0,1),F.touch.time.push((new Date).getTime()),F.touch.pos.splice(0,1),F.touch.pos.push({x:t.touches[0].clientX,y:t.touches[0].clientY}),F.touch.time[0]&&F.touch.time[1]-F.touch.time[0]<300&&Math.abs(F.touch.pos[1].x-F.touch.pos[0].x)<40&&Math.abs(F.touch.pos[1].y-F.touch.pos[0].y)<40&&R.triggerMenu(F.touch.pos[1].x,F.touch.pos[1].y,F.selectionAddTo,!0),F.touch.touchedId.splice(0,1),F.touch.touchedId.push(v(t.touches[0].clientX,t.touches[0].clientY)),console.log("Set last touched to "+F.touch.touchedId)}))},addRightClick:function(){document.addEventListener("contextmenu",(t=>{t.preventDefault()})),document.addEventListener("mousedown",(t=>{2!=t.button||F.currentlyEditing||R.triggerMenu(t.clientX,t.clientY,F.selectionAddTo)}))},addModifierKeys:function(){document.addEventListener("keydown",(t=>{F.setSelectionAddTo.bind(F,!0,t)(),F.setSelectionMass.bind(F,!0,t)()})),document.addEventListener("keyup",(t=>{F.setSelectionAddTo.bind(F,!1,t)(),F.setSelectionMass.bind(F,!1,t)()}))},addClearData:function(){document.querySelector(".clear-data").addEventListener("click",(t=>{F.currentlyEditing||confirm("This will delete all saved data. Continue?")&&(Z.clear(),Z.clearLocalStorage())}))},addExpandSubtasks:function(t,e,s){t.addEventListener("click",(t=>{F.currentlyEditing||(e.subtaskList.expanded=!e.subtaskList.expanded,p(e.subtaskList.expanded,s,e,F.selectionAddTo))}))},addExpandTask:function(t,e,s,i,n){t.addEventListener("click",(t=>{F.currentlyEditing||(e.expanded=!e.expanded,g(i,s,e))})),n.addEventListener("mouseover",(t=>{let e=document.elementsFromPoint(t.clientX,t.clientY);for(let t of e)if(t.classList.contains("task-expand-img"))return n.classList.remove("hover-possible"),!1;return n.classList.add("hover-possible"),!0}))},addOpenEdit:function(e,s){e.addEventListener("click",(e=>{if(!F.currentlyEditing)if("touch"==e.pointerType){if(s.selected&&F.touch.touchedId[0]==s.id){s.currentlyEditing=!0,F.currentlyEditing=!0;let e=L(s);t(s,e)}}else{s.currentlyEditing=!0,F.currentlyEditing=!0;let e=L(s);t(s,e)}}))},addInputCard:t}}(),Z=new P;Z.restoreFromLocalStorage(),Y.addLeftClick(),Y.addRightClick(),Y.addModifierKeys(),Y.addClearData()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNIclMsRUFBTWtOLGtCQUFtQixFQUN6QmtGLEVBQWFsRixrQkFBbUIsRUFDaEMsSUFBSW1GLEVBQVcsRUFBbUJyUyxHQUNsQ3NTLEVBQWF0UyxFQUFPcVMsRUFDeEIsQ0FDSixHQUVSLEVBb0RJQyxlQUVQLENBek5jLEdBMk5YOEQsRUFBVyxJQUFJcEksRUFDbkJvSSxFQUFTdEMsMEJBRVQ3QyxFQUFTa0csZUFDVGxHLEVBQVN1RyxnQkFDVHZHLEVBQVN5RyxrQkFDVHpHLEVBQVMyRyxjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHVlbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlZm9ybWF0L2xpYi9kYXRlZm9ybWF0LmpzIiwid2VicGFjazovL2R1ZWxpc3QvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2R1ZWxpc3QvLi9zcmMvcmlnaHQtY2xpY2stbWVudS5qcyIsIndlYnBhY2s6Ly9kdWVsaXN0Ly4vc3JjL3N0b3JhZ2UtYXZhaWxhYmxlLmpzIiwid2VicGFjazovL2R1ZWxpc3QvLi9zcmMvc2NyaXB0LmpzIiwid2VicGFjazovL2R1ZWxpc3QvLi9zcmMvdGltZXpvbmUtc3RyaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0b2tlbj0vZHsxLDR9fER7Myw0fXxtezEsNH18eXkoPzp5eSk/fChbSGhNc1R0XSlcXDE/fFd7MSwyfXxbTGxvcFNaTl18XCJbXlwiXSpcInwnW14nXSonL2c7dmFyIHRpbWV6b25lPS9cXGIoPzpbQS1aXXsxLDN9W0EtWl1bVENdKSg/OlstK11cXGR7NH0pP3woKD86QXVzdHJhbGlhbiApPyg/OlBhY2lmaWN8TW91bnRhaW58Q2VudHJhbHxFYXN0ZXJufEF0bGFudGljKSAoPzpTdGFuZGFyZHxEYXlsaWdodHxQcmV2YWlsaW5nKSBUaW1lKVxcYi9nO3ZhciB0aW1lem9uZUNsaXA9L1teLStcXGRBLVpdL2c7ZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGF0ZUZvcm1hdChkYXRlLG1hc2ssdXRjLGdtdCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEmJnR5cGVvZiBkYXRlPT09XCJzdHJpbmdcIiYmIS9cXGQvLnRlc3QoZGF0ZSkpe21hc2s9ZGF0ZTtkYXRlPXVuZGVmaW5lZH1kYXRlPWRhdGV8fGRhdGU9PT0wP2RhdGU6bmV3IERhdGU7aWYoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpe2RhdGU9bmV3IERhdGUoZGF0ZSl9aWYoaXNOYU4oZGF0ZSkpe3Rocm93IFR5cGVFcnJvcihcIkludmFsaWQgZGF0ZVwiKX1tYXNrPVN0cmluZyhtYXNrc1ttYXNrXXx8bWFza3x8bWFza3NbXCJkZWZhdWx0XCJdKTt2YXIgbWFza1NsaWNlPW1hc2suc2xpY2UoMCw0KTtpZihtYXNrU2xpY2U9PT1cIlVUQzpcInx8bWFza1NsaWNlPT09XCJHTVQ6XCIpe21hc2s9bWFzay5zbGljZSg0KTt1dGM9dHJ1ZTtpZihtYXNrU2xpY2U9PT1cIkdNVDpcIil7Z210PXRydWV9fXZhciBfPWZ1bmN0aW9uIF8oKXtyZXR1cm4gdXRjP1wiZ2V0VVRDXCI6XCJnZXRcIn07dmFyIF9kPWZ1bmN0aW9uIGQoKXtyZXR1cm4gZGF0ZVtfKCkrXCJEYXRlXCJdKCl9O3ZhciBEPWZ1bmN0aW9uIEQoKXtyZXR1cm4gZGF0ZVtfKCkrXCJEYXlcIl0oKX07dmFyIF9tPWZ1bmN0aW9uIG0oKXtyZXR1cm4gZGF0ZVtfKCkrXCJNb250aFwiXSgpfTt2YXIgeT1mdW5jdGlvbiB5KCl7cmV0dXJuIGRhdGVbXygpK1wiRnVsbFllYXJcIl0oKX07dmFyIF9IPWZ1bmN0aW9uIEgoKXtyZXR1cm4gZGF0ZVtfKCkrXCJIb3Vyc1wiXSgpfTt2YXIgX009ZnVuY3Rpb24gTSgpe3JldHVybiBkYXRlW18oKStcIk1pbnV0ZXNcIl0oKX07dmFyIF9zPWZ1bmN0aW9uIHMoKXtyZXR1cm4gZGF0ZVtfKCkrXCJTZWNvbmRzXCJdKCl9O3ZhciBfTD1mdW5jdGlvbiBMKCl7cmV0dXJuIGRhdGVbXygpK1wiTWlsbGlzZWNvbmRzXCJdKCl9O3ZhciBfbz1mdW5jdGlvbiBvKCl7cmV0dXJuIHV0Yz8wOmRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKX07dmFyIF9XPWZ1bmN0aW9uIFcoKXtyZXR1cm4gZ2V0V2VlayhkYXRlKX07dmFyIF9OPWZ1bmN0aW9uIE4oKXtyZXR1cm4gZ2V0RGF5T2ZXZWVrKGRhdGUpfTt2YXIgZmxhZ3M9e2Q6ZnVuY3Rpb24gZCgpe3JldHVybiBfZCgpfSxkZDpmdW5jdGlvbiBkZCgpe3JldHVybiBwYWQoX2QoKSl9LGRkZDpmdW5jdGlvbiBkZGQoKXtyZXR1cm4gaTE4bi5kYXlOYW1lc1tEKCldfSxEREQ6ZnVuY3Rpb24gREREKCl7cmV0dXJuIGdldERheU5hbWUoe3k6eSgpLG06X20oKSxkOl9kKCksXzpfKCksZGF5TmFtZTppMThuLmRheU5hbWVzW0QoKV0sc2hvcnQ6dHJ1ZX0pfSxkZGRkOmZ1bmN0aW9uIGRkZGQoKXtyZXR1cm4gaTE4bi5kYXlOYW1lc1tEKCkrN119LEREREQ6ZnVuY3Rpb24gRERERCgpe3JldHVybiBnZXREYXlOYW1lKHt5OnkoKSxtOl9tKCksZDpfZCgpLF86XygpLGRheU5hbWU6aTE4bi5kYXlOYW1lc1tEKCkrN119KX0sbTpmdW5jdGlvbiBtKCl7cmV0dXJuIF9tKCkrMX0sbW06ZnVuY3Rpb24gbW0oKXtyZXR1cm4gcGFkKF9tKCkrMSl9LG1tbTpmdW5jdGlvbiBtbW0oKXtyZXR1cm4gaTE4bi5tb250aE5hbWVzW19tKCldfSxtbW1tOmZ1bmN0aW9uIG1tbW0oKXtyZXR1cm4gaTE4bi5tb250aE5hbWVzW19tKCkrMTJdfSx5eTpmdW5jdGlvbiB5eSgpe3JldHVybiBTdHJpbmcoeSgpKS5zbGljZSgyKX0seXl5eTpmdW5jdGlvbiB5eXl5KCl7cmV0dXJuIHBhZCh5KCksNCl9LGg6ZnVuY3Rpb24gaCgpe3JldHVybiBfSCgpJTEyfHwxMn0saGg6ZnVuY3Rpb24gaGgoKXtyZXR1cm4gcGFkKF9IKCklMTJ8fDEyKX0sSDpmdW5jdGlvbiBIKCl7cmV0dXJuIF9IKCl9LEhIOmZ1bmN0aW9uIEhIKCl7cmV0dXJuIHBhZChfSCgpKX0sTTpmdW5jdGlvbiBNKCl7cmV0dXJuIF9NKCl9LE1NOmZ1bmN0aW9uIE1NKCl7cmV0dXJuIHBhZChfTSgpKX0sczpmdW5jdGlvbiBzKCl7cmV0dXJuIF9zKCl9LHNzOmZ1bmN0aW9uIHNzKCl7cmV0dXJuIHBhZChfcygpKX0sbDpmdW5jdGlvbiBsKCl7cmV0dXJuIHBhZChfTCgpLDMpfSxMOmZ1bmN0aW9uIEwoKXtyZXR1cm4gcGFkKE1hdGguZmxvb3IoX0woKS8xMCkpfSx0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gX0goKTwxMj9pMThuLnRpbWVOYW1lc1swXTppMThuLnRpbWVOYW1lc1sxXX0sdHQ6ZnVuY3Rpb24gdHQoKXtyZXR1cm4gX0goKTwxMj9pMThuLnRpbWVOYW1lc1syXTppMThuLnRpbWVOYW1lc1szXX0sVDpmdW5jdGlvbiBUKCl7cmV0dXJuIF9IKCk8MTI/aTE4bi50aW1lTmFtZXNbNF06aTE4bi50aW1lTmFtZXNbNV19LFRUOmZ1bmN0aW9uIFRUKCl7cmV0dXJuIF9IKCk8MTI/aTE4bi50aW1lTmFtZXNbNl06aTE4bi50aW1lTmFtZXNbN119LFo6ZnVuY3Rpb24gWigpe3JldHVybiBnbXQ/XCJHTVRcIjp1dGM/XCJVVENcIjpmb3JtYXRUaW1lem9uZShkYXRlKX0sbzpmdW5jdGlvbiBvKCl7cmV0dXJuKF9vKCk+MD9cIi1cIjpcIitcIikrcGFkKE1hdGguZmxvb3IoTWF0aC5hYnMoX28oKSkvNjApKjEwMCtNYXRoLmFicyhfbygpKSU2MCw0KX0scDpmdW5jdGlvbiBwKCl7cmV0dXJuKF9vKCk+MD9cIi1cIjpcIitcIikrcGFkKE1hdGguZmxvb3IoTWF0aC5hYnMoX28oKSkvNjApLDIpK1wiOlwiK3BhZChNYXRoLmZsb29yKE1hdGguYWJzKF9vKCkpJTYwKSwyKX0sUzpmdW5jdGlvbiBTKCl7cmV0dXJuW1widGhcIixcInN0XCIsXCJuZFwiLFwicmRcIl1bX2QoKSUxMD4zPzA6KF9kKCklMTAwLV9kKCklMTAhPTEwKSpfZCgpJTEwXX0sVzpmdW5jdGlvbiBXKCl7cmV0dXJuIF9XKCl9LFdXOmZ1bmN0aW9uIFdXKCl7cmV0dXJuIHBhZChfVygpKX0sTjpmdW5jdGlvbiBOKCl7cmV0dXJuIF9OKCl9fTtyZXR1cm4gbWFzay5yZXBsYWNlKHRva2VuLGZ1bmN0aW9uKG1hdGNoKXtpZihtYXRjaCBpbiBmbGFncyl7cmV0dXJuIGZsYWdzW21hdGNoXSgpfXJldHVybiBtYXRjaC5zbGljZSgxLG1hdGNoLmxlbmd0aC0xKX0pfWV4cG9ydCB2YXIgbWFza3M9e2RlZmF1bHQ6XCJkZGQgbW1tIGRkIHl5eXkgSEg6TU06c3NcIixzaG9ydERhdGU6XCJtL2QveXlcIixwYWRkZWRTaG9ydERhdGU6XCJtbS9kZC95eXl5XCIsbWVkaXVtRGF0ZTpcIm1tbSBkLCB5eXl5XCIsbG9uZ0RhdGU6XCJtbW1tIGQsIHl5eXlcIixmdWxsRGF0ZTpcImRkZGQsIG1tbW0gZCwgeXl5eVwiLHNob3J0VGltZTpcImg6TU0gVFRcIixtZWRpdW1UaW1lOlwiaDpNTTpzcyBUVFwiLGxvbmdUaW1lOlwiaDpNTTpzcyBUVCBaXCIsaXNvRGF0ZTpcInl5eXktbW0tZGRcIixpc29UaW1lOlwiSEg6TU06c3NcIixpc29EYXRlVGltZTpcInl5eXktbW0tZGQnVCdISDpNTTpzc29cIixpc29VdGNEYXRlVGltZTpcIlVUQzp5eXl5LW1tLWRkJ1QnSEg6TU06c3MnWidcIixleHBpcmVzSGVhZGVyRm9ybWF0OlwiZGRkLCBkZCBtbW0geXl5eSBISDpNTTpzcyBaXCJ9O2V4cG9ydCB2YXIgaTE4bj17ZGF5TmFtZXM6W1wiU3VuXCIsXCJNb25cIixcIlR1ZVwiLFwiV2VkXCIsXCJUaHVcIixcIkZyaVwiLFwiU2F0XCIsXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSxtb250aE5hbWVzOltcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIixcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSx0aW1lTmFtZXM6W1wiYVwiLFwicFwiLFwiYW1cIixcInBtXCIsXCJBXCIsXCJQXCIsXCJBTVwiLFwiUE1cIl19O3ZhciBwYWQ9ZnVuY3Rpb24gcGFkKHZhbCl7dmFyIGxlbj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06MjtyZXR1cm4gU3RyaW5nKHZhbCkucGFkU3RhcnQobGVuLFwiMFwiKX07dmFyIGdldERheU5hbWU9ZnVuY3Rpb24gZ2V0RGF5TmFtZShfcmVmKXt2YXIgeT1fcmVmLnksbT1fcmVmLm0sZD1fcmVmLmQsXz1fcmVmLl8sZGF5TmFtZT1fcmVmLmRheU5hbWUsX3JlZiRzaG9ydD1fcmVmW1wic2hvcnRcIl0sX3Nob3J0PV9yZWYkc2hvcnQ9PT12b2lkIDA/ZmFsc2U6X3JlZiRzaG9ydDt2YXIgdG9kYXk9bmV3IERhdGU7dmFyIHllc3RlcmRheT1uZXcgRGF0ZTt5ZXN0ZXJkYXkuc2V0RGF0ZSh5ZXN0ZXJkYXlbXytcIkRhdGVcIl0oKS0xKTt2YXIgdG9tb3Jyb3c9bmV3IERhdGU7dG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvd1tfK1wiRGF0ZVwiXSgpKzEpO3ZhciB0b2RheV9kPWZ1bmN0aW9uIHRvZGF5X2QoKXtyZXR1cm4gdG9kYXlbXytcIkRhdGVcIl0oKX07dmFyIHRvZGF5X209ZnVuY3Rpb24gdG9kYXlfbSgpe3JldHVybiB0b2RheVtfK1wiTW9udGhcIl0oKX07dmFyIHRvZGF5X3k9ZnVuY3Rpb24gdG9kYXlfeSgpe3JldHVybiB0b2RheVtfK1wiRnVsbFllYXJcIl0oKX07dmFyIHllc3RlcmRheV9kPWZ1bmN0aW9uIHllc3RlcmRheV9kKCl7cmV0dXJuIHllc3RlcmRheVtfK1wiRGF0ZVwiXSgpfTt2YXIgeWVzdGVyZGF5X209ZnVuY3Rpb24geWVzdGVyZGF5X20oKXtyZXR1cm4geWVzdGVyZGF5W18rXCJNb250aFwiXSgpfTt2YXIgeWVzdGVyZGF5X3k9ZnVuY3Rpb24geWVzdGVyZGF5X3koKXtyZXR1cm4geWVzdGVyZGF5W18rXCJGdWxsWWVhclwiXSgpfTt2YXIgdG9tb3Jyb3dfZD1mdW5jdGlvbiB0b21vcnJvd19kKCl7cmV0dXJuIHRvbW9ycm93W18rXCJEYXRlXCJdKCl9O3ZhciB0b21vcnJvd19tPWZ1bmN0aW9uIHRvbW9ycm93X20oKXtyZXR1cm4gdG9tb3Jyb3dbXytcIk1vbnRoXCJdKCl9O3ZhciB0b21vcnJvd195PWZ1bmN0aW9uIHRvbW9ycm93X3koKXtyZXR1cm4gdG9tb3Jyb3dbXytcIkZ1bGxZZWFyXCJdKCl9O2lmKHRvZGF5X3koKT09PXkmJnRvZGF5X20oKT09PW0mJnRvZGF5X2QoKT09PWQpe3JldHVybiBfc2hvcnQ/XCJUZHlcIjpcIlRvZGF5XCJ9ZWxzZSBpZih5ZXN0ZXJkYXlfeSgpPT09eSYmeWVzdGVyZGF5X20oKT09PW0mJnllc3RlcmRheV9kKCk9PT1kKXtyZXR1cm4gX3Nob3J0P1wiWXNkXCI6XCJZZXN0ZXJkYXlcIn1lbHNlIGlmKHRvbW9ycm93X3koKT09PXkmJnRvbW9ycm93X20oKT09PW0mJnRvbW9ycm93X2QoKT09PWQpe3JldHVybiBfc2hvcnQ/XCJUbXdcIjpcIlRvbW9ycm93XCJ9cmV0dXJuIGRheU5hbWV9O3ZhciBnZXRXZWVrPWZ1bmN0aW9uIGdldFdlZWsoZGF0ZSl7dmFyIHRhcmdldFRodXJzZGF5PW5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkpO3RhcmdldFRodXJzZGF5LnNldERhdGUodGFyZ2V0VGh1cnNkYXkuZ2V0RGF0ZSgpLSh0YXJnZXRUaHVyc2RheS5nZXREYXkoKSs2KSU3KzMpO3ZhciBmaXJzdFRodXJzZGF5PW5ldyBEYXRlKHRhcmdldFRodXJzZGF5LmdldEZ1bGxZZWFyKCksMCw0KTtmaXJzdFRodXJzZGF5LnNldERhdGUoZmlyc3RUaHVyc2RheS5nZXREYXRlKCktKGZpcnN0VGh1cnNkYXkuZ2V0RGF5KCkrNiklNyszKTt2YXIgZHM9dGFyZ2V0VGh1cnNkYXkuZ2V0VGltZXpvbmVPZmZzZXQoKS1maXJzdFRodXJzZGF5LmdldFRpbWV6b25lT2Zmc2V0KCk7dGFyZ2V0VGh1cnNkYXkuc2V0SG91cnModGFyZ2V0VGh1cnNkYXkuZ2V0SG91cnMoKS1kcyk7dmFyIHdlZWtEaWZmPSh0YXJnZXRUaHVyc2RheS1maXJzdFRodXJzZGF5KS8oODY0ZTUqNyk7cmV0dXJuIDErTWF0aC5mbG9vcih3ZWVrRGlmZil9O3ZhciBnZXREYXlPZldlZWs9ZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrKGRhdGUpe3ZhciBkb3c9ZGF0ZS5nZXREYXkoKTtpZihkb3c9PT0wKXtkb3c9N31yZXR1cm4gZG93fTtleHBvcnQgdmFyIGZvcm1hdFRpbWV6b25lPWZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKGRhdGUpe3JldHVybihTdHJpbmcoZGF0ZSkubWF0Y2godGltZXpvbmUpfHxbXCJcIl0pLnBvcCgpLnJlcGxhY2UodGltZXpvbmVDbGlwLFwiXCIpLnJlcGxhY2UoL0dNVFxcKzAwMDAvZyxcIlVUQ1wiKX07IiwiaW1wb3J0IGRhdGVGb3JtYXQsIHsgbWFza3MgfSBmcm9tIFwiZGF0ZWZvcm1hdFwiO1xuXG5jb25zdCB0YXNrQmluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWJpblwiKTtcbmNvbnN0IHByaW9yaXR5TGlzdCA9IFsgXCJOL0FcIiwgXCJVbmltcG9ydGFudFwiLCBcIkltcG9ydGFudFwiLCBcIlVyZ2VudFwiIF07XG5jb25zdCBwcm9ncmVzc0xpc3QgPSBbIFwiTi9BXCIsIFwiTm90IHN0YXJ0ZWRcIiwgXCJJbiBwcm9ncmVzc1wiLCBcIkNvbXBsZXRlXCIgXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoX3Rhc2spIHtcbiAgICBsZXQgc3VwZXJ0YXNrRGl2ID0gbnVsbDtcbiAgICBsZXQgc3VwZXJ0YXNrID0gX3Rhc2suc3VwZXJ0YXNrO1xuICAgIGxldCBuZWlnaGJvcklkeCA9IC0xO1xuXG4gICAgaWYgKF90YXNrLnN1cGVydGFza0xpc3QpIHtcbiAgICAgICAgbmVpZ2hib3JJZHggPSBfdGFzay5zdXBlcnRhc2tMaXN0LmdldFRhc2tJZHgoX3Rhc2spICsgMTtcbiAgICB9XG4gICAgXG4gICAgbGV0IG5laWdoYm9ySWQgPSAtMTtcbiAgICBsZXQgbmVpZ2hib3JEaXYgPSBudWxsO1xuXG4gICAgaWYgKG5laWdoYm9ySWR4ID4gMCAmJiBuZWlnaGJvcklkeCA8IF90YXNrLnN1cGVydGFza0xpc3QudGFza3MubGVuZ3RoKSB7XG4gICAgICAgIG5laWdoYm9ySWQgPSBfdGFzay5zdXBlcnRhc2tMaXN0LnRhc2tzW25laWdoYm9ySWR4XS5pZDtcbiAgICAgICAgbmVpZ2hib3JEaXYgPSB0YXNrQmluLnF1ZXJ5U2VsZWN0b3IoYC50YXNrLmlkLSR7bmVpZ2hib3JJZH1gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHN1cGVydGFzaykge1xuICAgICAgICBzdXBlcnRhc2tEaXYgPSB0YXNrQmluLnF1ZXJ5U2VsZWN0b3IoYC5zdWJ0YXNrcy5pZC0ke3N1cGVydGFzay5pZH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdXBlcnRhc2tEaXYgPSB0YXNrQmluO1xuICAgIH1cblxuICAgIGxldCBpbmRlbnRTdHIgPSBgbWFyZ2luLWxlZnQ6IGNhbGMoY2FsYyh2YXIoLS1jYXJkLWluZGVudCkgKiAke190YXNrLmRlcHRofSkgKyBjYWxjKHZhcigtLWNhcmQtbWFyZ2luKSAqIDAuNSkpYDtcbiAgICBsZXQgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwidGFza1wiLCBgaWQtJHtfdGFzay5pZH1gKTtcbiAgICBjYXJkLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGluZGVudFN0cik7XG5cbiAgICBpZiAoX3Rhc2suc2VsZWN0ZWQpIHtcbiAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKG5laWdoYm9yRGl2KSB7XG4gICAgICAgIG5laWdoYm9yRGl2Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWJlZ2luXCIsIGNhcmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN1cGVydGFza0Rpdi5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICB9XG5cbiAgICBsZXQgaERpdiA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcImNhcmQtaGVhZGVyLWRpdlwiLCBjYXJkKTtcbiAgICBsZXQgdGl0bGVDb250YWluZXIgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLXRpdGxlLWNvbnRhaW5lclwiLCBoRGl2KTtcblxuICAgIGlmIChfdGFzay5wcmlvcml0eSkge1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVQcmlvcml0eVN2ZyhfdGFzay5wcmlvcml0eSkpO1xuICAgIH1cblxuICAgIGlmIChfdGFzay5wcm9ncmVzcykge1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVQcm9ncmVzc1N2ZyhfdGFzay5wcm9ncmVzcykpO1xuICAgIH1cblxuICAgIGxldCBoMiA9IGNyZWF0ZUFwcGVuZChcImgyXCIsIFsgXCJjYXJkLXRpdGxlXCIsIFwiY2FyZC1lZGl0YWJsZVwiIF0sIFxuICAgICAgICB0aXRsZUNvbnRhaW5lciwgX3Rhc2sudGl0bGUpO1xuICAgIGxldCBlZGl0U3ZnID0gY3JlYXRlQXBwZW5kKFxuICAgICAgICBjcmVhdGVTdmcoXCJNMTIsMkM2LjQ3LDIgMiw2LjQ3IDIsMTJDMiwxNy41MyA2LjQ3LDIyIDEyLDIyQzE3LjUzLDIyIDIyLDE3LjUzIDIyLDEyQzIyLDYuNDcgMTcuNTMsMiAxMiwyTTE1LjEsNy4wN0MxNS4yNCw3LjA3IDE1LjM4LDcuMTIgMTUuNSw3LjIzTDE2Ljc3LDguNUMxNyw4LjcyIDE3LDkuMDcgMTYuNzcsOS4yOEwxNS43NywxMC4yOEwxMy43Miw4LjIzTDE0LjcyLDcuMjNDMTQuODIsNy4xMiAxNC45Niw3LjA3IDE1LjEsNy4wN00xMy4xMyw4LjgxTDE1LjE5LDEwLjg3TDkuMTMsMTYuOTNINy4wN1YxNC44N0wxMy4xMyw4LjgxWlwiLCBcbiAgICAgICAgICAgIFwiRWRpdCB0YXNrXCIsIHRydWUpLFxuICAgICAgICBcImVkaXQtdGFzay1pbWdcIixcbiAgICAgICAgaERpdlxuICAgIClcblxuICAgIGlmIChfdGFzay5kdWVEYXRlKSB7XG4gICAgICAgIGxldCBkdWVEYXRlID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFsgXCJjYXJkLWR1ZS1kYXRlXCIsIFwiY2FyZC1lZGl0YWJsZVwiIF0sXG4gICAgICAgICAgICBoRGl2LCBgJHtkYXRlRm9ybWF0KF90YXNrLmR1ZURhdGUsIFwiZGRkZCwgbW1tbSBkUywgeXl5eVwiKX1gKTtcbiAgICB9XG5cbiAgICBpZiAoX3Rhc2suZHVlVGltZSkge1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBbIFwiY2FyZC1kdWUtdGltZVwiLCBcImNhcmQtZWRpdGFibGVcIiBdLFxuICAgICAgICAgICAgaERpdiwgYCR7ZGF0ZUZvcm1hdChfdGFzay5kdWVUaW1lLCBcImg6TU0gVFRcIil9YCk7XG4gICAgfVxuXG4gICAgbGV0IHRhc2tFeHBhbmRTdmcgPSBjcmVhdGVBcHBlbmQoXG4gICAgICAgIGNyZWF0ZVN2ZyhcIlwiLCBcIkV4cGFuZFwiLCB0cnVlKSxcbiAgICAgICAgXCJ0YXNrLWV4cGFuZC1pbWdcIixcbiAgICAgICAgaERpdlxuICAgICk7XG5cbiAgICBpZiAoIV90YXNrLmhhc0NvbnRlbnQoKSkge1xuICAgICAgICB0YXNrRXhwYW5kU3ZnLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgfVxuXG4gICAgbGV0IHRhc2tFeHBhbmRQYXRoID0gdGFza0V4cGFuZFN2Zy5xdWVyeVNlbGVjdG9yKFwicGF0aDpub3QoLmJnLWltZylcIik7XG4gICAgdXBkYXRlVGFza0V4cGFuZFZpZXcodGFza0V4cGFuZFBhdGgsIGNhcmQsIF90YXNrKTtcblxuICAgIGlmIChfdGFzay5wcmlvcml0eSA+IDAgfHwgX3Rhc2sucHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAgIGxldCBpbmZvQ29udGFpbmVyID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwiaW5mby1jb250YWluZXJcIiwgY2FyZCk7XG5cbiAgICAgICAgaWYgKF90YXNrLnByaW9yaXR5ID4gMCkge1xuICAgICAgICAgICAgbGV0IHByaW9yaXR5Q29udGFpbmVyID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwiY2FyZC1jb250YWluZXJcIiwgXG4gICAgICAgICAgICAgICAgaW5mb0NvbnRhaW5lcik7XG4gICAgICAgICAgICBsZXQgcHJpb3JpdHlMYWJlbCA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcImNhcmQtbGFiZWxcIiwgXG4gICAgICAgICAgICAgICAgcHJpb3JpdHlDb250YWluZXIsIFwiUHJpb3JpdHlcIik7XG4gICAgICAgICAgICBsZXQgcHJpb3JpdHkgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXG4gICAgICAgICAgICAgICAgWyBcImNhcmQtcHJpb3JpdHlcIiwgXCJjYXJkLWVkaXRhYmxlXCIgXSwgcHJpb3JpdHlDb250YWluZXIsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHlMaXN0W190YXNrLnByaW9yaXR5XSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgaWYgKF90YXNrLnByb2dyZXNzID4gMCB8fCBfdGFzay51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcykge1xuICAgICAgICAgICAgbGV0IHByb2dyZXNzQ29udGFpbmVyID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwiY2FyZC1jb250YWluZXJcIiwgXG4gICAgICAgICAgICAgICAgaW5mb0NvbnRhaW5lcik7XG4gICAgICAgICAgICBsZXQgcHJvZ3Jlc3NMYWJlbCA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcImNhcmQtbGFiZWxcIiwgXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIsIFwiUHJvZ3Jlc3NcIik7XG4gICAgICAgICAgICBsZXQgcHJvZyA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcbiAgICAgICAgICAgICAgICBbIFwiY2FyZC1wcm9ncmVzc1wiLCBcImNhcmQtZWRpdGFibGVcIiBdLCBwcm9ncmVzc0NvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0xpc3RbX3Rhc2sucHJvZ3Jlc3NdKTtcblxuICAgICAgICAgICAgaWYgKF90YXNrLnVzZVByb2dyZXNzRnJvbVN1YnRhc2tzKSB7XG4gICAgICAgICAgICAgICAgcHJvZy50ZXh0Q29udGVudCArPSBcIiAoZnJvbSBzdWJ0YXNrcylcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChfdGFzay5kZXNjcmlwdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgbGV0IGRlc2NDb250YWluZXIgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLWNvbnRhaW5lclwiLCBjYXJkKTtcbiAgICAgICAgbGV0IGRlc2MgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgWyBcImNhcmQtZGVzY3JpcHRpb25cIiwgXCJjYXJkLWNvbnRlbnRcIiwgXG4gICAgICAgICAgICBcImNhcmQtZWRpdGFibGVcIiBdLCBkZXNjQ29udGFpbmVyLCBfdGFzay5kZXNjcmlwdGlvbik7XG4gICAgICAgIGxldCBkZXNjTGFiZWwgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLWxhYmVsXCIsIGRlc2NDb250YWluZXIsIFwiQWJvdXRcIik7XG4gICAgfVxuXG4gICAgaWYgKF90YXNrLm5vdGVzLmxlbmd0aCkge1xuICAgICAgICBsZXQgbm90ZXNDb250YWluZXIgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLWNvbnRhaW5lclwiLCBjYXJkKTtcbiAgICAgICAgbGV0IG5vdGVzID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFsgXCJjYXJkLW5vdGVzXCIsIFwiY2FyZC1jb250ZW50XCIsIFxuICAgICAgICAgICAgXCJjYXJkLWVkaXRhYmxlXCIgXSwgbm90ZXNDb250YWluZXIsIF90YXNrLm5vdGVzKTtcbiAgICAgICAgbGV0IG5vdGVzTGFiZWwgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLWxhYmVsXCIsIG5vdGVzQ29udGFpbmVyLCBcIk5vdGVzXCIpO1xuICAgIH1cblxuICAgIGxldCBzdWJ0YXNrcyA9IHRhc2tCaW4ucXVlcnlTZWxlY3RvcihgLnN1YnRhc2tzLmlkLSR7X3Rhc2suaWR9YCk7XG4gICAgbGV0IG5lZWRTdWJ0YXNrc0xpc3RlbmVyID0gZmFsc2U7XG5cbiAgICBpZiAoIXN1YnRhc2tzKSB7XG4gICAgICAgIG5lZWRTdWJ0YXNrc0xpc3RlbmVyID0gdHJ1ZTtcbiAgICAgICAgc3VidGFza3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjYXJkLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHN1YnRhc2tzKTtcbiAgICAgICAgc3VidGFza3MuY2xhc3NMaXN0LmFkZChcInN1YnRhc2tzXCIsIGBpZC0ke190YXNrLmlkfWApO1xuXG4gICAgICAgIHZhciBzdWJ0YXNrc0hlYWRlciA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBbIFwic3VidGFza3MtaGVhZGVyXCIsIFxuICAgICAgICAgICAgYGlkLSR7X3Rhc2suaWR9YCBdLCBzdWJ0YXNrcyk7XG4gICAgICAgIHN1YnRhc2tzSGVhZGVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGluZGVudFN0cik7XG5cbiAgICAgICAgaWYgKCFfdGFzay5zdWJ0YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN1YnRhc2tzSGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJ0YXNrc0hlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN1YnRhc2tzUGx1c1N2ZyA9IGNyZWF0ZUFwcGVuZChcbiAgICAgICAgICAgIGNyZWF0ZVN2ZyhcIlwiLCBcIlN1YnRhc2tzXCIsIHRydWUpLFxuICAgICAgICAgICAgXCJzdWJ0YXNrcy1wbHVzLWltZ1wiLFxuICAgICAgICAgICAgc3VidGFza3NIZWFkZXJcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgc3VidGFza3NQbHVzUGF0aCA9IHN1YnRhc2tzUGx1c1N2Zy5xdWVyeVNlbGVjdG9yKFwicGF0aDpub3QoLmJnLWltZylcIik7XG4gICAgICAgIHNldFN1YnRhc2tFeHBhbmRWaWV3KF90YXNrLnN1YnRhc2tMaXN0LmV4cGFuZGVkLCBzdWJ0YXNrcywgX3Rhc2ssIGZhbHNlKTtcblxuICAgICAgICBsZXQgc3VidGFza3NUZXh0ID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFsgXCJzdWJ0YXNrcy10ZXh0XCIsIFxuICAgICAgICAgICAgYGlkLSR7X3Rhc2suaWR9YCBdLCBzdWJ0YXNrc0hlYWRlciwgYCR7X3Rhc2suc3VidGFza3MubGVuZ3RofSBcbiAgICAgICAgICAgICR7X3Rhc2suc3VidGFza3MubGVuZ3RoID09IDEgPyBcInN1YnRhc2tcIiA6IFwic3VidGFza3NcIn1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdWJ0YXNrcy5yZW1vdmUoKTtcbiAgICAgICAgY2FyZC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBzdWJ0YXNrcyk7XG4gICAgICAgIHZhciBzdWJ0YXNrc0hlYWRlciA9IHN1YnRhc2tzLnF1ZXJ5U2VsZWN0b3IoXCIuc3VidGFza3MtaGVhZGVyXCIpO1xuXG4gICAgICAgIGlmICghX3Rhc2suc3VidGFza3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdWJ0YXNrc0hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VidGFza3NIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdWJ0YXNrc1RleHQgPSBzdWJ0YXNrcy5xdWVyeVNlbGVjdG9yKFwiLnN1YnRhc2tzLXRleHRcIik7XG4gICAgICAgIHN1YnRhc2tzVGV4dC50ZXh0Q29udGVudCA9IGAke190YXNrLnN1YnRhc2tzLmxlbmd0aH0gXG4gICAgICAgICAgICAke190YXNrLnN1YnRhc2tzLmxlbmd0aCA9PSAxID8gXCJzdWJ0YXNrXCIgOiBcInN1YnRhc2tzXCJ9YDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrOiBjYXJkLFxuICAgICAgICBzdWJ0YXNrczogc3VidGFza3MsXG4gICAgICAgIHN1YnRhc2tzRXhwYW5kOiBzdWJ0YXNrc0hlYWRlcixcbiAgICAgICAgbmVlZFN1YnRhc2tzTGlzdGVuZXIsXG4gICAgICAgIHRhc2tFeHBhbmQ6IHRhc2tFeHBhbmRTdmcsXG4gICAgICAgIHRhc2tFeHBhbmRQYXRoOiB0YXNrRXhwYW5kUGF0aCxcbiAgICAgICAgaGVhZGVyOiBoRGl2LFxuICAgICAgICBlZGl0T3BlbjogZWRpdFN2Z1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrRXhwYW5kVmlldyhfc3ZnUGF0aCwgX2NhcmQsIF90YXNrKSB7XG4gICAgZXhwYW5kQ2FyZChfdGFzaywgX2NhcmQpO1xuICAgIFxuICAgIGlmIChfdGFzay5leHBhbmRlZCkge1xuICAgICAgICBfc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTEyLDIyQTEwLDEwIDAgMCwxIDIsMTJBMTAsMTAgMCAwLDEgMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMk0xNywxNEwxMiw5TDcsMTRIMTdaXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIF9zdmdQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMkExMCwxMCAwIDAsMSAyLDEyQTEwLDEwIDAgMCwxIDEyLDJNNywxMEwxMiwxNUwxNywxMEg3WlwiKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdWJ0YXNrRXhwYW5kVmlldyhfZXhwYW5kZWQsIF9jYXJkLCBfdGFzaywgX3JlY3Vyc2l2ZSkge1xuICAgIGxldCBzdWJ0YXNrc1BsdXNQYXRoID0gX2NhcmQucXVlcnlTZWxlY3RvcihcIi5zdWJ0YXNrcy1wbHVzLWltZyA+IHBhdGg6bm90KC5iZy1pbWcpXCIpO1xuICAgIF90YXNrLnN1YnRhc2tMaXN0LmV4cGFuZGVkID0gX2V4cGFuZGVkO1xuICAgIGV4cGFuZENhcmQoX3Rhc2suc3VidGFza0xpc3QsIF9jYXJkKTtcbiAgICBcbiAgICBpZiAoX3Rhc2suc3VidGFza0xpc3QuZXhwYW5kZWQpIHtcbiAgICAgICAgc3VidGFza3NQbHVzUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTE3LDEzSDdWMTFIMTdNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJaXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN1YnRhc2tzUGx1c1BhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0xNywxM0gxM1YxN0gxMVYxM0g3VjExSDExVjdIMTNWMTFIMTdNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJaXCIpO1xuICAgIH1cblxuICAgIGlmIChfcmVjdXJzaXZlKSB7XG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgX3Rhc2suc3VidGFza0xpc3QudGFza3MpIHtcbiAgICAgICAgICAgIGxldCBzdWJjYXJkID0gX2NhcmQucXVlcnlTZWxlY3RvcihgLnN1YnRhc2tzLmlkLSR7dGFzay5pZH1gKTtcbiAgICAgICAgICAgIHNldFN1YnRhc2tFeHBhbmRWaWV3KF9leHBhbmRlZCwgc3ViY2FyZCwgdGFzaywgX3JlY3Vyc2l2ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcmVlemUoKSB7XG4gICAgdGFza0Jpbi5jbGFzc0xpc3QuYWRkKFwiZnJlZXplXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhhdygpIHtcbiAgICB0YXNrQmluLmNsYXNzTGlzdC5yZW1vdmUoXCJmcmVlemVcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3QoX3Rhc2tJZCkge1xuICAgIGxldCBjYXJkID0gdGFza0Jpbi5xdWVyeVNlbGVjdG9yKGAudGFzay5pZC0ke190YXNrSWR9YCk7XG5cbiAgICBpZiAoY2FyZCkge1xuICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNlbGVjdChfdGFza0lkKSB7XG4gICAgbGV0IGNhcmQgPSB0YXNrQmluLnF1ZXJ5U2VsZWN0b3IoYC50YXNrLmlkLSR7X3Rhc2tJZH1gKTtcblxuICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tJZEF0UG9zKF9jbGllbnRYLCBfY2xpZW50WSkge1xuICAgIGxldCB1bmRlck1vdXNlID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoX2NsaWVudFgsIF9jbGllbnRZKTtcbiAgICBsZXQgdGFza0ZvdW5kID0gZmFsc2VcbiAgICBsZXQgaWQgPSAtMTtcblxuICAgIGZvciAobGV0IF9lbGVtIG9mIHVuZGVyTW91c2UpIHtcbiAgICAgICAgLy8gRGlzcmVnYXJkIHBvc2l0aW9ucyB0aGF0IGFsc28gaW50ZXJzZWN0IHRoZSBleHBhbmQgYnV0dG9uLlxuICAgICAgICBpZiAoX2VsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFza1wiKSkge1xuICAgICAgICAgICAgbGV0IGlkUG9zID0gX2VsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJpZC1cIik7XG4gICAgICAgICAgICBsZXQgaWRFbmQgPSBfZWxlbS5jbGFzc05hbWUuaW5kZXhPZihcIiBcIiwgaWRQb3MpO1xuICAgICAgICAgICAgaWYgKGlkRW5kIDwgMCkgaWRFbmQgPSBfZWxlbS5jbGFzc05hbWUubGVuZ3RoO1xuICAgICAgICAgICAgdGFza0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGlkID0gTnVtYmVyKF9lbGVtLmNsYXNzTmFtZS5zbGljZShpZFBvcyArIDMsIGlkRW5kKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2VsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1leHBhbmQtaW1nXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRhc2tGb3VuZCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlucHV0Qm94KF90YXNrKSB7XG4gICAgZnJlZXplKCk7XG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcbiAgICBsZXQgY2FyZCA9IGJvZHkucXVlcnlTZWxlY3RvcihgLnRhc2suaWQtJHtfdGFzay5pZH1gKTtcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJlZGl0aW5nXCIpO1xuICAgIGxldCBjYXJkSW5wdXQgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJjYXJkLWlucHV0XCIsIGJvZHkpO1xuXG4gICAgbGV0IHRpdGxlSW5wdXQgPSBjcmVhdGVJbnB1dChcInRleHRcIiwgbnVsbCwgXCJpbnB1dC10aXRsZVwiLCBfdGFzay50aXRsZSwgXG4gICAgICAgIGNhcmRJbnB1dCwgXCJmaWVsZC1jb250YWluZXJcIiwgXCJUYXNrIG5hbWVcIik7XG4gICAgdGl0bGVJbnB1dC5mb2N1cygpO1xuICAgIHRpdGxlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UodGl0bGVJbnB1dC52YWx1ZS5sZW5ndGgsIHRpdGxlSW5wdXQudmFsdWUubGVuZ3RoKTtcblxuICAgIGxldCBkdWVDb250YWluZXIgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgWyBcImR1ZS1jb250YWluZXJcIiwgXCJpbnB1dC1jb250YWluZXJcIiBdLFxuICAgICAgICBjYXJkSW5wdXQpO1xuICAgIGxldCBkYXRlSW5wdXQgPSBjcmVhdGVJbnB1dChcImRhdGVcIiwgbnVsbCwgXCJpbnB1dC1kYXRlXCIsIF90YXNrLmR1ZURhdGVTdHIsIFxuICAgICAgICBkdWVDb250YWluZXIsIFwiZmllbGQtY29udGFpbmVyXCIsIFwiRHVlIGRhdGVcIik7XG4gICAgbGV0IHRpbWVJbnB1dCA9IGNyZWF0ZUlucHV0KFwidGltZVwiLCBudWxsLCBcImlucHV0LXRpbWVcIiwgX3Rhc2suZHVlVGltZVN0ciwgXG4gICAgICAgIGR1ZUNvbnRhaW5lciwgXCJmaWVsZC1jb250YWluZXJcIiwgXCJEdWUgdGltZVwiKTtcblxuICAgIGxldCBkZXNjSW5wdXQgPSBjcmVhdGVJbnB1dChcInRleHRhcmVhXCIsIG51bGwsIFwiaW5wdXQtZGVzY1wiLCBfdGFzay5kZXNjcmlwdGlvbiwgXG4gICAgICAgIGNhcmRJbnB1dCwgXCJmaWVsZC1jb250YWluZXJcIiwgXCJEZXNjcmlwdGlvblwiKTtcblxuICAgIGxldCByYWRpb0NvbnRhaW5lciA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBbIFwicmFkaW8tY29udGFpbmVyXCIsIFxuICAgICAgICBcImlucHV0LWNvbnRhaW5lclwiIF0sIGNhcmRJbnB1dCk7XG5cbiAgICBsZXQgcHJpb3JpdHlGaWVsZENvbnRhaW5lciA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcImZpZWxkLWNvbnRhaW5lclwiLCBcbiAgICAgICAgcmFkaW9Db250YWluZXIpO1xuICAgIGxldCBwcmlvcml0eUxhYmVsID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwicHNldWRvLWxhYmVsXCIsIHByaW9yaXR5RmllbGRDb250YWluZXIsXG4gICAgICAgIFwiUHJpb3JpdHlcIik7XG4gICAgbGV0IHByaW9yaXR5RmllbGQgPSBjcmVhdGVBcHBlbmQoXG4gICAgICAgIGNyZWF0ZVJhZGlvRmllbGQoXCJwcmlvcml0eS1yYWRpb1wiLCBfdGFzay5wcmlvcml0eSwgcHJpb3JpdHlMaXN0KSxcbiAgICAgICAgbnVsbCwgcHJpb3JpdHlGaWVsZENvbnRhaW5lcik7XG4gICAgc2V0SW5wdXRBdHRyaWJ1dGVzKHByaW9yaXR5RmllbGQsIG51bGwsIFwiaW5wdXQtcHJpb3JpdHlcIik7XG5cbiAgICBsZXQgcHJvZ3Jlc3NGaWVsZENvbnRhaW5lciA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBcImZpZWxkLWNvbnRhaW5lclwiLCBcbiAgICAgICAgcmFkaW9Db250YWluZXIpO1xuICAgIGxldCBwcm9ncmVzc0xhYmVsID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwicHNldWRvLWxhYmVsXCIsIFxuICAgICAgICBwcm9ncmVzc0ZpZWxkQ29udGFpbmVyLCBcIlByb2dyZXNzXCIpO1xuICAgIGxldCBwcm9ncmVzc0ZpZWxkID0gY3JlYXRlQXBwZW5kKFxuICAgICAgICBjcmVhdGVSYWRpb0ZpZWxkKFwicHJvZ3Jlc3MtcmFkaW9cIiwgX3Rhc2sucHJvZ3Jlc3MsIHByb2dyZXNzTGlzdCksXG4gICAgICAgIG51bGwsIHByb2dyZXNzRmllbGRDb250YWluZXIpO1xuICAgIHNldElucHV0QXR0cmlidXRlcyhwcm9ncmVzc0ZpZWxkLCBudWxsLCBcImlucHV0LXByb2dyZXNzXCIpO1xuICAgIGxldCBwcm9ncmVzc0NoZWNrQ29udGFpbmVyID0gY3JlYXRlQXBwZW5kKFwiZGl2XCIsIFwicHJvZ3Jlc3MtY2hlY2stY29udGFpbmVyXCIsXG4gICAgICAgIHByb2dyZXNzRmllbGRDb250YWluZXIpO1xuICAgIGxldCBwcm9ncmVzc0NoZWNrID0gY3JlYXRlQXBwZW5kKFwiaW5wdXRcIiwgbnVsbCwgcHJvZ3Jlc3NDaGVja0NvbnRhaW5lcik7XG4gICAgc2V0SW5wdXRBdHRyaWJ1dGVzKHByb2dyZXNzQ2hlY2ssIFwiY2hlY2tib3hcIiwgXCJwcm9ncmVzcy1jaGVja1wiKTtcblxuICAgIGlmIChfdGFzay51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcykge1xuICAgICAgICBwcm9ncmVzc0NoZWNrLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgXCJjaGVja2VkXCIpO1xuICAgIH1cblxuICAgIGxldCBwcm9ncmVzc0NoZWNrTGFiZWwgPSBjcmVhdGVBcHBlbmQoXCJsYWJlbFwiLCBudWxsLCBwcm9ncmVzc0NoZWNrQ29udGFpbmVyLFxuICAgICAgICBcIlNldCBwcm9ncmVzcyBmcm9tIHN1YnRhc2tzXCIpO1xuICAgIHByb2dyZXNzQ2hlY2tMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJwcm9ncmVzcy1jaGVja1wiKTtcbiAgICB1cGRhdGVQcm9ncmVzc0ZpZWxkKHByb2dyZXNzQ2hlY2ssIHByb2dyZXNzRmllbGQpO1xuXG4gICAgbGV0IG5vdGVzSW5wdXQgPSBjcmVhdGVJbnB1dChcInRleHRhcmVhXCIsIG51bGwsIFwiaW5wdXQtbm90ZVwiLCBfdGFzay5ub3RlcywgXG4gICAgICAgIGNhcmRJbnB1dCwgXCJmaWVsZC1jb250YWluZXJcIiwgXCJOb3Rlc1wiKTtcblxuICAgIGxldCBidXR0b25EaXYgPSBjcmVhdGVBcHBlbmQoXCJkaXZcIiwgXCJpbnB1dC1idXR0b25zXCIsIGNhcmRJbnB1dCk7XG4gICAgbGV0IGNvbmZpcm0gPSBjcmVhdGVBcHBlbmQoXG4gICAgICAgIGNyZWF0ZVN2ZyhcIk0xMiAyQzYuNSAyIDIgNi41IDIgMTJTNi41IDIyIDEyIDIyIDIyIDE3LjUgMjIgMTIgMTcuNSAyIDEyIDJNMTAgMTdMNSAxMkw2LjQxIDEwLjU5TDEwIDE0LjE3TDE3LjU5IDYuNThMMTkgOEwxMCAxN1pcIixcbiAgICAgICAgXCJDb25maXJtXCIsIHRydWUsIFwiaW5wdXQtYnV0dG9uXCIpLFxuICAgICAgICBbIFwiY29uZmlybS1lZGl0LWltZ1wiLCBcImlucHV0LWJ1dHRvblwiIF0sIGJ1dHRvbkRpdlxuICAgICk7XG4gICAgbGV0IGNhbmNlbCA9IGNyZWF0ZUFwcGVuZChcbiAgICAgICAgY3JlYXRlU3ZnKFwiTTksN0wxMSwxMkw5LDE3SDExTDEyLDE0LjVMMTMsMTdIMTVMMTMsMTJMMTUsN0gxM0wxMiw5LjVMMTEsN0g5TTEyLDJBMTAsMTAgMCAwLDEgMjIsMTJBMTAsMTAgMCAwLDEgMTIsMjJBMTAsMTAgMCAwLDEgMiwxMkExMCwxMCAwIDAsMSAxMiwyWlwiLFxuICAgICAgICBcIkNhbmNlbFwiLCB0cnVlLCBcImlucHV0LWJ1dHRvblwiKSxcbiAgICAgICAgWyBcImNvbmZpcm0tZWRpdC1pbWdcIiwgXCJpbnB1dC1idXR0b25cIiBdLCBidXR0b25EaXZcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FyZCxcbiAgICAgICAgY2FyZElucHV0LFxuICAgICAgICB0aXRsZUlucHV0LFxuICAgICAgICBkYXRlSW5wdXQsXG4gICAgICAgIHRpbWVJbnB1dCxcbiAgICAgICAgZGVzY0lucHV0LFxuICAgICAgICBwcmlvcml0eUZpZWxkLFxuICAgICAgICBwcm9ncmVzc0NoZWNrLFxuICAgICAgICBwcm9ncmVzc0ZpZWxkLFxuICAgICAgICBub3Rlc0lucHV0LFxuICAgICAgICBjb25maXJtLFxuICAgICAgICBjYW5jZWxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcHBlbmQoX2VsZW1UeXBlLCBfY2xhc3NlcywgX3BhcmVudEVsZW0sIF90ZXh0Q29udGVudCkge1xuICAgIC8vIElmIF9lbGVtVHlwZSBpcyBhIHN0cmluZywgY3JlYXRlIGl0OyBvdGhlcndpc2UgYXNzdW1lIGl0J3MgYW4gZXhpc3RpbmdcbiAgICAvLyBlbGVtZW50IGFuZCB1c2UgaXQgYXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgX2VsZW1UeXBlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KF9lbGVtVHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbSA9IF9lbGVtVHlwZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKF9jbGFzc2VzKSB7XG4gICAgICAgIC8vIENhbiBwYXNzIGFycmF5IG9mIHN0cmluZ3Mgb3Igc2luZ2xlIHN0cmluZy5cbiAgICAgICAgaWYgKHR5cGVvZiBfY2xhc3NlcyA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoX2NsYXNzZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKC4uLl9jbGFzc2VzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChfdGV4dENvbnRlbnQpIHtcbiAgICAgICAgZWxlbS50ZXh0Q29udGVudCA9IF90ZXh0Q29udGVudDtcbiAgICB9XG5cbiAgICBfcGFyZW50RWxlbS5hcHBlbmRDaGlsZChlbGVtKTtcblxuICAgIHJldHVybiBlbGVtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3NGaWVsZChfY2hlY2ssIF9maWVsZCkge1xuICAgIGlmIChfY2hlY2suY2hlY2tlZCkge1xuICAgICAgICBfZmllbGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBfZmllbGQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFkaW9WYWx1ZShfZmllbGRzZXQpIHtcbiAgICBsZXQgcmFkaW9zID0gX2ZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFkaW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChyYWRpb3NbaV0uY2hlY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0KF90eXBlLCBfY2xhc3NlcywgX25hbWUsIF92YWx1ZSwgX2NvbnRhaW5lclBhcmVudCwgXG4gICAgICAgIF9jb250YWluZXJDbGFzc2VzLCBfbGFiZWxUZXh0LCBfbGFiZWxDbGFzc2VzKSB7XG4gICAgbGV0IGNvbnRhaW5lciA9IGNyZWF0ZUFwcGVuZChcImRpdlwiLCBfY29udGFpbmVyQ2xhc3NlcywgX2NvbnRhaW5lclBhcmVudCk7XG4gICAgbGV0IGVsZW1MYWJlbCA9IGNyZWF0ZUFwcGVuZChcImxhYmVsXCIsIF9sYWJlbENsYXNzZXMsIGNvbnRhaW5lciwgX2xhYmVsVGV4dCk7XG4gICAgZWxlbUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBfbmFtZSk7XG5cbiAgICBpZiAoX3R5cGUgPT0gXCJ0ZXh0YXJlYVwiKSB7XG4gICAgICAgIHZhciBlbGVtID0gY3JlYXRlQXBwZW5kKFwidGV4dGFyZWFcIiwgX2NsYXNzZXMsIGNvbnRhaW5lciwgX3ZhbHVlKTtcbiAgICAgICAgc2V0SW5wdXRBdHRyaWJ1dGVzKGVsZW0sIG51bGwsIF9uYW1lLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZWxlbSA9IGNyZWF0ZUFwcGVuZChcImlucHV0XCIsIF9jbGFzc2VzLCBjb250YWluZXIpO1xuICAgICAgICBzZXRJbnB1dEF0dHJpYnV0ZXMoZWxlbSwgX3R5cGUsIF9uYW1lLCBfdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtO1xufVxuXG5mdW5jdGlvbiBzZXRJbnB1dEF0dHJpYnV0ZXMoX2VsZW0sIF90eXBlLCBfbmFtZUlkLCBfdmFsdWUpIHtcbiAgICBpZiAoX3R5cGUpIF9lbGVtLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgX3R5cGUpO1xuXG4gICAgaWYgKF9uYW1lSWQpIHtcbiAgICAgICAgX2VsZW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBfbmFtZUlkKTtcbiAgICAgICAgX2VsZW0uc2V0QXR0cmlidXRlKFwiaWRcIiwgX25hbWVJZCk7XG4gICAgfVxuXG4gICAgaWYgKF92YWx1ZSkgX2VsZW0uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgX3ZhbHVlKTtcbn1cblxuZnVuY3Rpb24gZXhwYW5kQ2FyZChfdGFzaywgX2Rpdikge1xuICAgIGlmIChfdGFzay5leHBhbmRlZCkge1xuICAgICAgICBfZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJjb2xsYXBzZWRcIik7XG4gICAgICAgIF9kaXYuY2xhc3NMaXN0LmFkZChcImV4cGFuZGVkXCIpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBfZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJleHBhbmRlZFwiKTtcbiAgICBfZGl2LmNsYXNzTGlzdC5hZGQoXCJjb2xsYXBzZWRcIik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJhZGlvRmllbGQoX25hbWUsIF9kZWZhdWx0VmFsdWUsIF9sYWJlbEFycikge1xuICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcbiAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKGAke19uYW1lfS1maWVsZHNldGApO1xuXG4gICAgbGV0IHJhZGlvcyA9IFtdO1xuICAgIGxldCBsYWJlbHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX2xhYmVsQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJhZGlvcy5wdXNoKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSk7XG4gICAgICAgIHJhZGlvc1tpXS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFkaW9cIik7XG4gICAgICAgIHJhZGlvc1tpXS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgJHtfbmFtZX0tJHtpfWApO1xuICAgICAgICByYWRpb3NbaV0uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBfbmFtZSk7XG4gICAgICAgIHJhZGlvc1tpXS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBfbGFiZWxBcnJbaV0pO1xuICAgICAgICBmaWVsZC5hcHBlbmRDaGlsZChyYWRpb3NbaV0pO1xuXG4gICAgICAgIGxhYmVscy5wdXNoKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKSk7XG4gICAgICAgIGxhYmVsc1tpXS5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYCR7X25hbWV9LSR7aX1gKTtcbiAgICAgICAgbGFiZWxzW2ldLnRleHRDb250ZW50ID0gX2xhYmVsQXJyW2ldO1xuICAgICAgICBmaWVsZC5hcHBlbmRDaGlsZChsYWJlbHNbaV0pO1xuICAgIH1cblxuICAgIHJhZGlvc1tfZGVmYXVsdFZhbHVlXS5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuXG4gICAgcmV0dXJuIGZpZWxkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdmcoX3BhdGgsIF90aXRsZSwgX3VzZUJnLCBfcGF0aENsYXNzKSB7XG4gICAgbGV0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDI0IDI0XCIpO1xuICAgIFxuICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidGl0bGVcIik7XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBfdGl0bGU7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICBpZiAoX3VzZUJnKSB7XG4gICAgICAgIHZhciBiZ1BhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG4gICAgICAgIGJnUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTEyLDRBMTAsMTAgMCAwLDAgNCwxMkExMCwxMCAwIDAsMCAxMiwyMEExMCwxMCAwIDAsMCAyMCwxMkExMCwxMCAwIDAsMCAxMiw0WlwiKTtcbiAgICAgICAgYmdQYXRoLmNsYXNzTGlzdC5hZGQoXCJiZy1pbWdcIik7XG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZ1BhdGgpO1xuICAgIH1cbiAgICBsZXQgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgX3BhdGgpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChwYXRoKTtcblxuICAgIGlmIChfcGF0aENsYXNzICE9IG51bGwpIHtcbiAgICAgICAgcGF0aC5jbGFzc0xpc3QuYWRkKF9wYXRoQ2xhc3MpO1xuICAgICAgICBcbiAgICAgICAgaWYgKF91c2VCZykge1xuICAgICAgICAgICAgYmdQYXRoLmNsYXNzTGlzdC5hZGQoX3BhdGhDbGFzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3ZnO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcmlvcml0eVN2ZyhfcHJpb3JpdHkpIHtcbiAgICBjb25zdCBwcmlvcml0eVBhdGggPSBbXG4gICAgICAgIFwiTTEyIDE2QzEzLjY2IDE2IDE1IDE0LjY2IDE1IDEzQzE1IDExLjg4IDE0LjM5IDEwLjkgMTMuNSAxMC4zOUwzLjc5IDQuNzdMOS4zMiAxNC4zNUM5LjgyIDE1LjMzIDEwLjgzIDE2IDEyIDE2TTEyIDNDMTAuMTkgMyA4LjUgMy41IDcuMDMgNC4zMkw5LjEzIDUuNTNDMTAgNS4xOSAxMSA1IDEyIDVDMTYuNDIgNSAyMCA4LjU4IDIwIDEzQzIwIDE1LjIxIDE5LjExIDE3LjIxIDE3LjY2IDE4LjY1SDE3LjY1QzE3LjI2IDE5LjA0IDE3LjI2IDE5LjY3IDE3LjY1IDIwLjA2QzE4LjA0IDIwLjQ1IDE4LjY4IDIwLjQ1IDE5LjA3IDIwLjA3QzIwLjg4IDE4LjI2IDIyIDE1Ljc2IDIyIDEzQzIyIDcuNSAxNy41IDMgMTIgM00yIDEzQzIgMTUuNzYgMy4xMiAxOC4yNiA0LjkzIDIwLjA3QzUuMzIgMjAuNDUgNS45NSAyMC40NSA2LjM0IDIwLjA2QzYuNzMgMTkuNjcgNi43MyAxOS4wNCA2LjM0IDE4LjY1QzQuODkgMTcuMiA0IDE1LjIxIDQgMTNDNCAxMiA0LjE5IDExIDQuNTQgMTAuMUwzLjMzIDhDMi41IDkuNSAyIDExLjE4IDIgMTNaXCIsXG4gICAgICAgIFwiTTEyIDEuMzhMOS4xNCAxMi4wNkM4LjggMTMuMSA5LjA0IDE0LjI5IDkuODYgMTUuMTJDMTEuMDQgMTYuMjkgMTIuOTQgMTYuMjkgMTQuMTEgMTUuMTJDMTQuOSAxNC4zMyAxNS4xNiAxMy4yIDE0Ljg5IDEyLjIxTTE0LjYgMy4zNUwxNS4yMiA1LjY4QzE4LjA0IDYuOTIgMjAgOS43MyAyMCAxM0MyMCAxNS4yMSAxOS4xMSAxNy4yMSAxNy42NiAxOC42NUgxNy42NUMxNy4yNiAxOS4wNCAxNy4yNiAxOS42NyAxNy42NSAyMC4wNkMxOC4wNCAyMC40NSAxOC42OCAyMC40NSAxOS4wNyAyMC4wN0MyMC44OCAxOC4yNiAyMiAxNS43NiAyMiAxM0MyMiA4LjM4IDE4Ljg2IDQuNSAxNC42IDMuMzVNOS40IDMuMzZDNS4xNSA0LjUgMiA4LjQgMiAxM0MyIDE1Ljc2IDMuMTIgMTguMjYgNC45MyAyMC4wN0M1LjMyIDIwLjQ1IDUuOTUgMjAuNDUgNi4zNCAyMC4wNkM2LjczIDE5LjY3IDYuNzMgMTkuMDQgNi4zNCAxOC42NUM0Ljg5IDE3LjIgNCAxNS4yMSA0IDEzQzQgOS42NSA1Ljk0IDYuODYgOC43OSA1LjY1XCIsXG4gICAgICAgIFwiTTEyLDE2QTMsMyAwIDAsMSA5LDEzQzksMTEuODggOS42MSwxMC45IDEwLjUsMTAuMzlMMjAuMjEsNC43N0wxNC42OCwxNC4zNUMxNC4xOCwxNS4zMyAxMy4xNywxNiAxMiwxNk0xMiwzQzEzLjgxLDMgMTUuNSwzLjUgMTYuOTcsNC4zMkwxNC44Nyw1LjUzQzE0LDUuMTkgMTMsNSAxMiw1QTgsOCAwIDAsMCA0LDEzQzQsMTUuMjEgNC44OSwxNy4yMSA2LjM0LDE4LjY1SDYuMzVDNi43NCwxOS4wNCA2Ljc0LDE5LjY3IDYuMzUsMjAuMDZDNS45NiwyMC40NSA1LjMyLDIwLjQ1IDQuOTMsMjAuMDdWMjAuMDdDMy4xMiwxOC4yNiAyLDE1Ljc2IDIsMTNBMTAsMTAgMCAwLDEgMTIsM00yMiwxM0MyMiwxNS43NiAyMC44OCwxOC4yNiAxOS4wNywyMC4wN1YyMC4wN0MxOC42OCwyMC40NSAxOC4wNSwyMC40NSAxNy42NiwyMC4wNkMxNy4yNywxOS42NyAxNy4yNywxOS4wNCAxNy42NiwxOC42NVYxOC42NUMxOS4xMSwxNy4yIDIwLDE1LjIxIDIwLDEzQzIwLDEyIDE5LjgxLDExIDE5LjQ2LDEwLjFMMjAuNjcsOEMyMS41LDkuNSAyMiwxMS4xOCAyMiwxM1pcIlxuICAgIF07XG5cbiAgICBjb25zdCBwcmlvcml0eUNsYXNzID0gW1xuICAgICAgICBcInByaW9yaXR5LWxvd1wiLFxuICAgICAgICBcInByaW9yaXR5LW1pZFwiLFxuICAgICAgICBcInByaW9yaXR5LWhpZ2hcIlxuICAgIF07XG5cbiAgICBsZXQgcHJpb3JpdHlTdmcgPSBjcmVhdGVTdmcocHJpb3JpdHlQYXRoW19wcmlvcml0eSAtIDFdLCBcbiAgICAgICAgcHJpb3JpdHlMaXN0W19wcmlvcml0eV0sIGZhbHNlKTtcbiAgICBwcmlvcml0eVN2Zy5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktaW1nXCIsIHByaW9yaXR5Q2xhc3NbX3ByaW9yaXR5IC0gMV0pO1xuXG4gICAgcmV0dXJuIHByaW9yaXR5U3ZnO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmVzc1N2ZyhfcHJvZ3Jlc3MpIHtcbiAgICBjb25zdCBwcm9ncmVzc1BhdGggPSBbXG4gICAgICAgIFwiTTEyLDIwQTgsOCAwIDAsMSA0LDEyQTgsOCAwIDAsMSAxMiw0QTgsOCAwIDAsMSAyMCwxMkE4LDggMCAwLDEgMTIsMjBNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJaXCIsXG4gICAgICAgIFwiTTguNDYgOC40NkM5LjQgNy41MyAxMC42NyA3IDEyIDdDMTMuMzMgNyAxNC42IDcuNTMgMTUuNTQgOC40Nkw4LjQ2IDE1LjU0QzcuNTMgMTQuNiA3IDEzLjMzIDcgMTJDNyAxMC42NyA3LjUzIDkuNCA4LjQ2IDguNDZNOC4xNyAyLjc2QzkuMzkgMi4yNiAxMC42OSAyIDEyIDJDMTMuMzEgMiAxNC42MSAyLjI2IDE1LjgzIDIuNzZDMTcuMDQgMy4yNiAxOC4xNCA0IDE5LjA3IDQuOTNDMjAgNS44NiAyMC43NCA2Ljk2IDIxLjI0IDguMTdDMjEuNzQgOS4zOSAyMiAxMC42OSAyMiAxMkMyMiAxNC42NSAyMC45NSAxNy4yIDE5LjA3IDE5LjA3QzE3LjIgMjAuOTUgMTQuNjUgMjIgMTIgMjJDMTAuNjkgMjIgOS4zOSAyMS43NCA4LjE3IDIxLjI0QzYuOTYgMjAuNzQgNS44NiAyMCA0LjkzIDE5LjA3QzMuMDUgMTcuMiAyIDE0LjY1IDIgMTJDMiA5LjM1IDMuMDUgNi44IDQuOTMgNC45M0M1Ljg2IDQgNi45NiAzLjI2IDguMTcgMi43Nk02LjM0IDE3LjY2QzcuODQgMTkuMTYgOS44OCAyMCAxMiAyMEMxNC4xMiAyMCAxNi4xNiAxOS4xNiAxNy42NiAxNy42NkMxOS4xNiAxNi4xNiAyMCAxNC4xMiAyMCAxMkMyMCA5Ljg4IDE5LjE2IDcuODQgMTcuNjYgNi4zNEMxNi4xNiA0Ljg0IDE0LjEyIDQgMTIgNEM5Ljg4IDQgNy44NCA0Ljg0IDYuMzQgNi4zNEM0Ljg0IDcuODQgNCA5Ljg4IDQgMTJDNCAxNC4xMiA0Ljg0IDE2LjE2IDYuMzQgMTcuNjZaXCIsXG4gICAgICAgIFwiTTEyLDIwQTgsOCAwIDAsMSA0LDEyQTgsOCAwIDAsMSAxMiw0QTgsOCAwIDAsMSAyMCwxMkE4LDggMCAwLDEgMTIsMjBNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJNMTIsN0E1LDUgMCAwLDAgNywxMkE1LDUgMCAwLDAgMTIsMTdBNSw1IDAgMCwwIDE3LDEyQTUsNSAwIDAsMCAxMiw3WlwiXG4gICAgXTtcblxuICAgIGNvbnN0IHByb2dyZXNzQ2xhc3MgPSBbXG4gICAgICAgIFwicHJvZ3Jlc3Mtbm90LXN0YXJ0ZWRcIixcbiAgICAgICAgXCJwcm9ncmVzcy1pbi1wcm9ncmVzc1wiLFxuICAgICAgICBcInByb2dyZXNzLWNvbXBsZXRlZFwiXG4gICAgXTtcblxuICAgIGxldCBwcm9ncmVzc1N2ZyA9IGNyZWF0ZVN2Zyhwcm9ncmVzc1BhdGhbX3Byb2dyZXNzIC0gMV0sIFxuICAgICAgICBwcm9ncmVzc0xpc3RbX3Byb2dyZXNzXSwgZmFsc2UpO1xuICAgIHByb2dyZXNzU3ZnLmNsYXNzTGlzdC5hZGQoXCJwcm9ncmVzcy1pbWdcIiwgcHJvZ3Jlc3NDbGFzc1tfcHJvZ3Jlc3MgLSAxXSk7XG5cbiAgICByZXR1cm4gcHJvZ3Jlc3NTdmc7XG59IiwiLy8gU3R5bGUgbWVudSBwcm9wZXJ0aWVzIHZpYSBDU1MuIEZvbnQgc2l6ZSBtdXN0IGJlIGdpdmVuIGluIHB4LlxuLy9cbi8vIC5tZW51IHtcbi8vICAgICBmb250LXNpemU6IDI0cHg7XG4vLyB9XG4vLyAubWVudS1yZWN0IHtcbi8vICAgICBmaWxsOiBjb2xvcjtcbi8vIH1cbi8vIC5tZW51LWJvcmRlciB7XG4vLyAgICAgZmlsbDogY29sb3I7XG4vLyB9XG4vLyAubWVudS10ZXh0IHtcbi8vICAgICBmaWxsOiBjb2xvcjtcbi8vIH1cbi8vIC5tZW51LWhpZ2hsaWdodCB7XG4vLyAgICAgZmlsbDogY29sb3I7XG4vLyB9XG5cbmNvbnN0IG5hbWVzcGFjZSA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICAgIGNsaWNrUmVsZWFzZVdpbmRvdztcbiAgICBzdmc7XG4gICAgZ3JvdXA7XG4gICAgbWVudTtcbiAgICBib3JkZXI7XG4gICAgbWVudUl0ZW1zID0gW107XG4gICAgYnV0dG9uRG93blRpbWU7XG4gICAgaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgdGlsZUdyb3VwID0gbnVsbDtcbiAgICBmdW5jdGlvbnM7XG4gICAgaXRlbVRleHRzO1xuICAgIGJvcmRlclNpemUgPSAxO1xuICAgIHNjYWxlID0gMTtcbiAgICBmb250U2l6ZSA9IDIwO1xuICAgIC8vIG1lbnVNYXJnaW4gY3JlYXRlcyBhbiBpbnZpc2libGUsIG5vbi1zZWxlY3RhYmxlIGJ1ZmZlciB6b25lIGFyb3VuZCB0aGUgXG4gICAgLy8gbWVudSBzbyB3ZSBjYW4gbGlzdGVuIGZvciB0aGUgbW91c2UgbGVhdmluZyB0aGUgbWVudSBhbmQgZGlzYWJsZSB0aGUgXG4gICAgLy8gaGlnaGxpZ2h0IHdpdGhvdXQgaGF2aW5nIHRvIGxpc3RlbiBvdmVyIHRoZSBlbnRpcmUgZG9jdW1lbnQuXG4gICAgbWVudU1hcmdpbiA9IDI7XG4gICAgbWVudVBvc09mZnNldCA9IHsgeDogLTQsIHk6IC0xIH07XG4gICAgbWVudVdpZHRoO1xuICAgIG1lbnVIZWlnaHQ7XG4gICAgaW5pdFRpbWU7XG4gICAgLy8gcG9zdEluaXREZWxheSBzZXRzIGEgZGVsYXkgb24gd2hlbiBtZW51IGl0ZW1zIGNhbiBiZSB0cmlnZ2VyZWQgYWZ0ZXIgbWVudVxuICAgIC8vIGluaXQuIFRoaXMgcHJvdmlkZXMgYSBzYWZlZ3VhcmQgYWdhaW5zdCBhY2NpZGVudGFsbHkgY2F0Y2hpbmcgYSBjbGljayB0aGF0XG4gICAgLy8gb3BlbmVkIHRoZSBtZW51LlxuICAgIHBvc3RJbml0RGVsYXkgPSAyMDA7XG4gICAgaHRtbDtcblxuICAgIGNvbnN0cnVjdG9yIChfaXRlbVRleHRzLCBfZnVuY3Rpb25zLCBfY3NzQ2xhc3Nlcykge1xuICAgICAgICB0aGlzLmh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaHRtbFwiKTtcbiAgICAgICAgdGhpcy5zdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBcInN2Z1wiKTtcbiAgICAgICAgdGhpcy5zdmcuY2xhc3NMaXN0LmFkZChcIm1lbnVcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAoX2Nzc0NsYXNzZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnLmNsYXNzTGlzdC5hZGQoLi4uX2Nzc0NsYXNzZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIHRoaXMuY2xpY2tSZWxlYXNlV2luZG93ID0gNTAwO1xuICAgICAgICB0aGlzLmdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgXCJnXCIpO1xuICAgICAgICB0aGlzLm1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBcInJlY3RcIik7XG4gICAgICAgIHRoaXMuYm9yZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgXCJyZWN0XCIpO1xuXG4gICAgICAgIHRoaXMuZ3JvdXAuYXBwZW5kQ2hpbGQodGhpcy5ib3JkZXIpO1xuICAgICAgICB0aGlzLmdyb3VwLmFwcGVuZENoaWxkKHRoaXMubWVudSk7XG4gICAgICAgIHRoaXMuZ3JvdXAuc2V0QXR0cmlidXRlKFwiaWRcIiwgYG1lbnVHcm91cGApO1xuXG4gICAgICAgIHRoaXMuYm9yZGVyLmNsYXNzTGlzdC5hZGQoXCJtZW51LWJvcmRlclwiKTtcbiAgICAgICAgdGhpcy5tZW51LmNsYXNzTGlzdC5hZGQoXCJtZW51LXJlY3RcIik7XG5cbiAgICAgICAgdGhpcy5mdW5jdGlvbnMgPSBfZnVuY3Rpb25zO1xuICAgICAgICB0aGlzLml0ZW1UZXh0cyA9IF9pdGVtVGV4dHM7XG5cbiAgICAgICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBfZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUhpZ2hsaWdodChfZS5jbGllbnRYLCBfZS5jbGllbnRZKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKF9lKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVyYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgX2UgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICYmIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5pbml0VGltZSA+IFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbml0RGVsYXkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWVudVNlbGVjdGlvbiA9IHRoaXMuZ2V0SGlnaGxpZ2h0ZWQoKTtcbiAgICAgICAgICAgICAgICBsZXQgbWVudU1vdXNlT3ZlciA9IGRvY3VtZW50LmVsZW1lbnRzRnJvbVBvaW50KF9lLmNsaWVudFgsIF9lLmNsaWVudFkpO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChtZW51U2VsZWN0aW9uICYmIG1lbnVNb3VzZU92ZXIuaW5jbHVkZXMobWVudVNlbGVjdGlvbi5yZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZXJhc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Zy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgbGV0IGNvbXB1dGVkRm9udFNpemUgPSBcbiAgICAgICAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuc3ZnKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZm9udC1zaXplXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXB1dGVkRm9udFNpemUpIHtcbiAgICAgICAgICAgIGxldCBudW0gPSBcIlwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjaGFyIG9mIGNvbXB1dGVkRm9udFNpemUpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA+PSA0OCAmJiBjb2RlIDw9IDU3KSB7XG4gICAgICAgICAgICAgICAgICAgIG51bSArPSBjaGFyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mb250U2l6ZSA9IE51bWJlcihudW0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgIHRoaXMuc3ZnLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGBwb3NpdGlvbjogYWJzb2x1dGU7YCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1UZXh0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hZGRNZW51SXRlbSh0aGlzLml0ZW1UZXh0c1tpXSwgdGhpcy5mdW5jdGlvbnNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlaWdodCA9IDA7XG4gICAgICAgIGxldCB3aWR0aCA9IDA7XG4gICAgICAgIGZvciAobGV0IHggb2YgdGhpcy5tZW51SXRlbXMpIHtcbiAgICAgICAgICAgIGxldCBuZXdXaWR0aCA9IHguc3ZnVGV4dC50ZXh0LmdldEJCb3goKS53aWR0aCArIHguc3ZnVGV4dC54TWFyZ2luICogMjtcblxuICAgICAgICAgICAgaWYgKG5ld1dpZHRoID4gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zW2ldLnJlY3Quc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgd2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNbaV0uZ3JvdXAuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwgJHtoZWlnaHR9KWApO1xuICAgICAgICAgICAgaGVpZ2h0ICs9IE51bWJlcih0aGlzLm1lbnVJdGVtc1tpXS5yZWN0LmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWVudS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBgJHt3aWR0aH1gKTtcbiAgICAgICAgdGhpcy5tZW51LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBgJHtoZWlnaHR9YCk7XG4gICAgICAgIHRoaXMuYm9yZGVyLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGAke3dpZHRoICsgdGhpcy5ib3JkZXJTaXplICogMn1gKTtcbiAgICAgICAgdGhpcy5ib3JkZXIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGAke2hlaWdodCArIHRoaXMuYm9yZGVyU2l6ZSAqIDJ9YCk7XG4gICAgICAgIHRoaXMuYm9yZGVyLnNldEF0dHJpYnV0ZShcInhcIiwgYCR7dGhpcy5ib3JkZXJTaXplICogLTF9YCk7XG4gICAgICAgIHRoaXMuYm9yZGVyLnNldEF0dHJpYnV0ZShcInlcIiwgYCR7dGhpcy5ib3JkZXJTaXplICogLTF9YCk7XG5cbiAgICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgYCR7d2lkdGggKiB0aGlzLnNjYWxlICsgdGhpcy5ib3JkZXJTaXplICogdGhpcy5zY2FsZX1gKTtcbiAgICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGAke2hlaWdodCAqIHRoaXMuc2NhbGUgKyB0aGlzLmJvcmRlclNpemUgKiB0aGlzLnNjYWxlfWApO1xuICAgICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFxuICAgICAgICAgICAgYCR7dGhpcy5ib3JkZXJTaXplICogLTEgLSB0aGlzLm1lbnVNYXJnaW59ICR7dGhpcy5ib3JkZXJTaXplICogLTEgLSBcbiAgICAgICAgICAgIHRoaXMubWVudU1hcmdpbn0gJHt3aWR0aCArIHRoaXMuYm9yZGVyU2l6ZSAqIDIgKyB0aGlzLm1lbnVNYXJnaW4gKiBcbiAgICAgICAgICAgIDJ9ICR7aGVpZ2h0ICsgdGhpcy5ib3JkZXJTaXplICogMiArIHRoaXMubWVudU1hcmdpbiAqIDJ9YCk7XG5cbiAgICAgICAgdGhpcy5tZW51V2lkdGggPSB3aWR0aCArIHRoaXMuYm9yZGVyU2l6ZSAqIDIgLSB0aGlzLm1lbnVNYXJnaW4gKiAyO1xuICAgICAgICB0aGlzLm1lbnVIZWlnaHQgPSBoZWlnaHQgKyB0aGlzLmJvcmRlclNpemUgKiAyIC0gdGhpcy5tZW51TWFyZ2luICogMjtcblxuICAgICAgICB0aGlzLmluaXRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgYnV0dG9uRG93bihfY2xpZW50WCwgX2NsaWVudFkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB0aGlzLmVyYXNlKCk7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5ncm91cCk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgICAgIGNvbnN0IGRvY1dpZHRoID0gdGhpcy5odG1sLmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBkb2NIZWlnaHQgPSB0aGlzLmh0bWwuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIC8vIEFkanVzdG1lbnQgdmFsdWVzIGlmIHRoZSBtZW51IGV4dGVuZHMgb2ZmIHRoZSBzY3JlZW4uXG4gICAgICAgIGxldCB4T2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IHlPZmZzZXQgPSAwO1xuXG4gICAgICAgIGlmIChfY2xpZW50WCArIHRoaXMubWVudVBvc09mZnNldC54ICsgdGhpcy5tZW51V2lkdGggKyAxID4gZG9jV2lkdGgpIHtcbiAgICAgICAgICAgIHhPZmZzZXQgPSAgZG9jV2lkdGggLSAoX2NsaWVudFggKyB0aGlzLm1lbnVQb3NPZmZzZXQueCArIHRoaXMubWVudVdpZHRoICsgMSk7IFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9jbGllbnRZICsgdGhpcy5tZW51UG9zT2Zmc2V0LnkgKyB0aGlzLm1lbnVIZWlnaHQgKyAxID4gZG9jSGVpZ2h0KSB7XG4gICAgICAgICAgICB5T2Zmc2V0ID0gIGRvY0hlaWdodCAtIChfY2xpZW50WSArIHRoaXMubWVudVBvc09mZnNldC55ICsgdGhpcy5tZW51SGVpZ2h0ICsgMSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke19jbGllbnRYIC0gdGhpcy5tZW51TWFyZ2luICsgXG4gICAgICAgICAgICB0aGlzLm1lbnVQb3NPZmZzZXQueCArIHhPZmZzZXQgKyB3aW5kb3cuc2Nyb2xsWH0sICR7X2NsaWVudFkgLSB0aGlzLm1lbnVNYXJnaW4gKyBcbiAgICAgICAgICAgIHRoaXMubWVudVBvc09mZnNldC55ICsgeU9mZnNldCArIHdpbmRvdy5zY3JvbGxZfSlgKTtcbiAgICAgICAgdGhpcy51cGRhdGVIaWdobGlnaHQoX2NsaWVudFgsIF9jbGllbnRZKTtcbiAgICAgICAgdGhpcy5idXR0b25Eb3duVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cblxuICAgIGJ1dHRvblVwKCkge1xuICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLmJ1dHRvbkRvd25UaW1lID4gY2xpY2tSZWxlYXNlV2luZG93KSB0aGlzLmVyYXNlKCk7XG4gICAgfTtcblxuICAgIGVyYXNlKCkge1xuICAgICAgICB0aGlzLmdyb3VwLnJlbW92ZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5tZW51SXRlbXMpIHtcbiAgICAgICAgICAgIGl0ZW0uZ3JvdXAucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5tZW51SXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRNZW51SXRlbShfdGV4dCwgX2Z1bmN0aW9uLCBfaWR4KSB7XG4gICAgICAgIGlmIChfaWR4ID09IG51bGwpIF9pZHggPSB0aGlzLm1lbnVJdGVtcy5sZW5ndGg7XG4gICAgICAgIHRoaXMubWVudUl0ZW1zLnNwbGljZShfaWR4LCAwLCBuZXcgTWVudUl0ZW0oX3RleHQsIHRoaXMuZm9udFNpemUsIFxuICAgICAgICAgICAgdGhpcy5ncm91cCwgX2lkeCwgX2Z1bmN0aW9uKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlSGlnaGxpZ2h0KF9jbGllbnRYLCBfY2xpZW50WSkge1xuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggb2YgdGhpcy5tZW51SXRlbXMpIHtcbiAgICAgICAgICAgICAgICB4LnVuaGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbWVudU1vdXNlT3ZlciA9IGRvY3VtZW50LmVsZW1lbnRzRnJvbVBvaW50KF9jbGllbnRYLCBfY2xpZW50WSk7XG4gICAgICAgICAgICBmb3IgKGxldCB4IG9mIHRoaXMubWVudUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lbnVNb3VzZU92ZXIuaW5jbHVkZXMoeC5yZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICB4LmhpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0SGlnaGxpZ2h0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiB0aGlzLm1lbnVJdGVtcykge1xuICAgICAgICAgICAgICAgIGlmICh4LmlzSGlnaGxpZ2h0ZWQpIHJldHVybiB4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuXG4gICAgZ2V0SGlnaGxpZ2h0ZWRUZXh0KCkge1xuICAgICAgICBsZXQgaGlnaGxpZ2h0ZWQgPSB0aGlzLmdldEhpZ2hsaWdodGVkKCk7XG4gICAgICAgIHJldHVybiBoaWdobGlnaHRlZCA/IGhpZ2hsaWdodGVkLnN2Z1RleHQudGV4dC50ZXh0Q29udGVudCA6IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgYWN0aXZhdGVTZWxlY3Rpb24oX3NlbGVjdGlvbiA9IFwiaGlnaGxpZ2h0ZWRcIikge1xuICAgICAgICBpZiAoX3NlbGVjdGlvbiA9PT0gXCJoaWdobGlnaHRlZFwiKSBfc2VsZWN0aW9uID0gdGhpcy5nZXRIaWdobGlnaHRlZFRleHQoKTtcblxuICAgICAgICBsZXQgYWN0aXZlID0gdGhpcy5tZW51SXRlbXMuZmluZChfZSA9PiBfZS50ZXh0ID09IF9zZWxlY3Rpb24pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZS5mdW5jdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxuY2xhc3MgTWVudUl0ZW0ge1xuICAgIHJlY3Q7XG4gICAgZ3JvdXA7XG4gICAgdGV4dDtcbiAgICBzdmdUZXh0O1xuICAgIGlzSGlnaGxpZ2h0ZWQ7XG4gICAgZnVuY3Rpb25zO1xuXG4gICAgY29uc3RydWN0b3IoX3RleHQsIF9mb250U2l6ZSwgX3BhcmVudCwgX2lkeCwgX2Z1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMudGV4dCA9IF90ZXh0O1xuICAgICAgICB0aGlzLnJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBcInJlY3RcIik7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBcImdcIik7XG4gICAgICAgIHRoaXMuZ3JvdXAuYXBwZW5kQ2hpbGQodGhpcy5yZWN0KTtcbiAgICAgICAgX3BhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmdyb3VwKTtcbiAgICAgICAgdGhpcy5zdmdUZXh0ID0gbmV3IFNWR1RleHQoX3RleHQsIHRoaXMuZ3JvdXAsIF9pZHgsIF9mb250U2l6ZSk7XG4gICAgICAgIHRoaXMucmVjdC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwicmdiYSgwLCAwLCAwLCAwKVwiKTtcbiAgICAgICAgLy90aGlzLnJlY3Quc2V0QXR0cmlidXRlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIHRoaXMucmVjdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgYCR7X2ZvbnRTaXplICogMS4yfWApO1xuICAgICAgICB0aGlzLnJlY3QuY2xhc3NMaXN0LmFkZChcIm1lbnUtaXRlbVwiKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaXNIaWdobGlnaHRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZ1bmN0aW9uID0gX2Z1bmN0aW9uO1xuICAgIH1cblxuICAgIGhpZ2hsaWdodCgpIHtcbiAgICAgICAgdGhpcy5yZWN0LmNsYXNzTGlzdC5hZGQoXCJtZW51LWhpZ2hsaWdodFwiKTtcbiAgICAgICAgdGhpcy5pc0hpZ2hsaWdodGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgdW5oaWdobGlnaHQoKSB7XG4gICAgICAgIHRoaXMucmVjdC5jbGFzc0xpc3QucmVtb3ZlKFwibWVudS1oaWdobGlnaHRcIik7XG4gICAgICAgIHRoaXMuaXNIaWdobGlnaHRlZCA9IGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIFNWR1RleHQoX2NvbnRlbnQsIF9wYXJlbnQsIF9pZCA9IC0xLCBfZm9udFNpemUgPSAxMCkge1xuICAgIHRoaXMuZm9udFNpemUgPSBfZm9udFNpemU7XG4gICAgdGhpcy54TWFyZ2luID0gdGhpcy5mb250U2l6ZSAqIDAuMjtcbiAgICB0aGlzLnRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCBcInRleHRcIik7XG4gICAgdGhpcy50ZXh0LnRleHRDb250ZW50ID0gX2NvbnRlbnQ7XG4gICAgdGhpcy50ZXh0LnNldEF0dHJpYnV0ZShcImN1cnNvclwiLCBcImRlZmF1bHRcIik7XG4gICAgdGhpcy50ZXh0LmNsYXNzTGlzdC5hZGQoYG1lbnUtdGV4dC0ke19pZH1gKTtcbiAgICB0aGlzLnRleHQuY2xhc3NMaXN0LmFkZChcIm1lbnUtdGV4dFwiKTtcbiAgICBfcGFyZW50LmFwcGVuZENoaWxkKHRoaXMudGV4dCk7XG4gICAgdGhpcy50ZXh0LnNldEF0dHJpYnV0ZShcInhcIiwgYCR7dGhpcy54TWFyZ2lufWApO1xuICAgIHRoaXMudGV4dC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIGAke3RoaXMuZm9udFNpemUgKiAwLjl9YCk7XG4gICAgdGhpcy50ZXh0LnNldEF0dHJpYnV0ZShcImZvbnQtc2l6ZVwiLCBgJHt0aGlzLmZvbnRTaXplfXB4YCk7XG59IiwiLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1N0b3JhZ2VfQVBJL1xuLy8gVXNpbmdfdGhlX1dlYl9TdG9yYWdlX0FQSVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlKSB7XG4gICAgbGV0IHN0b3JhZ2U7XG4gICAgdHJ5IHtcbiAgICAgIHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV07XG4gICAgICBjb25zdCB4ID0gXCJfX3N0b3JhZ2VfdGVzdF9fXCI7XG4gICAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XG4gICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmXG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcbiAgICAgICAgKGUuY29kZSA9PT0gMjIgfHxcbiAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XG4gICAgICAgICAgLy8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XG4gICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuICAgICAgICAgIGUubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIiB8fFxuICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICBlLm5hbWUgPT09IFwiTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRURcIikgJiZcbiAgICAgICAgLy8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcbiAgICAgICAgc3RvcmFnZSAmJlxuICAgICAgICBzdG9yYWdlLmxlbmd0aCAhPT0gMFxuICAgICAgKTtcbiAgICB9XG4gIH0iLCJpbXBvcnQgKiBhcyBkb20gZnJvbSBcIi4vZG9tLmpzXCI7XG5pbXBvcnQgdGltZXpvbmVTdHJpbmcgZnJvbSBcIi4vdGltZXpvbmUtc3RyaW5nLmpzXCI7XG5pbXBvcnQgUmlnaHRDbGlja01lbnUgZnJvbSBcIi4vcmlnaHQtY2xpY2stbWVudS5qc1wiO1xuaW1wb3J0IHN0b3JhZ2VBdmFpbGFibGUgZnJvbSBcIi4vc3RvcmFnZS1hdmFpbGFibGUuanNcIjtcblxuY2xhc3MgVGFzayB7XG4gICAgdGl0bGU7XG4gICAgZHVlRGF0ZTtcbiAgICBkdWVEYXRlU3RyO1xuICAgIGR1ZVRpbWU7XG4gICAgZHVlVGltZVN0cjtcbiAgICBkZXNjcmlwdGlvbjtcbiAgICBwcmlvcml0eTtcbiAgICBwcm9ncmVzcztcbiAgICBub3RlcztcbiAgICBpZDtcbiAgICBkZXB0aDtcbiAgICBjdXJyZW50bHlFZGl0aW5nO1xuICAgIHVzZVByb2dyZXNzRnJvbVN1YnRhc2tzO1xuICAgIHN1YnRhc2tMaXN0O1xuICAgIHN1cGVydGFza0xpc3Q7XG4gICAgZXhwYW5kZWQ7XG4gICAgc2VsZWN0ZWQ7XG4gICAgZG9tRGl2O1xuICAgIHN0YXRpYyBsYXN0SWQgPSAtMTtcblxuICAgIGNvbnN0cnVjdG9yKF90aXRsZSwgX2R1ZURhdGVTdHIsIF9kdWVUaW1lU3RyLCBfZGVzY3JpcHRpb24sIF9wcmlvcml0eSwgX3Byb2dyZXNzLCBcbiAgICAgICAgICAgIF9ub3RlcywgX3N1cGVydGFza0xpc3QsIF9pc0Nsb25lKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBfdGl0bGUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5kdWVEYXRlU3RyID0gX2R1ZURhdGVTdHI7XG4gICAgICAgIHRoaXMuZHVlVGltZVN0ciA9IF9kdWVUaW1lU3RyO1xuICAgICAgICB0aGlzLnVwZGF0ZUR1ZSgpO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gX2Rlc2NyaXB0aW9uIHx8IFwiXCI7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBfcHJpb3JpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IF9wcm9ncmVzcyB8fCAwO1xuICAgICAgICB0aGlzLm5vdGVzID0gX25vdGVzIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoX3N1cGVydGFza0xpc3QpIHtcbiAgICAgICAgICAgIF9zdXBlcnRhc2tMaXN0LmFkZCh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3VwZXJ0YXNrTGlzdCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN1cnJlbnRseUVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdWJ0YXNrTGlzdCA9IG5ldyBUYXNrTGlzdCh0aGlzKTtcbiAgICAgICAgdGhpcy5leHBhbmRlZCA9IHRoaXMuaGFzQ29udGVudCgpO1xuICAgICAgICB0aGlzLnVzZVByb2dyZXNzRnJvbVN1YnRhc2tzID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVGFza3MgdGhhdCBsaXZlIGluIHRoZSBjb3B5IGJ1ZmZlciBoYXZlIG5vIElEIHRvIGVuc3VyZSB0aGF0IHBhc3RlZFxuICAgICAgICAvLyB0YXNrcycgSURzIGFyZSBjb250aWd1b3VzIHdpdGhvdXQgaGF2aW5nIHRvIGRlY3JlbWVudCBUYXNrLmxhc3RJZC5cbiAgICAgICAgaWYgKCFfaXNDbG9uZSkge1xuICAgICAgICAgICAgdGhpcy5hc3NpZ25OZXdJZCgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEZXB0aCh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAtMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsb25lKF9yZWN1cnNpdmUsIF9zdXBlcnRhc2tMaXN0LCBfaWR4KSB7XG4gICAgICAgIHZhciBjbG9uZWQgPSBuZXcgVGFzayh0aGlzLnRpdGxlLCB0aGlzLmR1ZURhdGVTdHIsIHRoaXMuZHVlVGltZVN0ciwgXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLCB0aGlzLnByaW9yaXR5LCB0aGlzLnByb2dyZXNzLCB0aGlzLm5vdGVzLCBcbiAgICAgICAgICAgIG51bGwsIHRydWUpO1xuICAgICAgICBjbG9uZWQuZXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkO1xuICAgICAgICBjbG9uZWQuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgY2xvbmVkLnVzZVByb2dyZXNzRnJvbVN1YnRhc2tzID0gdGhpcy51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcztcblxuICAgICAgICBpZiAoX3N1cGVydGFza0xpc3QpIHtcbiAgICAgICAgICAgIF9zdXBlcnRhc2tMaXN0LmFkZChjbG9uZWQsIF9pZHgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoX3JlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgY2xvbmVkLnN1YnRhc2tMaXN0LmV4cGFuZGVkID0gdGhpcy5zdWJ0YXNrTGlzdC5leHBhbmRlZDtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN1YnRhc2tMaXN0LnRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJ0YXNrTGlzdC50YXNrc1tpXS5jbG9uZShfcmVjdXJzaXZlLCBjbG9uZWQuc3VidGFza0xpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG5cbiAgICB1cGRhdGVEdWUoKSB7XG4gICAgICAgIGxldCB0aW1lem9uZSA9IHRpbWV6b25lU3RyaW5nKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZHVlRGF0ZVN0ciAmJiB0aGlzLmR1ZURhdGVTdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZGF0ZVN0cmluZyA9IGAke3RoaXMuZHVlRGF0ZVN0cn1UMDA6MDA6MDAke3RpbWV6b25lfWA7XG4gICAgICAgICAgICB0aGlzLmR1ZURhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmR1ZVRpbWVTdHIgJiYgdGhpcy5kdWVUaW1lU3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGRhdGVTdHJpbmcgPSBgMjAwMC0wMS0wMVQke3RoaXMuZHVlVGltZVN0cn06MDAke3RpbWV6b25lfWA7XG4gICAgICAgICAgICB0aGlzLmR1ZVRpbWUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZURlcHRoKF9yZWN1cnNpdmUpIHtcbiAgICAgICAgdGhpcy5kZXB0aCA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwZXJ0YXNrTGlzdCA9PSBudWxsKSByZXR1cm47XG5cbiAgICAgICAgbGV0IHN1cGVydGFzayA9IHRoaXMuc3VwZXJ0YXNrTGlzdC5vd25lcjtcbiAgICAgICAgd2hpbGUgKHN1cGVydGFzayAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmRlcHRoKys7XG4gICAgICAgICAgICBzdXBlcnRhc2sgPSBzdXBlcnRhc2suc3VwZXJ0YXNrTGlzdCA/IHN1cGVydGFzay5zdXBlcnRhc2tMaXN0Lm93bmVyIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZShfcmVjdXJzaXZlKSB7XG4gICAgICAgIGlmICh0aGlzLnN1cGVydGFza0xpc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbURpdikge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9tRGl2LnRhc2sucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKF9yZWN1cnNpdmUpIHRoaXMuZG9tRGl2LnN1YnRhc2tzLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXBlcnRhc2tMaXN0LnJlbW92ZUlkKHRoaXMuaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGhhc0NvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5kZXNjcmlwdGlvbiAmJiB0aGlzLmRlc2NyaXB0aW9uICE9IFwiXCIpIHx8XG4gICAgICAgICAgICB0aGlzLnByaW9yaXR5IHx8XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzIHx8XG4gICAgICAgICAgICAodGhpcy5ub3RlcyAmJiB0aGlzLm5vdGVzLmxlbmd0aClcbiAgICB9XG5cbiAgICBsb2coKSB7XG4gICAgICAgIGxvZ2dlci5sb2dUYXNrKHRoaXMpO1xuICAgIH1cblxuICAgIGFzc2lnbk5ld0lkKCkge1xuICAgICAgICB0aGlzLmlkID0gVGFzay5nZW5lcmF0ZUlkKCk7XG4gICAgfVxuXG4gICAgYXNzaWduTmV3SWRSZWN1cnNpdmUoKSB7XG4gICAgICAgIHRoaXMuYXNzaWduTmV3SWQoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3VidGFza0xpc3QudGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc3VidGFza0xpc3QudGFza3NbaV0uYXNzaWduTmV3SWRSZWN1cnNpdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZnJlc2hEb20oX3JlY3Vyc2l2ZSkge1xuICAgICAgICBpZiAodGhpcy5kb21EaXYpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tRGl2LnRhc2sucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZiAoX3JlY3Vyc2l2ZSkgdGhpcy5kb21EaXYuc3VidGFza3MucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcykge1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuZ2V0UHJvZ3Jlc3NSZWN1cnNpdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZG9tRGl2ID0gZG9tLmNyZWF0ZUNhcmQodGhpcyk7XG4gICAgICAgIGxpc3RlbmVyLmFkZEV4cGFuZFRhc2sodGhpcy5kb21EaXYudGFza0V4cGFuZCwgdGhpcywgdGhpcy5kb21EaXYudGFzaywgXG4gICAgICAgICAgICB0aGlzLmRvbURpdi50YXNrRXhwYW5kUGF0aCwgdGhpcy5kb21EaXYuaGVhZGVyKTtcbiAgICAgICAgbGlzdGVuZXIuYWRkT3BlbkVkaXQodGhpcy5kb21EaXYuZWRpdE9wZW4sIHRoaXMpO1xuXG4gICAgICAgIGlmICh0aGlzLmRvbURpdi5uZWVkU3VidGFza3NMaXN0ZW5lcikge1xuICAgICAgICAgICAgbGlzdGVuZXIuYWRkRXhwYW5kU3VidGFza3ModGhpcy5kb21EaXYuc3VidGFza3NFeHBhbmQsIHRoaXMsIFxuICAgICAgICAgICAgICAgIHRoaXMuZG9tRGl2LnN1YnRhc2tzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfcmVjdXJzaXZlKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnRhc2tMaXN0LnJlZnJlc2hEb20oX3JlY3Vyc2l2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmVuIGlmIG5vdCB1ZGF0aW5nIHJlY3Vyc2l2ZWx5LCB3ZSBuZWVkIHRvIGNoZWNrIGFsbCBzdXBlcnRhc2tzIHRvIFxuICAgICAgICAvLyBzZWUgaWYgdGhlaXIgcHJvZ3Jlc3MgdmFsdWVzIGFyZSBjaGFuZ2VkIGJhc2VkIG9uIHRoaXMgdGFzaydzIHByb2dyZXNzXG4gICAgICAgIC8vIGFuZCB1cGRhdGUgdGhlbSBhY2NvcmRpbmdseS5cbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLmNoYWluKSB7XG4gICAgICAgICAgICBpZiAodGFzay51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcykge1xuICAgICAgICAgICAgICAgIHRhc2sucmVmcmVzaERvbShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYXNrcyBzdWJ0YXNrIGxpc3QncyBhZGQgZnVuY3Rpb24gZm9yIGVhc2Ugb2YgdXNlLlxuICAgIGFkZFN1YnRhc2soX3Rhc2ssIF9pZHgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGFza0xpc3QuYWRkKF90YXNrLCBfaWR4KTtcbiAgICB9XG5cbiAgICAvLyBNYXNrcyBzdWJ0YXNrIGxpc3QncyByZW1vdmUgZnVuY3Rpb24gZm9yIGVhc2Ugb2YgdXNlLlxuICAgIHJlbW92ZVN1YnRhc2tJZChfaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGFza0xpc3QucmVtb3ZlSWQoX2lkKTtcbiAgICB9XG5cbiAgICAvLyBNYXNrcyBzdWJ0YXNrIGxpc3QncyByZW1vdmUgZnVuY3Rpb24gZm9yIGVhc2Ugb2YgdXNlLlxuICAgIHJlbW92ZVN1YnRhc2tJZHgoX2lkeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0YXNrTGlzdC5yZW1vdmVJZHgoX2lkeCk7XG4gICAgfVxuXG4gICAgZ2V0UHJvZ3Jlc3NSZWN1cnNpdmUoX3Byb2dyZXNzKSB7XG4gICAgICAgIGlmIChfcHJvZ3Jlc3MgPT0gbnVsbCkgX3Byb2dyZXNzID0gMDtcblxuICAgICAgICBpZiAoIXRoaXMudXNlUHJvZ3Jlc3NGcm9tU3VidGFza3MgJiYgdGhpcy5wcm9ncmVzcyA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2dyZXNzID09IDEgJiYgKF9wcm9ncmVzcyA9PSAxIHx8IF9wcm9ncmVzcyA9PSAwKSkge1xuICAgICAgICAgICAgICAgIF9wcm9ncmVzcyA9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvZ3Jlc3MgPT0gMyAmJiAoX3Byb2dyZXNzID09IDMgfHwgX3Byb2dyZXNzID09IDApKSB7XG4gICAgICAgICAgICAgICAgX3Byb2dyZXNzID0gMztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3Byb2dyZXNzID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy5zdWJ0YXNrTGlzdC50YXNrcykge1xuICAgICAgICAgICAgX3Byb2dyZXNzID0gdGFzay5nZXRQcm9ncmVzc1JlY3Vyc2l2ZShfcHJvZ3Jlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9wcm9ncmVzcztcbiAgICB9XG5cbiAgICAvLyBNYXNrcyBzdWJ0YXNrIGxpc3QncyB0YXNrcyBmb3IgZWFzZSBvZiB1c2UuXG4gICAgZ2V0IHN1YnRhc2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0YXNrTGlzdC50YXNrcztcbiAgICB9XG5cbiAgICAvLyBNYXNrcyBzdXBlcnRhc2sgbGlzdCdzIG93bmVyIGZvciBlYXNlIG9mIHVzZS5cbiAgICBnZXQgc3VwZXJ0YXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdXBlcnRhc2tMaXN0ID8gdGhpcy5zdXBlcnRhc2tMaXN0Lm93bmVyIDogbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCBvZiBhIHRhc2sncyBzdXBlcnRhc2tzIHVwIHRvIHRoZSByb290IHRhc2suIFRoZVxuICAgIC8vIHJvb3QgdGFzayBpcyB0aGUgbGFzdCBpbiB0aGUgYXJyYXkuXG4gICAgZ2V0IGNoYWluKCkge1xuICAgICAgICBsZXQgc3VwZXJ0YXNrID0gdGhpcy5zdXBlcnRhc2tMaXN0Lm93bmVyO1xuICAgICAgICBsZXQgY2hhaW4gPSBbXTtcblxuICAgICAgICB3aGlsZSAoc3VwZXJ0YXNrKSB7XG4gICAgICAgICAgICBjaGFpbi5wdXNoKHN1cGVydGFzayk7XG4gICAgICAgICAgICBzdXBlcnRhc2sgPSBzdXBlcnRhc2suc3VwZXJ0YXNrTGlzdC5vd25lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGFpbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2VuZXJhdGVJZCgpIHtcbiAgICAgICAgLy8gSWYgb3ZlcmZsb3cgaGFwcGVucywgbm8gaXQgZGlkbid0LlxuICAgICAgICBpZiAoVGFzay5sYXN0SWQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIFRhc2subGFzdElkID0gLTE7XG4gICAgICAgIHJldHVybiArK1Rhc2subGFzdElkO1xuICAgIH1cblxuICAgIHN0YXRpYyByZXNldElkcygpIHtcbiAgICAgICAgVGFzay5sYXN0SWQgPSAtMTtcbiAgICB9XG59XG5cbmNsYXNzIFRhc2tMaXN0IHtcbiAgICB0YXNrcztcbiAgICBvd25lcjtcbiAgICBleHBhbmRlZCA9IGZhbHNlO1xuICAgIHN0YXRpYyB3cml0ZUVycm9yU2hvd24gPSBmYWxzZTtcbiAgICBzdGF0aWMgREVGQVVMVF9LRVkgPSBcInRhc2tMaXN0XCI7XG5cbiAgICBjb25zdHJ1Y3Rvcihfb3duZXIsIF90YXNrcykge1xuICAgICAgICB0aGlzLm93bmVyID0gX293bmVyO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG5cbiAgICAgICAgaWYgKF90YXNrcykge1xuICAgICAgICAgICAgX3Rhc2tzLmZvckVhY2goX3Rhc2sgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKF90YXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlVGFzayhfaWR4LCBfc2hvd0lucHV0KSB7XG4gICAgICAgIGlmICghX2lkeCkge1xuICAgICAgICAgICAgX2lkeCA9IHRoaXMudGFza3MubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuZXdUYXNrID0gbmV3IFRhc2soKTtcbiAgICAgICAgdGhpcy5hZGQobmV3VGFzaywgX2lkeCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3duZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3duZXIucmVmcmVzaERvbSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaERvbShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndyaXRlUm9vdFRvTG9jYWxTdG9yYWdlKCk7XG5cbiAgICAgICAgaWYgKF9zaG93SW5wdXQgJiYgIXN0YXRlTWFuYWdlci5jdXJyZW50bHlFZGl0aW5nKSB7XG4gICAgICAgICAgICBsZXQgaW5wdXRCb3ggPSBkb20uY3JlYXRlSW5wdXRCb3gobmV3VGFzayk7XG4gICAgICAgICAgICBsaXN0ZW5lci5hZGRJbnB1dENhcmQobmV3VGFzaywgaW5wdXRCb3gpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkKF90YXNrLCBfaWR4KSB7XG4gICAgICAgIGlmIChfaWR4ID09IG51bGwpIHtcbiAgICAgICAgICAgIF9pZHggPSB0aGlzLnRhc2tzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGFza3Muc3BsaWNlKF9pZHgsIDAsIF90YXNrKTtcbiAgICAgICAgX3Rhc2suc3VwZXJ0YXNrTGlzdCA9IHRoaXM7XG4gICAgICAgIF90YXNrLnVwZGF0ZURlcHRoKHRydWUpO1xuICAgIH1cblxuICAgIGdldFRhc2tJZHgoX3Rhc2spIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrc1tpXS5pZCA9PSBfdGFzay5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHJlbW92ZUlkKF9pZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgTG9va2luZyBmb3IgaWQgJHtfaWR9IGluIHRhc2tzIGxlbmd0aCAke3RoaXMudGFza3MubGVuZ3RofWApO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tzW2ldLmlkID09IF9pZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZW1vdmluZyBpZCAke19pZH0gYXQgaWR4ICR7aX1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVJZHgoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmVtb3ZlSWR4KF9pZHgpIHtcbiAgICAgICAgdGhpcy50YXNrc1tfaWR4XS5zdXBlcnRhc2tMaXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UoX2lkeCwgMSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0VGFza0J5SWQoX2lkLCBfcmVjdXJzaXZlKSB7XG4gICAgICAgIGxldCBpZFRhc2sgPSBudWxsO1xuXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy50YXNrcykge1xuICAgICAgICAgICAgaWYgKHRhc2suaWQgPT0gX2lkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9yZWN1cnNpdmUgJiYgdGFzay5zdWJ0YXNrTGlzdC5oYXNUYXNrcygpKSB7XG4gICAgICAgICAgICAgICAgaWRUYXNrID0gdGFzay5zdWJ0YXNrTGlzdC5nZXRUYXNrQnlJZChfaWQsIF9yZWN1cnNpdmUpO1xuICAgICAgICAgICAgICAgIGlmIChpZFRhc2spIHJldHVybiBpZFRhc2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWRUYXNrO1xuICAgIH1cblxuICAgIGhhc1Rhc2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrcy5sZW5ndGggPj0gMTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm5zIGFuIG9yZGVyZWQgYXJyYXkgb2YgSURzIHRoYXQgcmVmbGVjdHMgdGhlIGN1cnJlbnQgb3JkZXIgb2YgdGFza3NcbiAgICAvLyB3aXRoaW4gdGhlIHRhc2tMaXN0J3MgdHJlZSBzdHJ1Y3R1cmUuXG4gICAgZ2V0SWRPcmRlcihfcmVjdXJzaXZlKSB7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLnRhc2tzKSB7XG4gICAgICAgICAgICBvcmRlci5wdXNoKHRhc2suaWQpO1xuXG4gICAgICAgICAgICBpZiAoX3JlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goLi4udGFzay5zdWJ0YXNrTGlzdC5nZXRJZE9yZGVyKF9yZWN1cnNpdmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcmRlcjtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMudGFza3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2tzWzBdLmRlbGV0ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZnJlc2hEb20oX3JlY3Vyc2l2ZSkge1xuICAgICAgICAvLyBUbyBlbnN1cmUgcHJvcGVyIG9yZGVyLCByZW1vdmUgYWxsIHRhc2tzIGJlZm9yZSByZWRyYXdpbmcgYW55IG9mIHRoZW0uXG4gICAgICAgIHRoaXMudGFza3MuZm9yRWFjaChfdGFzayA9PiB7XG4gICAgICAgICAgICBpZiAoX3Rhc2suZG9tRGl2KSB7XG4gICAgICAgICAgICAgICAgX3Rhc2suZG9tRGl2LnRhc2sucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKF9yZWN1cnNpdmUpIF90YXNrLmRvbURpdi5zdWJ0YXNrcy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50YXNrcy5mb3JFYWNoKF90YXNrID0+IHtcbiAgICAgICAgICAgIF90YXNrLnJlZnJlc2hEb20oX3JlY3Vyc2l2ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50YXNrc1tpXS5yZWZyZXNoRG9tKF9yZWN1cnNpdmUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCB0YXNrIHByb3BlcnRpZXMgdGhhdCBjYW4ndCBiZSBzdHJpbmdpZmllZCBieSBKU09OLiBUaGVzZVxuICAgIC8vIGNhbiBiZSByZWNvbnN0cnVjdGVkIG9uIHByb2plY3QgbG9hZCBldmVuIHdpdGhvdXQgc2F2aW5nIHRoZW0uXG4gICAgY2xvbmVKc29uKCkge1xuICAgICAgICBsZXQganNvblRhc2tMaXN0ID0gbmV3IFRhc2tMaXN0KG51bGwsIG51bGwpO1xuICAgICAgICBqc29uVGFza0xpc3QuZXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkO1xuXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy50YXNrcykge1xuICAgICAgICAgICAgbGV0IGNsb25lZCA9IHRhc2suY2xvbmUoZmFsc2UsIG51bGwpO1xuICAgICAgICAgICAganNvblRhc2tMaXN0LmFkZChjbG9uZWQpO1xuICAgICAgICAgICAgY2xvbmVkLmlkID0gdGFzay5pZDtcbiAgICAgICAgICAgIGNsb25lZC5kZXB0aCA9IHRhc2suZGVwdGg7XG4gICAgICAgICAgICBjbG9uZWQuZHVlRGF0ZSA9IG51bGw7XG4gICAgICAgICAgICBjbG9uZWQuZHVlVGltZSA9IG51bGw7XG4gICAgICAgICAgICBjbG9uZWQuc3VidGFza0xpc3QgPSB0YXNrLnN1YnRhc2tMaXN0LmNsb25lSnNvbigpO1xuICAgICAgICAgICAgY2xvbmVkLnN1cGVydGFza0xpc3QgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGpzb25UYXNrTGlzdDtcbiAgICB9XG5cbiAgICAvLyBSZWJ1aWxkIHRhc2tMaXN0IHN0cnVjdHVyZSBmcm9tIEpTT04gc3RyaW5nIGFuZCByZWNhbGN1bGF0ZSB0aGUgdmFsdWVzIFxuICAgIC8vIHRoYXQgd2VyZW4ndCBzYXZlZCBpbiB0aGUgc3RyaW5nLiBBbnkgY3VycmVudCBjb250ZW50cyBvZiB0aGlzIHRhc2tMaXN0XG4gICAgLy8gd2lsbCBiZSBkZWxldGVkIGFuZCByZXBsYWNlZCBieSB0aGUgSlNPTiBkYXRhLlxuICAgIGluaXRGcm9tSnNvbihfanNvbk9iaiwgX293bmVyKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBfb3duZXI7XG4gICAgICAgIHRoaXMuZXhwYW5kZWQgPSBfanNvbk9iai5leHBhbmRlZDtcblxuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiBfanNvbk9iai50YXNrcykge1xuICAgICAgICAgICAgbGV0IGxvYWRlZFRhc2sgPSBuZXcgVGFzayh0YXNrLnRpdGxlLCB0YXNrLmR1ZURhdGVTdHIsIHRhc2suZHVlVGltZVN0cixcbiAgICAgICAgICAgICAgICB0YXNrLmRlc2NyaXB0aW9uLCB0YXNrLnByaW9yaXR5LCB0YXNrLnByb2dyZXNzLCB0YXNrLm5vdGVzLFxuICAgICAgICAgICAgICAgIHRoaXMsIGZhbHNlKTtcbiAgICAgICAgICAgIGxvYWRlZFRhc2suZXhwYW5kZWQgPSB0YXNrLmV4cGFuZGVkO1xuICAgICAgICAgICAgbG9hZGVkVGFzay51c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcyA9IHRhc2sudXNlUHJvZ3Jlc3NGcm9tU3VidGFza3M7XG4gICAgICAgICAgICBsb2FkZWRUYXNrLnN1YnRhc2tMaXN0LmluaXRGcm9tSnNvbih0YXNrLnN1YnRhc2tMaXN0LCBsb2FkZWRUYXNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdyaXRlVG9Mb2NhbFN0b3JhZ2UoX2tleSkge1xuICAgICAgICBpZiAoc3RvcmFnZUF2YWlsYWJsZShcImxvY2FsU3RvcmFnZVwiKSkge1xuICAgICAgICAgICAgaWYgKCFfa2V5KSB7XG4gICAgICAgICAgICAgICAgX2tleSA9IFRhc2tMaXN0LkRFRkFVTFRfS0VZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQganNvblN0ciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY2xvbmVKc29uKCkpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oX2tleSwganNvblN0cik7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCFUYXNrTGlzdC53cml0ZUVycm9yU2hvd24pIHtcbiAgICAgICAgICAgIFRhc2tMaXN0LndyaXRlRXJyb3JTaG93biA9IHRydWU7XG4gICAgICAgICAgICBhbGVydChcIllvdXIgYnJvd3NlciBlaXRoZXIgZG9lc24ndCBzdXBwb3J0IGxvY2FsIHN0b3JhZ2Ugb3IgaGFzIGl0IGRpc2FibGVkLCBzbyB5b3VyIHRhc2tzIHdpbGwgbm90IGJlIHNhdmVkIGFmdGVyIGxlYXZpbmcgdGhpcyBwYWdlLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB3cml0ZVJvb3RUb0xvY2FsU3RvcmFnZShfa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLm93bmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3Qud3JpdGVUb0xvY2FsU3RvcmFnZShfa2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVUb0xvY2FsU3RvcmFnZShfa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc3RvcmVGcm9tTG9jYWxTdG9yYWdlKF9rZXkpIHtcbiAgICAgICAgaWYgKHN0b3JhZ2VBdmFpbGFibGUoXCJsb2NhbFN0b3JhZ2VcIikpIHtcbiAgICAgICAgICAgIGlmICghX2tleSkge1xuICAgICAgICAgICAgICAgIF9rZXkgPSBUYXNrTGlzdC5ERUZBVUxUX0tFWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGpzb25PYmogPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShfa2V5KTtcblxuICAgICAgICAgICAgaWYgKGpzb25PYmopIHtcbiAgICAgICAgICAgICAgICBUYXNrLnJlc2V0SWRzKCk7XG4gICAgICAgICAgICAgICAgbGV0IGpzb25TdHIgPSBKU09OLnBhcnNlKGpzb25PYmopO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEZyb21Kc29uKGpzb25TdHIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERvbSh0cnVlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNsZWFyTG9jYWxTdG9yYWdlKF9rZXkpIHtcbiAgICAgICAgaWYgKHN0b3JhZ2VBdmFpbGFibGUoXCJsb2NhbFN0b3JhZ2VcIikpIHtcbiAgICAgICAgICAgIGlmICghX2tleSkge1xuICAgICAgICAgICAgICAgIF9rZXkgPSBUYXNrTGlzdC5ERUZBVUxUX0tFWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX2tleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3duZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm93bmVyLmNoYWluLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm93bmVyLmNoYWluW3RoaXMub3duZXIuY2hhaW4ubGVuZ3RoIC0gMV0uc3VwZXJ0YXNrTGlzdDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuc3VwZXJ0YXNrTGlzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxubGV0IHN0YXRlTWFuYWdlciA9IChmdW5jdGlvbigpIHtcbiAgICBsZXQgY3VycmVudGx5RWRpdGluZyA9IGZhbHNlO1xuICAgIGxldCBzZWxlY3Rpb25BZGRUbyA9IGZhbHNlO1xuICAgIGxldCBzZWxlY3Rpb25NYXNzID0gZmFsc2U7XG4gICAgbGV0IHRvdWNoID0ge1xuICAgICAgICB0aW1lOiBbIG51bGwsIG51bGwgXSxcbiAgICAgICAgcG9zOiBbIG51bGwsIG51bGwgXSxcbiAgICAgICAgdG91Y2hlZElkOiBbIG51bGwsIG51bGwgXVxuICAgIH07XG5cbiAgICBsZXQgc2V0U2VsZWN0aW9uQWRkVG8gPSBmdW5jdGlvbihfc3RhdGUsIF9lKSB7XG4gICAgICAgIGlmIChfZS5rZXkgPT0gXCJDb250cm9sXCIpIHtcbiAgICAgICAgICAgIHN0YXRlTWFuYWdlci5zZWxlY3Rpb25BZGRUbyA9IF9zdGF0ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzZXRTZWxlY3Rpb25NYXNzID0gZnVuY3Rpb24oX3N0YXRlLCBfZSkge1xuICAgICAgICBpZiAoX2Uua2V5ID09IFwiU2hpZnRcIikge1xuICAgICAgICAgICAgc3RhdGVNYW5hZ2VyLnNlbGVjdGlvbk1hc3MgPSBfc3RhdGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50bHlFZGl0aW5nLFxuICAgICAgICBzZWxlY3Rpb25BZGRUbyxcbiAgICAgICAgc2VsZWN0aW9uTWFzcyxcbiAgICAgICAgc2V0U2VsZWN0aW9uQWRkVG8sXG4gICAgICAgIHNldFNlbGVjdGlvbk1hc3MsXG4gICAgICAgIHRvdWNoXG4gICAgfTtcbn0pKCk7XG5cbmxldCBsb2dnZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgbGV0IGxvZ1Rhc2sgPSBmdW5jdGlvbihfdGFzaywgX3ByZXBlbmQpIHtcbiAgICAgICAgaWYgKCFfcHJlcGVuZCkgX3ByZXBlbmQgPSBcIlwiO1xuICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIFwiLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgY29uc29sZS5sb2coX3ByZXBlbmQgKyBcIlRpdGxlOiBcIiArIF90YXNrLnRpdGxlKTtcbiAgICAgICAgY29uc29sZS5sb2coX3ByZXBlbmQgKyBcIkR1ZSBkYXRlOiBcIiArIF90YXNrLmR1ZURhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIFwiRHVlIHRpbWU6IFwiICsgX3Rhc2suZHVlVGltZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKF9wcmVwZW5kICsgXCJEZXNjcmlwdGlvbjogXCIgKyBfdGFzay5kZXNjcmlwdGlvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKF9wcmVwZW5kICsgXCJQcm9ncmVzczogXCIgKyBfdGFzay5wcm9ncmVzcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKF9wcmVwZW5kICsgXCJOb3RlczogIFwiICsgX3Rhc2subm90ZXMpO1xuICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIFwiSUQ6IFwiICsgX3Rhc2suaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIFwiRGVwdGg6IFwiICsgX3Rhc2suZGVwdGgpO1xuICAgICAgICBpZiAoX3Rhc2suc3VwZXJ0YXNrTGlzdCAmJiBfdGFzay5zdXBlcnRhc2tMaXN0Lm93bmVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIFwiU3VwZXJ0YXNrOiAoXCIgKyBfdGFzay5zdXBlcnRhc2tMaXN0Lm93bmVyLmlkICsgXG4gICAgICAgICAgICBcIikgXCIgKyBfdGFzay5zdXBlcnRhc2tMaXN0Lm93bmVyLnRpdGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9wcmVwZW5kICsgXCJObyBzdXBlcnRhc2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChfdGFzay5zdWJ0YXNrTGlzdC5oYXNUYXNrcygpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfcHJlcGVuZCArIF90YXNrLnN1YnRhc2tMaXN0LnRhc2tzLmxlbmd0aCArIFxuICAgICAgICAgICAgICAgIFwiIHN1YnRhc2tcIiArIChfdGFzay5zdWJ0YXNrTGlzdC50YXNrcy5sZW5ndGggIT0gMSA/IFwiczpcIiA6IFwiOlwiKSk7XG5cbiAgICAgICAgICAgIF90YXNrLnN1YnRhc2tMaXN0LnRhc2tzLmZvckVhY2goX2VsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGxvZ1Rhc2soX2VsZW0sIF9wcmVwZW5kICsgXCIqICAgXCIpO1xuICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGxvZ1Rhc2tcbiAgICB9O1xufSkoKTtcblxubGV0IGNvcGllciA9IChmdW5jdGlvbigpIHtcbiAgICBjb25zdCBidWZmZXIgPSBbXTtcblxuICAgIGxldCByZW1vdmUgPSBmdW5jdGlvbihfdGFza3MsIF9yZWN1cnNpdmUsIF9yZWZyZXNoKSB7XG4gICAgICAgIGlmICghKF90YXNrcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgX3Rhc2tzID0gWyBfdGFza3MgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfcmVjdXJzaXZlKSB7XG4gICAgICAgICAgICBfdGFza3MgPSByZWR1Y2VSZWN1cnNpdmVJbnB1dChfdGFza3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJvb3QgPSBfdGFza3NbMF0uc3VwZXJ0YXNrTGlzdC5yb290O1xuXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgX3Rhc2tzKSB7XG4gICAgICAgICAgICBsZXQgaW5zZXJ0SWR4ID0gdGFzay5zdXBlcnRhc2tMaXN0LmdldFRhc2tJZHgodGFzayk7XG4gICAgICAgICAgICBsZXQgc3VwZXJ0YXNrTGlzdCA9IHRhc2suc3VwZXJ0YXNrTGlzdDtcbiAgICAgICAgICAgIGxldCBzdWJ0YXNrTGlzdCA9IHRhc2suc3VidGFza0xpc3Q7XG4gICAgICAgICAgICB0YXNrLmRlbGV0ZSh0cnVlKTtcbiAgICBcbiAgICAgICAgICAgIGlmICghX3JlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3VidGFza0xpc3QudGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwZXJ0YXNrTGlzdC5hZGQoc3VidGFza0xpc3QudGFza3NbaV0sIGluc2VydElkeCsrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoX3JlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3VwZXJ0YXNrTGlzdC5vd25lcikge1xuICAgICAgICAgICAgICAgICAgICBzdXBlcnRhc2tMaXN0Lm93bmVyLnJlZnJlc2hEb20odHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwZXJ0YXNrTGlzdC5yZWZyZXNoRG9tKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJvb3Qud3JpdGVUb0xvY2FsU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIGxldCBjb3B5ID0gZnVuY3Rpb24oX3Rhc2tzLCBfcmVjdXJzaXZlLCBfZ2xvYmFsVGFza0xpc3QpIHtcbiAgICAgICAgaWYgKCEoX3Rhc2tzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICBfdGFza3MgPSBbIF90YXNrcyBdO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJCdWZmZXIoKTtcblxuICAgICAgICBpZiAoX3JlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgX3Rhc2tzID0gcmVkdWNlUmVjdXJzaXZlSW5wdXQoX3Rhc2tzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRhc2tzIGFyZSBjb3BpZWQgaW4gdmlzdWFsIG9yZGVyIGFuZCBub3QgaW4gc2VsZWN0aW9uIG9yZGVyLlxuICAgICAgICBsZXQgaWRPcmRlciA9IF9nbG9iYWxUYXNrTGlzdC5nZXRJZE9yZGVyKHRydWUpO1xuICAgICAgICBfdGFza3Muc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gaWRPcmRlci5pbmRleE9mKGEuaWQpIDwgaWRPcmRlci5pbmRleE9mKGIuaWQpID8gLTEgOiAxO1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGxldCB0YXNrIG9mIF90YXNrcykge1xuICAgICAgICAgICAgYnVmZmVyLnB1c2godGFzay5jbG9uZShfcmVjdXJzaXZlKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY3V0ID0gZnVuY3Rpb24oX3Rhc2tzLCBfcmVjdXJzaXZlLCBfcmVmcmVzaCwgX2dsb2JhbFRhc2tMaXN0KSB7XG4gICAgICAgIGlmICghKF90YXNrcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgX3Rhc2tzID0gWyBfdGFza3MgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29weShfdGFza3MsIF9yZWN1cnNpdmUsIF9nbG9iYWxUYXNrTGlzdCk7XG4gICAgICAgIHRoaXMucmVtb3ZlKF90YXNrcywgX3JlY3Vyc2l2ZSk7XG4gICAgfVxuXG4gICAgbGV0IHBhc3RlID0gZnVuY3Rpb24oX3Rhc2tMaXN0LCBfaWR4KSB7XG4gICAgICAgIC8vIEFsbG93IF90YXNrTGlzdCB0byBiZSBwYXNzZWQgYXMgaXRzIG93bmluZyB0YXNrIGZvciBlYXNlIG9mIHVzZS5cbiAgICAgICAgaWYgKF90YXNrTGlzdCBpbnN0YW5jZW9mIFRhc2spIHtcbiAgICAgICAgICAgIF90YXNrTGlzdCA9IF90YXNrTGlzdC5zdWJ0YXNrTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBidWZJdGVtIG9mIGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGxldCBjbG9uZWQgPSBidWZJdGVtLmNsb25lKHRydWUsIF90YXNrTGlzdCwgX2lkeCsrKTtcbiAgICAgICAgICAgICAgICBjbG9uZWQuYXNzaWduTmV3SWRSZWN1cnNpdmUoKTtcbiAgICAgICAgICAgICAgICBjbG9uZWQudXBkYXRlRGVwdGgodHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfdGFza0xpc3Qub3duZXIpIHtcbiAgICAgICAgICAgICAgICBfdGFza0xpc3Qub3duZXIucmVmcmVzaERvbSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3Rhc2tMaXN0LnJlZnJlc2hEb20odHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90YXNrTGlzdC53cml0ZVJvb3RUb0xvY2FsU3RvcmFnZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgcmVkdWNlUmVjdXJzaXZlSW5wdXQgPSBmdW5jdGlvbihfdGFza3MpIHtcbiAgICAgICAgY29uc3QgcmVkdWNlZCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgX3Rhc2tzKSB7XG4gICAgICAgICAgICAvLyBJZiBjb3B5aW5nIHJlY3Vyc2l2ZWx5LCBtYWtlIHN1cmUgd2UncmUgb25seSBjb3B5aW5nIGVhY2ggdGFza1xuICAgICAgICAgICAgLy8gb25jZSwgYmVjYXVzZSB0aGVsZXQgdXNlciBtYXkgaGF2ZSBleHBsaWNpdGx5IHNlbGVjdGVkIHN1YnRhc2tzIHRoYXQgXG4gICAgICAgICAgICAvLyB3aWxsIGFsc28gYmUgYXV0b21hdGljYWxseSBwaWNrZWQgdXAgYnkgdGhlIHJlY3Vyc2lvbi5cbiAgICAgICAgICAgIGxldCBjaGFpbiA9IHRhc2suY2hhaW47XG4gICAgICAgICAgICBsZXQgdGFza0lzU3VidGFzayA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBJZiBhbnkgb2YgdGhlIHNlbGVjdGVkIHRhc2tzIGlzIGZvdW5kIGluIHRoaXMgdGFzaydzIHN1cGVyIFxuICAgICAgICAgICAgLy8gY2hhaW4sIHRoZW4gZG9uJ3QgY29weSB0aGlzIHRhc2sgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGluY2x1ZGVkXG4gICAgICAgICAgICAvLyBpbiB0aGUgcmVjdXJzaXZlIGNvcHkuXG4gICAgICAgICAgICBmb3IgKGxldCBwb3NzaWJsZVN1cGVyIG9mIF90YXNrcykge1xuICAgICAgICAgICAgICAgIGlmIChjaGFpbi5pbmNsdWRlcyhwb3NzaWJsZVN1cGVyKSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrSXNTdWJ0YXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRhc2tJc1N1YnRhc2spIHtcbiAgICAgICAgICAgICAgICByZWR1Y2VkLnB1c2godGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICB9XG5cbiAgICBsZXQgY2xlYXJCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYnVmZmVyLnNwbGljZSgwLCBidWZmZXIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBidWZmZXIsXG4gICAgICAgIHJlbW92ZSxcbiAgICAgICAgY29weSxcbiAgICAgICAgY3V0LFxuICAgICAgICBwYXN0ZSxcbiAgICAgICAgY2xlYXJCdWZmZXJcbiAgICB9XG59KSgpO1xuXG5sZXQgc2VsZWN0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkID0gW107XG5cbiAgICBsZXQgYWRkID0gZnVuY3Rpb24oX3Rhc2spIHtcbiAgICAgICAgaWYgKCFjb250YWlucyhfdGFzaykpIHtcbiAgICAgICAgICAgIF90YXNrLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goX3Rhc2spO1xuICAgICAgICAgICAgZG9tLnNlbGVjdChfdGFzay5pZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IGFkZEV4Y2x1c2l2ZSA9IGZ1bmN0aW9uKF90YXNrKSB7XG4gICAgICAgIGNsZWFyKCk7XG4gICAgICAgIF90YXNrLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgYWRkKF90YXNrKTtcbiAgICB9O1xuXG4gICAgbGV0IHJlbW92ZSA9IGZ1bmN0aW9uKF90YXNrKSB7XG4gICAgICAgIGxldCBpZHggPSBzZWxlY3RlZC5pbmRleE9mKF90YXNrKTtcblxuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgX3Rhc2suc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvbS51bnNlbGVjdChfdGFzay5pZCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBsZXQgY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiBzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGFzay5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZG9tLnVuc2VsZWN0KHRhc2suaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWQuc3BsaWNlKDAsIHNlbGVjdGVkLmxlbmd0aCk7XG4gICAgfTtcblxuICAgIGxldCBjb250YWlucyA9IGZ1bmN0aW9uKF90YXNrKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZC5pbmRleE9mKF90YXNrKSA+PSAwO1xuICAgIH07XG5cbiAgICBsZXQgdXBkYXRlU2VsZWN0aW9uID0gZnVuY3Rpb24oX3Rhc2spIHtcbiAgICAgICAgaWYgKHN0YXRlTWFuYWdlci5zZWxlY3Rpb25NYXNzKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGlvbi5zZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYWRkRXhjbHVzaXZlKF90YXNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkT3JkZXIgPSB0YXNrTGlzdC5nZXRJZE9yZGVyKHRydWUpO1xuICAgICAgICAgICAgICAgIGxldCBzdGFydElkeCA9IGlkT3JkZXIuaW5kZXhPZihzZWxlY3Rpb24uc2VsZWN0ZWRbMF0uaWQpO1xuICAgICAgICAgICAgICAgIGxldCBlbmRJZHggPSBpZE9yZGVyLmluZGV4T2YoX3Rhc2suaWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChlbmRJZHggPCBzdGFydElkeCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYnVmZmVyID0gc3RhcnRJZHg7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0SWR4ID0gZW5kSWR4O1xuICAgICAgICAgICAgICAgICAgICBlbmRJZHggPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyByZXRhaW4gdGhlIHNhbWUgZmlyc3Qgc2VsZWN0ZWQgdGFzay5cbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYWRkRXhjbHVzaXZlKHNlbGVjdGlvbi5zZWxlY3RlZFswXSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJZHg7IGkgPD0gZW5kSWR4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkT3JkZXJbaV0gIT0gc2VsZWN0aW9uLnNlbGVjdGVkWzBdLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYWRkKHRhc2tMaXN0LmdldFRhc2tCeUlkKGlkT3JkZXJbaV0sIHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGNsaWNrZWQgdGFzayB0byBzZWxlY3Rpb24uXG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGVNYW5hZ2VyLnNlbGVjdGlvbkFkZFRvKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmNvbnRhaW5zKF90YXNrKSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5yZW1vdmUoX3Rhc2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYWRkKF90YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgLy8gU2VsZWN0IG9ubHkgY2xpY2tlZCB0YXNrLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0aW9uLmFkZEV4Y2x1c2l2ZShfdGFzayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdHJpZ2dlck1lbnUgPSBmdW5jdGlvbihfY2xpZW50WCwgX2NsaWVudFksIF9zZWxlY3Rpb25BZGRUbywgX2lzVG91Y2gpIHtcbiAgICAgICAgbGV0IHRhc2sgPSB0YXNrTGlzdC5nZXRUYXNrQnlJZChkb20uZ2V0VGFza0lkQXRQb3MoX2NsaWVudFgsIFxuICAgICAgICAgICAgX2NsaWVudFkpLCB0cnVlKTtcbiAgICBcbiAgICAgICAgaWYgKHRhc2sgJiYgIXNlbGVjdGVkLmluY2x1ZGVzKHRhc2spKSB7XG4gICAgICAgICAgICB1cGRhdGVTZWxlY3Rpb24odGFzayk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2xhc3NlcyA9IG51bGw7XG5cbiAgICAgICAgaWYgKF9pc1RvdWNoKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gWyBcInRvdWNoLW1lbnVcIiBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhc2sgJiYgc2VsZWN0aW9uLnNlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG1lbnUgPSBidWlsZFRhc2tNZW51KHRhc2ssIGNsYXNzZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG1lbnUgPSBidWlsZEJnTWVudShjbGFzc2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFwcGVuZENoaWxkKG1lbnUuc3ZnKTtcbiAgICAgICAgbWVudS5idXR0b25Eb3duKF9jbGllbnRYLCBfY2xpZW50WSk7XG4gICAgfTtcblxuICAgIGxldCBidWlsZFRhc2tNZW51ID0gZnVuY3Rpb24oX3Rhc2ssIF9jbGFzc2VzKSB7XG4gICAgICAgIGRvbS5mcmVlemUoKTtcbiAgICAgICAgbGV0IG1lbnVUZXh0cyA9IFsgXCJOZXcgdGFzayAoYWJvdmUpXCIsIFwiTmV3IHRhc2sgKGJlbG93KVwiLCBcbiAgICAgICAgICAgIFwiTmV3IHRhc2sgKGFzIHN1YnRhc2spXCIsIFwiQ29weSAod2l0aCBzdWJ0YXNrcylcIiwgXG4gICAgICAgICAgICBcIkNvcHkgKHdpdGhvdXQgc3VidGFza3MpXCIsIFwiQ3V0ICh3aXRoIHN1YnRhc2tzKVwiLCBcbiAgICAgICAgICAgIFwiQ3V0ICh3aXRob3V0IHN1YnRhc2tzKVwiIF07XG4gICAgICAgIGxldCBtZW51RnVuY3Rpb25zID0gW1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7X3Rhc2suc3VwZXJ0YXNrTGlzdC5jcmVhdGVUYXNrKFxuICAgICAgICAgICAgICAgIF90YXNrLnN1cGVydGFza0xpc3QuZ2V0VGFza0lkeChfdGFzayksIHRydWUpO30sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtfdGFzay5zdXBlcnRhc2tMaXN0LmNyZWF0ZVRhc2soXG4gICAgICAgICAgICAgICAgX3Rhc2suc3VwZXJ0YXNrTGlzdC5nZXRUYXNrSWR4KF90YXNrKSArIDEsIHRydWUpO30sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtfdGFzay5zdWJ0YXNrTGlzdC5jcmVhdGVUYXNrKG51bGwsIHRydWUpO30sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtjb3BpZXIuY29weShzZWxlY3Rpb24uc2VsZWN0ZWQsIHRydWUsIHRhc2tMaXN0KTt9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7Y29waWVyLmNvcHkoc2VsZWN0aW9uLnNlbGVjdGVkLCBmYWxzZSwgdGFza0xpc3QpO30sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtjb3BpZXIuY3V0KHNlbGVjdGlvbi5zZWxlY3RlZCwgdHJ1ZSwgdHJ1ZSwgdGFza0xpc3QpO30sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtjb3BpZXIuY3V0KHNlbGVjdGlvbi5zZWxlY3RlZCwgZmFsc2UsIHRydWUsIHRhc2tMaXN0KTt9XG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gT25seSBzaG93IHBhc3RlIG9wdGlvbiBpZiB0aGVyZSdzIHNvbWV0aGluZyB0byBwYXN0ZS5cbiAgICAgICAgaWYgKGNvcGllci5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBtZW51VGV4dHMucHVzaChcIlBhc3RlIChhYm92ZSlcIiwgXCJQYXN0ZSAoYmVsb3cpXCIsIFwiUGFzdGUgKGFzIHN1YnRhc2spXCIpO1xuICAgICAgICAgICAgbWVudUZ1bmN0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2NvcGllci5wYXN0ZShfdGFzay5zdXBlcnRhc2tMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgX3Rhc2suc3VwZXJ0YXNrTGlzdC5nZXRUYXNrSWR4KF90YXNrKSk7fSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtjb3BpZXIucGFzdGUodGFzay5zdXBlcnRhc2tMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgX3Rhc2suc3VwZXJ0YXNrTGlzdC5nZXRUYXNrSWR4KF90YXNrKSArIDEpO30sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7Y29waWVyLnBhc3RlKF90YXNrLnN1YnRhc2tMaXN0KTt9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudVRleHRzLnB1c2goXCJEZWxldGUgKHdpdGggc3VidGFza3MpXCIsXG4gICAgICAgICAgICBcIkRlbGV0ZSAod2l0aG91dCBzdWJ0YXNrcylcIik7XG4gICAgICAgIG1lbnVGdW5jdGlvbnMucHVzaChmdW5jdGlvbigpIHtjb3BpZXIucmVtb3ZlKHNlbGVjdGlvbi5zZWxlY3RlZCwgdHJ1ZSwgXG4gICAgICAgICAgICAgICAgdHJ1ZSl9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7Y29waWVyLnJlbW92ZShzZWxlY3Rpb24uc2VsZWN0ZWQsIGZhbHNlLCBcbiAgICAgICAgICAgICAgICB0cnVlKX1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgbGV0IG1lbnUgPSBuZXcgUmlnaHRDbGlja01lbnUobWVudVRleHRzLCBtZW51RnVuY3Rpb25zLCBfY2xhc3Nlcyk7XG5cbiAgICAgICAgcmV0dXJuIG1lbnU7XG4gICAgfTtcblxuICAgIGxldCBidWlsZEJnTWVudSA9IGZ1bmN0aW9uKF9jbGFzc2VzKSB7XG4gICAgICAgIGRvbS5mcmVlemUoKTtcbiAgICAgICAgbGV0IG1lbnVUZXh0cyA9IFsgXCJOZXcgdGFza1wiXTtcbiAgICAgICAgbGV0IG1lbnVGdW5jdGlvbnMgPSBbXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt0YXNrTGlzdC5jcmVhdGVUYXNrKHRhc2tMaXN0LnRhc2tzLmxlbmd0aCwgXG4gICAgICAgICAgICAgICAgdHJ1ZSk7fVxuICAgICAgICBdO1xuXG4gICAgICAgIGlmIChjb3BpZXIuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgbWVudVRleHRzLnB1c2goXCJQYXN0ZVwiKTtcbiAgICAgICAgICAgIG1lbnVGdW5jdGlvbnMucHVzaChmdW5jdGlvbigpIHtjb3BpZXIucGFzdGUodGFza0xpc3QsIFxuICAgICAgICAgICAgICAgIHRhc2tMaXN0LnRhc2tzLmxlbmd0aCl9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZW51ID0gbmV3IFJpZ2h0Q2xpY2tNZW51KG1lbnVUZXh0cywgbWVudUZ1bmN0aW9ucywgX2NsYXNzZXMpO1xuXG4gICAgICAgIHJldHVybiBtZW51O1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgYWRkLFxuICAgICAgICBhZGRFeGNsdXNpdmUsXG4gICAgICAgIHJlbW92ZSxcbiAgICAgICAgY2xlYXIsXG4gICAgICAgIGNvbnRhaW5zLFxuICAgICAgICB1cGRhdGVTZWxlY3Rpb24sXG4gICAgICAgIHRyaWdnZXJNZW51XG4gICAgfVxufSkoKTtcblxubGV0IGxpc3RlbmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGxldCBhZGRMZWZ0Q2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9lID0+IHtcbiAgICAgICAgICAgIGxldCB0YXNrID0gdGFza0xpc3QuZ2V0VGFza0J5SWQoZG9tLmdldFRhc2tJZEF0UG9zKF9lLmNsaWVudFgsIFxuICAgICAgICAgICAgICAgIF9lLmNsaWVudFkpLCB0cnVlKTtcbiAgICAgICAgICAgIGxldCB1bmRlck1vdXNlID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoX2UuY2xpZW50WCwgX2UuY2xpZW50WSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghc3RhdGVNYW5hZ2VyLmN1cnJlbnRseUVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9lLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJpbnB1dC1idXR0b25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi51cGRhdGVTZWxlY3Rpb24odGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmVlZENsZWFyID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtIG9mIHVuZGVyTW91c2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWV4cGFuZC1pbWdcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcInN1YnRhc2tzLXBsdXMtaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRDbGVhciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRDbGVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIF9lID0+IHtcbiAgICAgICAgICAgIGlmIChfZS5idXR0b24gPT0gMCAmJiAhc3RhdGVNYW5hZ2VyLmN1cnJlbnRseUVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBkb20udGhhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBfZSA9PiB7XG4gICAgICAgICAgICBzdGF0ZU1hbmFnZXIudG91Y2gudGltZS5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICBzdGF0ZU1hbmFnZXIudG91Y2gudGltZS5wdXNoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcblxuICAgICAgICAgICAgc3RhdGVNYW5hZ2VyLnRvdWNoLnBvcy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICBzdGF0ZU1hbmFnZXIudG91Y2gucG9zLnB1c2goeyB4OiBfZS50b3VjaGVzWzBdLmNsaWVudFgsIFxuICAgICAgICAgICAgICAgIHk6IF9lLnRvdWNoZXNbMF0uY2xpZW50WSB9KTtcblxuICAgICAgICAgICAgaWYgKHN0YXRlTWFuYWdlci50b3VjaC50aW1lWzBdICYmIFxuICAgICAgICAgICAgICAgIHN0YXRlTWFuYWdlci50b3VjaC50aW1lWzFdIC0gc3RhdGVNYW5hZ2VyLnRvdWNoLnRpbWVbMF08IDMwMCkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzdGF0ZU1hbmFnZXIudG91Y2gucG9zWzFdLnggLSBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlTWFuYWdlci50b3VjaC5wb3NbMF0ueCkgPCA0MCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoc3RhdGVNYW5hZ2VyLnRvdWNoLnBvc1sxXS55IC0gXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU1hbmFnZXIudG91Y2gucG9zWzBdLnkpIDwgNDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLnRyaWdnZXJNZW51KHN0YXRlTWFuYWdlci50b3VjaC5wb3NbMV0ueCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU1hbmFnZXIudG91Y2gucG9zWzFdLnksIHN0YXRlTWFuYWdlci5zZWxlY3Rpb25BZGRUbywgXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXRlTWFuYWdlci50b3VjaC50b3VjaGVkSWQuc3BsaWNlKDAsIDEpO1xuICAgICAgICAgICAgc3RhdGVNYW5hZ2VyLnRvdWNoLnRvdWNoZWRJZC5wdXNoKGRvbS5nZXRUYXNrSWRBdFBvcyhcbiAgICAgICAgICAgICAgICBfZS50b3VjaGVzWzBdLmNsaWVudFgsIF9lLnRvdWNoZXNbMF0uY2xpZW50WSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXQgbGFzdCB0b3VjaGVkIHRvIFwiICsgc3RhdGVNYW5hZ2VyLnRvdWNoLnRvdWNoZWRJZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgYWRkUmlnaHRDbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKF9lKSA9PiB7XG4gICAgICAgICAgICBfZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIF9lID0+IHtcbiAgICAgICAgICAgIGlmIChfZS5idXR0b24gPT0gMiAmJiAhc3RhdGVNYW5hZ2VyLmN1cnJlbnRseUVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24udHJpZ2dlck1lbnUoX2UuY2xpZW50WCwgX2UuY2xpZW50WSwgXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlTWFuYWdlci5zZWxlY3Rpb25BZGRUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgYWRkTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIF9lID0+IHtcbiAgICAgICAgICAgIHN0YXRlTWFuYWdlci5zZXRTZWxlY3Rpb25BZGRUby5iaW5kKHN0YXRlTWFuYWdlciwgdHJ1ZSwgX2UpKCk7XG4gICAgICAgICAgICBzdGF0ZU1hbmFnZXIuc2V0U2VsZWN0aW9uTWFzcy5iaW5kKHN0YXRlTWFuYWdlciwgdHJ1ZSwgX2UpKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIF9lID0+IHtcbiAgICAgICAgICAgIHN0YXRlTWFuYWdlci5zZXRTZWxlY3Rpb25BZGRUby5iaW5kKHN0YXRlTWFuYWdlciwgZmFsc2UsIF9lKSgpO1xuICAgICAgICAgICAgc3RhdGVNYW5hZ2VyLnNldFNlbGVjdGlvbk1hc3MuYmluZChzdGF0ZU1hbmFnZXIsIGZhbHNlLCBfZSkoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGxldCBhZGRDbGVhckRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGNsZWFyRGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXItZGF0YVwiKTtcbiAgICAgICAgY2xlYXJEYXRhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlTWFuYWdlci5jdXJyZW50bHlFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNob3VsZERlbGV0ZSA9IGNvbmZpcm0oXG4gICAgICAgICAgICAgICAgICAgIFwiVGhpcyB3aWxsIGRlbGV0ZSBhbGwgc2F2ZWQgZGF0YS4gQ29udGludWU/XCIpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRGVsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0LmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0LmNsZWFyTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgbGV0IGFkZEV4cGFuZFN1YnRhc2tzID0gZnVuY3Rpb24oX2VsZW0sIF90YXNrLCBfc3VidGFza3NFbGVtKSB7XG4gICAgICAgIF9lbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXRlTWFuYWdlci5jdXJyZW50bHlFZGl0aW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgIF90YXNrLnN1YnRhc2tMaXN0LmV4cGFuZGVkID0gIV90YXNrLnN1YnRhc2tMaXN0LmV4cGFuZGVkO1xuICAgICAgICAgICAgZG9tLnNldFN1YnRhc2tFeHBhbmRWaWV3KF90YXNrLnN1YnRhc2tMaXN0LmV4cGFuZGVkLCBfc3VidGFza3NFbGVtLCBcbiAgICAgICAgICAgICAgICBfdGFzaywgc3RhdGVNYW5hZ2VyLnNlbGVjdGlvbkFkZFRvKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGxldCBhZGRFeHBhbmRUYXNrID0gZnVuY3Rpb24oX2VsZW0sIF90YXNrLCBfdGFza0VsZW0sIF9zdmdQYXRoRWxlbSwgXG4gICAgICAgICAgICBfaGVhZGVyRWxlbSkge1xuICAgICAgICBfZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX2V2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0ZU1hbmFnZXIuY3VycmVudGx5RWRpdGluZykgcmV0dXJuO1xuICAgICAgICAgICAgX3Rhc2suZXhwYW5kZWQgPSAhX3Rhc2suZXhwYW5kZWQ7XG4gICAgICAgICAgICBkb20udXBkYXRlVGFza0V4cGFuZFZpZXcoX3N2Z1BhdGhFbGVtLCBfdGFza0VsZW0sIF90YXNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX2hlYWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBfZXZlbnQgPT4ge1xuICAgICAgICAgICAgbGV0IHVuZGVyTW91c2UgPSBkb2N1bWVudC5lbGVtZW50c0Zyb21Qb2ludChfZXZlbnQuY2xpZW50WCwgXG4gICAgICAgICAgICAgICAgX2V2ZW50LmNsaWVudFkpO1xuICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgX2Ugb2YgdW5kZXJNb3VzZSkge1xuICAgICAgICAgICAgICAgIC8vIERpc3JlZ2FyZCBwb3NpdGlvbnMgdGhhdCBhbHNvIGludGVyc2VjdCB0aGUgZXhwYW5kIGJ1dHRvbi5cbiAgICAgICAgICAgICAgICBpZiAoX2UuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1leHBhbmQtaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXJFbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJob3Zlci1wb3NzaWJsZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIF9oZWFkZXJFbGVtLmNsYXNzTGlzdC5hZGQoXCJob3Zlci1wb3NzaWJsZVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgYWRkT3BlbkVkaXQgPSBmdW5jdGlvbihfZWxlbSwgX3Rhc2spIHtcbiAgICAgICAgX2VsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9ldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBCZWNhdXNlIG1vdXNlb3ZlciBkb2Vzbid0IGV4aXN0IG9uIGEgdG91Y2hzY3JlZW4sIHRoZSBlZGl0IGJ1dHRvbiBpc1xuICAgICAgICAgICAgLy8gcmV2ZWFsZWQgb25jZSB0aGUgdXNlciBoYXMgdGFwcGVkIHRoZSB0YXNrJ3MgaGVhZGVyIGFuZCBjYW4gb25seSBiZVxuICAgICAgICAgICAgLy8gYWN0aXZhdGVkIG9uY2UgcmV2ZWFsZWQuIEkuZS4gdGhlIGJ1dHRvbiBjYW4gb25seSBiZSBjbGlja2VkIGlmIHRoZVxuICAgICAgICAgICAgLy8gc2Vjb25kLXRvLWxhc3QgdG91Y2ggd2FzIG9uIHRoZSBidXR0b24ncyB0YXNrJ3MgaGVhZGVyLlxuICAgICAgICAgICAgaWYgKCFzdGF0ZU1hbmFnZXIuY3VycmVudGx5RWRpdGluZykge1xuICAgICAgICAgICAgICAgIGlmIChfZXZlbnQucG9pbnRlclR5cGUgPT0gXCJ0b3VjaFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGFzay5zZWxlY3RlZCAmJiBzdGF0ZU1hbmFnZXIudG91Y2gudG91Y2hlZElkWzBdID09IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90YXNrLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGFzay5jdXJyZW50bHlFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlTWFuYWdlci5jdXJyZW50bHlFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dEJveCA9IGRvbS5jcmVhdGVJbnB1dEJveChfdGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJbnB1dENhcmQoX3Rhc2ssIGlucHV0Qm94KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90YXNrLmN1cnJlbnRseUVkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZU1hbmFnZXIuY3VycmVudGx5RWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dEJveCA9IGRvbS5jcmVhdGVJbnB1dEJveChfdGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElucHV0Q2FyZChfdGFzaywgaW5wdXRCb3gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGxldCBhZGRJbnB1dENhcmQgPSBmdW5jdGlvbihfdGFzaywgX2lucHV0T2JqKSB7XG4gICAgICAgIF9pbnB1dE9iai5wcm9ncmVzc0NoZWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgX2UgPT4ge1xuICAgICAgICAgICAgZG9tLnVwZGF0ZVByb2dyZXNzRmllbGQoX2lucHV0T2JqLnByb2dyZXNzQ2hlY2ssIFxuICAgICAgICAgICAgICAgIF9pbnB1dE9iai5wcm9ncmVzc0ZpZWxkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX2lucHV0T2JqLmNvbmZpcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9ldmVudCA9PiB7XG4gICAgICAgICAgICBfdGFzay5jdXJyZW50bHlFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBzdGF0ZU1hbmFnZXIuY3VycmVudGx5RWRpdGluZyA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgX3Rhc2sudGl0bGUgPSBfaW5wdXRPYmoudGl0bGVJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIF90YXNrLmR1ZURhdGVTdHIgPSBfaW5wdXRPYmouZGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgX3Rhc2suZHVlVGltZVN0ciA9IF9pbnB1dE9iai50aW1lSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBfdGFzay51cGRhdGVEdWUoKTtcbiAgICAgICAgICAgIF90YXNrLmRlc2NyaXB0aW9uID0gX2lucHV0T2JqLmRlc2NJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIF90YXNrLnByaW9yaXR5ID0gZG9tLmdldFJhZGlvVmFsdWUoX2lucHV0T2JqLnByaW9yaXR5RmllbGQpO1xuICAgICAgICAgICAgX3Rhc2sudXNlUHJvZ3Jlc3NGcm9tU3VidGFza3MgPSBfaW5wdXRPYmoucHJvZ3Jlc3NDaGVjay5jaGVja2VkO1xuICAgIFxuICAgICAgICAgICAgaWYgKF90YXNrLnVzZVByb2dyZXNzRnJvbVN1YnRhc2tzKSB7XG4gICAgICAgICAgICAgICAgX3Rhc2sucHJvZ3Jlc3MgPSBfdGFzay5nZXRQcm9ncmVzc1JlY3Vyc2l2ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGFzay5wcm9ncmVzcyA9IGRvbS5nZXRSYWRpb1ZhbHVlKF9pbnB1dE9iai5wcm9ncmVzc0ZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIF90YXNrLm5vdGVzID0gX2lucHV0T2JqLm5vdGVzSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBfaW5wdXRPYmouY2FyZElucHV0LnJlbW92ZSgpO1xuICAgICAgICAgICAgZG9tLnRoYXcoKTtcbiAgICAgICAgICAgIF9pbnB1dE9iai5jYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJlZGl0aW5nXCIpO1xuICAgICAgICAgICAgX3Rhc2suc3VwZXJ0YXNrTGlzdC53cml0ZVJvb3RUb0xvY2FsU3RvcmFnZSgpO1xuICAgICAgICAgICAgX3Rhc2sucmVmcmVzaERvbShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBfaW5wdXRPYmouY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfZXZlbnQgPT4ge1xuICAgICAgICAgICAgX3Rhc2suY3VycmVudGx5RWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgc3RhdGVNYW5hZ2VyLmN1cnJlbnRseUVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgX2lucHV0T2JqLmNhcmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICAgIF9pbnB1dE9iai5jYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJlZGl0aW5nXCIpO1xuICAgICAgICAgICAgZG9tLnRoYXcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkTGVmdENsaWNrLFxuICAgICAgICBhZGRSaWdodENsaWNrLFxuICAgICAgICBhZGRNb2RpZmllcktleXMsXG4gICAgICAgIGFkZENsZWFyRGF0YSxcbiAgICAgICAgYWRkRXhwYW5kU3VidGFza3MsXG4gICAgICAgIGFkZEV4cGFuZFRhc2ssXG4gICAgICAgIGFkZE9wZW5FZGl0LFxuICAgICAgICBhZGRJbnB1dENhcmRcbiAgICB9O1xufSkoKTtcblxubGV0IHRhc2tMaXN0ID0gbmV3IFRhc2tMaXN0KCk7XG50YXNrTGlzdC5yZXN0b3JlRnJvbUxvY2FsU3RvcmFnZSgpO1xuXG5saXN0ZW5lci5hZGRMZWZ0Q2xpY2soKTtcbmxpc3RlbmVyLmFkZFJpZ2h0Q2xpY2soKTtcbmxpc3RlbmVyLmFkZE1vZGlmaWVyS2V5cygpO1xubGlzdGVuZXIuYWRkQ2xlYXJEYXRhKCk7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICAgIGxldCBvZmZzZXQgPSBuZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgbGV0IG9mZnNldERpciA9IG9mZnNldCA8IDAgPyAtMSA6IDE7XG4gICAgb2Zmc2V0ID0gTWF0aC5hYnMob2Zmc2V0KTtcbiAgICBsZXQgc3RyID0gYCR7U3RyaW5nKE1hdGguZmxvb3Iob2Zmc2V0IC8gNjApKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7U3RyaW5nKFxuICAgICAgICBvZmZzZXQgJSA2MCkucGFkU3RhcnQoMiwgXCIwXCIpfWA7XG5cbiAgICBpZiAob2Zmc2V0RGlyID09IDEpIHtcbiAgICAgICAgc3RyID0gXCItXCIgKyBzdHI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gXCIrXCIgKyBzdHJcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xufSJdLCJuYW1lcyI6WyJ0b2tlbiIsInRpbWV6b25lIiwidGltZXpvbmVDbGlwIiwiZGF0ZUZvcm1hdCIsImRhdGUiLCJtYXNrIiwidXRjIiwiZ210IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidGVzdCIsInVuZGVmaW5lZCIsIkRhdGUiLCJpc05hTiIsIlR5cGVFcnJvciIsIm1hc2tTbGljZSIsIlN0cmluZyIsIm1hc2tzIiwic2xpY2UiLCJfIiwiX2QiLCJEIiwiX20iLCJ5IiwiX0giLCJfTSIsIl9zIiwiX0wiLCJfbyIsImdldFRpbWV6b25lT2Zmc2V0IiwiX1ciLCJnZXRXZWVrIiwiZmxhZ3MiLCJkIiwiZGQiLCJwYWQiLCJkZGQiLCJpMThuIiwiZGF5TmFtZXMiLCJEREQiLCJnZXREYXlOYW1lIiwibSIsImRheU5hbWUiLCJzaG9ydCIsImRkZGQiLCJEREREIiwibW0iLCJtbW0iLCJtb250aE5hbWVzIiwibW1tbSIsInl5IiwieXl5eSIsImgiLCJoaCIsIkgiLCJISCIsIk0iLCJNTSIsInMiLCJzcyIsImwiLCJMIiwiTWF0aCIsImZsb29yIiwidCIsInRpbWVOYW1lcyIsInR0IiwiVCIsIlRUIiwiWiIsImZvcm1hdFRpbWV6b25lIiwibyIsImFicyIsInAiLCJTIiwiVyIsIldXIiwiTiIsImdldERheU9mV2VlayIsInJlcGxhY2UiLCJtYXRjaCIsImRlZmF1bHQiLCJzaG9ydERhdGUiLCJwYWRkZWRTaG9ydERhdGUiLCJtZWRpdW1EYXRlIiwibG9uZ0RhdGUiLCJmdWxsRGF0ZSIsInNob3J0VGltZSIsIm1lZGl1bVRpbWUiLCJsb25nVGltZSIsImlzb0RhdGUiLCJpc29UaW1lIiwiaXNvRGF0ZVRpbWUiLCJpc29VdGNEYXRlVGltZSIsImV4cGlyZXNIZWFkZXJGb3JtYXQiLCJ2YWwiLCJsZW4iLCJwYWRTdGFydCIsIl9yZWYiLCJfcmVmJHNob3J0IiwiX3Nob3J0IiwidG9kYXkiLCJ5ZXN0ZXJkYXkiLCJzZXREYXRlIiwidG9tb3Jyb3ciLCJ0YXJnZXRUaHVyc2RheSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RGF5IiwiZmlyc3RUaHVyc2RheSIsImRzIiwic2V0SG91cnMiLCJnZXRIb3VycyIsIndlZWtEaWZmIiwiZG93IiwicG9wIiwidGFza0JpbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByaW9yaXR5TGlzdCIsInByb2dyZXNzTGlzdCIsInVwZGF0ZVRhc2tFeHBhbmRWaWV3IiwiX3N2Z1BhdGgiLCJfY2FyZCIsIl90YXNrIiwiZXhwYW5kQ2FyZCIsImV4cGFuZGVkIiwic2V0QXR0cmlidXRlIiwic2V0U3VidGFza0V4cGFuZFZpZXciLCJfZXhwYW5kZWQiLCJfcmVjdXJzaXZlIiwic3VidGFza3NQbHVzUGF0aCIsInN1YnRhc2tMaXN0IiwidGFzayIsInRhc2tzIiwiaWQiLCJmcmVlemUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aGF3IiwicmVtb3ZlIiwidW5zZWxlY3QiLCJfdGFza0lkIiwiY2FyZCIsImdldFRhc2tJZEF0UG9zIiwiX2NsaWVudFgiLCJfY2xpZW50WSIsInVuZGVyTW91c2UiLCJlbGVtZW50c0Zyb21Qb2ludCIsInRhc2tGb3VuZCIsIl9lbGVtIiwiY29udGFpbnMiLCJpZFBvcyIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJpZEVuZCIsIk51bWJlciIsImNyZWF0ZUlucHV0Qm94IiwiYm9keSIsImNhcmRJbnB1dCIsImNyZWF0ZUFwcGVuZCIsInRpdGxlSW5wdXQiLCJjcmVhdGVJbnB1dCIsInRpdGxlIiwiZm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInZhbHVlIiwiZHVlQ29udGFpbmVyIiwiZGF0ZUlucHV0IiwiZHVlRGF0ZVN0ciIsInRpbWVJbnB1dCIsImR1ZVRpbWVTdHIiLCJkZXNjSW5wdXQiLCJkZXNjcmlwdGlvbiIsInJhZGlvQ29udGFpbmVyIiwicHJpb3JpdHlGaWVsZENvbnRhaW5lciIsInByaW9yaXR5RmllbGQiLCJjcmVhdGVSYWRpb0ZpZWxkIiwicHJpb3JpdHkiLCJzZXRJbnB1dEF0dHJpYnV0ZXMiLCJwcm9ncmVzc0ZpZWxkQ29udGFpbmVyIiwicHJvZ3Jlc3NGaWVsZCIsInByb2dyZXNzIiwicHJvZ3Jlc3NDaGVja0NvbnRhaW5lciIsInByb2dyZXNzQ2hlY2siLCJ1c2VQcm9ncmVzc0Zyb21TdWJ0YXNrcyIsInVwZGF0ZVByb2dyZXNzRmllbGQiLCJub3Rlc0lucHV0Iiwibm90ZXMiLCJidXR0b25EaXYiLCJjb25maXJtIiwiY3JlYXRlU3ZnIiwiY2FuY2VsIiwiX2VsZW1UeXBlIiwiX2NsYXNzZXMiLCJfcGFyZW50RWxlbSIsIl90ZXh0Q29udGVudCIsImVsZW0iLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsIl9jaGVjayIsIl9maWVsZCIsImNoZWNrZWQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRSYWRpb1ZhbHVlIiwiX2ZpZWxkc2V0IiwicmFkaW9zIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJfdHlwZSIsIl9uYW1lIiwiX3ZhbHVlIiwiX2NvbnRhaW5lclBhcmVudCIsIl9jb250YWluZXJDbGFzc2VzIiwiX2xhYmVsVGV4dCIsIl9sYWJlbENsYXNzZXMiLCJjb250YWluZXIiLCJfbmFtZUlkIiwiX2RpdiIsIl9kZWZhdWx0VmFsdWUiLCJfbGFiZWxBcnIiLCJmaWVsZCIsImxhYmVscyIsInB1c2giLCJfcGF0aCIsIl90aXRsZSIsIl91c2VCZyIsIl9wYXRoQ2xhc3MiLCJzdmciLCJjcmVhdGVFbGVtZW50TlMiLCJiZ1BhdGgiLCJwYXRoIiwibmFtZXNwYWNlIiwiY2xpY2tSZWxlYXNlV2luZG93IiwiZ3JvdXAiLCJtZW51IiwiYm9yZGVyIiwibWVudUl0ZW1zIiwiYnV0dG9uRG93blRpbWUiLCJpc1Zpc2libGUiLCJ0aWxlR3JvdXAiLCJmdW5jdGlvbnMiLCJpdGVtVGV4dHMiLCJib3JkZXJTaXplIiwic2NhbGUiLCJmb250U2l6ZSIsIm1lbnVNYXJnaW4iLCJtZW51UG9zT2Zmc2V0IiwieCIsIm1lbnVXaWR0aCIsIm1lbnVIZWlnaHQiLCJpbml0VGltZSIsInBvc3RJbml0RGVsYXkiLCJodG1sIiwiY29uc3RydWN0b3IiLCJfaXRlbVRleHRzIiwiX2Z1bmN0aW9ucyIsIl9jc3NDbGFzc2VzIiwidGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZSIsInVwZGF0ZUhpZ2hsaWdodCIsImNsaWVudFgiLCJjbGllbnRZIiwid2luZG93IiwiZXJhc2UiLCJnZXRUaW1lIiwibWVudVNlbGVjdGlvbiIsImdldEhpZ2hsaWdodGVkIiwibWVudU1vdXNlT3ZlciIsImluY2x1ZGVzIiwicmVjdCIsImFjdGl2YXRlU2VsZWN0aW9uIiwiaW5pdCIsImNvbXB1dGVkRm9udFNpemUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsIm51bSIsImNoYXIiLCJjb2RlIiwiY2hhckNvZGVBdCIsImFkZE1lbnVJdGVtIiwiaGVpZ2h0Iiwid2lkdGgiLCJuZXdXaWR0aCIsInN2Z1RleHQiLCJ0ZXh0IiwiZ2V0QkJveCIsInhNYXJnaW4iLCJnZXRBdHRyaWJ1dGUiLCJidXR0b25Eb3duIiwiZG9jV2lkdGgiLCJjbGllbnRXaWR0aCIsImRvY0hlaWdodCIsImNsaWVudEhlaWdodCIsInhPZmZzZXQiLCJ5T2Zmc2V0Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImJ1dHRvblVwIiwiaXRlbSIsIl90ZXh0IiwiX2Z1bmN0aW9uIiwiX2lkeCIsInNwbGljZSIsIk1lbnVJdGVtIiwidW5oaWdobGlnaHQiLCJoaWdobGlnaHQiLCJpc0hpZ2hsaWdodGVkIiwiZ2V0SGlnaGxpZ2h0ZWRUZXh0IiwiaGlnaGxpZ2h0ZWQiLCJfc2VsZWN0aW9uIiwiYWN0aXZlIiwiZmluZCIsImZ1bmN0aW9uIiwiX2ZvbnRTaXplIiwiX3BhcmVudCIsIlNWR1RleHQiLCJfY29udGVudCIsIl9pZCIsInR5cGUiLCJzdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJlIiwiRE9NRXhjZXB0aW9uIiwibmFtZSIsIlRhc2siLCJkdWVEYXRlIiwiZHVlVGltZSIsImRlcHRoIiwiY3VycmVudGx5RWRpdGluZyIsInN1cGVydGFza0xpc3QiLCJzZWxlY3RlZCIsImRvbURpdiIsInN0YXRpYyIsIl9kdWVEYXRlU3RyIiwiX2R1ZVRpbWVTdHIiLCJfZGVzY3JpcHRpb24iLCJfcHJpb3JpdHkiLCJfcHJvZ3Jlc3MiLCJfbm90ZXMiLCJfc3VwZXJ0YXNrTGlzdCIsIl9pc0Nsb25lIiwidXBkYXRlRHVlIiwiVGFza0xpc3QiLCJoYXNDb250ZW50IiwiYXNzaWduTmV3SWQiLCJ1cGRhdGVEZXB0aCIsImNsb25lIiwiY2xvbmVkIiwib2Zmc2V0Iiwib2Zmc2V0RGlyIiwic3RyIiwiZGF0ZVN0cmluZyIsInN1cGVydGFzayIsIm93bmVyIiwic3VidGFza3MiLCJyZW1vdmVJZCIsImxvZyIsImxvZ2dlciIsImxvZ1Rhc2siLCJnZW5lcmF0ZUlkIiwiYXNzaWduTmV3SWRSZWN1cnNpdmUiLCJyZWZyZXNoRG9tIiwiZ2V0UHJvZ3Jlc3NSZWN1cnNpdmUiLCJzdXBlcnRhc2tEaXYiLCJuZWlnaGJvcklkeCIsImdldFRhc2tJZHgiLCJuZWlnaGJvcklkIiwibmVpZ2hib3JEaXYiLCJpbmRlbnRTdHIiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJoRGl2IiwidGl0bGVDb250YWluZXIiLCJwcmlvcml0eVN2ZyIsImNyZWF0ZVByaW9yaXR5U3ZnIiwicHJvZ3Jlc3NTdmciLCJjcmVhdGVQcm9ncmVzc1N2ZyIsImVkaXRTdmciLCJ0YXNrRXhwYW5kU3ZnIiwidGFza0V4cGFuZFBhdGgiLCJpbmZvQ29udGFpbmVyIiwicHJpb3JpdHlDb250YWluZXIiLCJwcm9ncmVzc0NvbnRhaW5lciIsInByb2ciLCJkZXNjQ29udGFpbmVyIiwibm90ZXNDb250YWluZXIiLCJuZWVkU3VidGFza3NMaXN0ZW5lciIsInN1YnRhc2tzSGVhZGVyIiwic3VidGFza3NFeHBhbmQiLCJ0YXNrRXhwYW5kIiwiaGVhZGVyIiwiZWRpdE9wZW4iLCJsaXN0ZW5lciIsImFkZEV4cGFuZFRhc2siLCJhZGRPcGVuRWRpdCIsImFkZEV4cGFuZFN1YnRhc2tzIiwiY2hhaW4iLCJhZGRTdWJ0YXNrIiwicmVtb3ZlU3VidGFza0lkIiwicmVtb3ZlU3VidGFza0lkeCIsInJlbW92ZUlkeCIsImxhc3RJZCIsIk1BWF9TQUZFX0lOVEVHRVIiLCJyZXNldElkcyIsIl9vd25lciIsIl90YXNrcyIsImZvckVhY2giLCJjcmVhdGVUYXNrIiwiX3Nob3dJbnB1dCIsIm5ld1Rhc2siLCJ3cml0ZVJvb3RUb0xvY2FsU3RvcmFnZSIsInN0YXRlTWFuYWdlciIsImlucHV0Qm94IiwiYWRkSW5wdXRDYXJkIiwiY29uc29sZSIsImdldFRhc2tCeUlkIiwiaWRUYXNrIiwiaGFzVGFza3MiLCJnZXRJZE9yZGVyIiwib3JkZXIiLCJjbGVhciIsImRlbGV0ZSIsImNsb25lSnNvbiIsImpzb25UYXNrTGlzdCIsImluaXRGcm9tSnNvbiIsIl9qc29uT2JqIiwibG9hZGVkVGFzayIsIndyaXRlVG9Mb2NhbFN0b3JhZ2UiLCJfa2V5IiwiREVGQVVMVF9LRVkiLCJqc29uU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvY2FsU3RvcmFnZSIsIndyaXRlRXJyb3JTaG93biIsImFsZXJ0Iiwicm9vdCIsInJlc3RvcmVGcm9tTG9jYWxTdG9yYWdlIiwianNvbk9iaiIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyTG9jYWxTdG9yYWdlIiwic2VsZWN0aW9uQWRkVG8iLCJzZWxlY3Rpb25NYXNzIiwic2V0U2VsZWN0aW9uQWRkVG8iLCJfc3RhdGUiLCJrZXkiLCJzZXRTZWxlY3Rpb25NYXNzIiwidG91Y2giLCJ0aW1lIiwicG9zIiwidG91Y2hlZElkIiwiX3ByZXBlbmQiLCJjb3BpZXIiLCJidWZmZXIiLCJyZWR1Y2VSZWN1cnNpdmVJbnB1dCIsInJlZHVjZWQiLCJ0YXNrSXNTdWJ0YXNrIiwicG9zc2libGVTdXBlciIsImNsZWFyQnVmZmVyIiwiX3JlZnJlc2giLCJBcnJheSIsImluc2VydElkeCIsImNvcHkiLCJfZ2xvYmFsVGFza0xpc3QiLCJpZE9yZGVyIiwic29ydCIsImEiLCJiIiwiY3V0IiwicGFzdGUiLCJfdGFza0xpc3QiLCJidWZJdGVtIiwic2VsZWN0aW9uIiwidXBkYXRlU2VsZWN0aW9uIiwidGFza0xpc3QiLCJzdGFydElkeCIsImVuZElkeCIsImFkZEV4Y2x1c2l2ZSIsImJ1aWxkVGFza01lbnUiLCJtZW51VGV4dHMiLCJtZW51RnVuY3Rpb25zIiwiaWR4IiwidHJpZ2dlck1lbnUiLCJfc2VsZWN0aW9uQWRkVG8iLCJfaXNUb3VjaCIsImNsYXNzZXMiLCJidWlsZEJnTWVudSIsIl9pbnB1dE9iaiIsIl9ldmVudCIsImFkZExlZnRDbGljayIsInRhcmdldCIsIm5lZWRDbGVhciIsImJ1dHRvbiIsInRvdWNoZXMiLCJhZGRSaWdodENsaWNrIiwicHJldmVudERlZmF1bHQiLCJhZGRNb2RpZmllcktleXMiLCJiaW5kIiwiYWRkQ2xlYXJEYXRhIiwiX3N1YnRhc2tzRWxlbSIsIl90YXNrRWxlbSIsIl9zdmdQYXRoRWxlbSIsIl9oZWFkZXJFbGVtIiwicG9pbnRlclR5cGUiXSwic291cmNlUm9vdCI6IiJ9